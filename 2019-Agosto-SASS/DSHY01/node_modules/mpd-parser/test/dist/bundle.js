/*! @name mpd-parser @version 0.8.1 @license Apache-2.0 */
(function (QUnit) {
  'use strict';

  QUnit = QUnit && QUnit.hasOwnProperty('default') ? QUnit['default'] : QUnit;

  var version = "0.8.1";

  var cov_2l5w8p4c9h = function () {
    var path = '/Users/gkatsevman/p/mpd-parser/src/utils/object.js',
        hash = '67a2953b5060f530008b85363f1ed6c20c74bbd5',
        Function = function () {}.constructor,
        global = new Function('return this')(),
        gcv = '__coverage__',
        coverageData = {
      path: '/Users/gkatsevman/p/mpd-parser/src/utils/object.js',
      statementMap: {
        '0': {
          start: {
            line: 1,
            column: 17
          },
          end: {
            line: 3,
            column: 1
          }
        },
        '1': {
          start: {
            line: 2,
            column: 2
          },
          end: {
            line: 2,
            column: 42
          }
        },
        '2': {
          start: {
            line: 5,
            column: 21
          },
          end: {
            line: 21,
            column: 1
          }
        },
        '3': {
          start: {
            line: 7,
            column: 2
          },
          end: {
            line: 20,
            column: 9
          }
        },
        '4': {
          start: {
            line: 9,
            column: 4
          },
          end: {
            line: 18,
            column: 7
          }
        },
        '5': {
          start: {
            line: 11,
            column: 6
          },
          end: {
            line: 17,
            column: 7
          }
        },
        '6': {
          start: {
            line: 12,
            column: 8
          },
          end: {
            line: 12,
            column: 54
          }
        },
        '7': {
          start: {
            line: 13,
            column: 13
          },
          end: {
            line: 17,
            column: 7
          }
        },
        '8': {
          start: {
            line: 14,
            column: 8
          },
          end: {
            line: 14,
            column: 54
          }
        },
        '9': {
          start: {
            line: 16,
            column: 8
          },
          end: {
            line: 16,
            column: 34
          }
        },
        '10': {
          start: {
            line: 19,
            column: 4
          },
          end: {
            line: 19,
            column: 18
          }
        },
        '11': {
          start: {
            line: 23,
            column: 22
          },
          end: {
            line: 23,
            column: 56
          }
        },
        '12': {
          start: {
            line: 23,
            column: 27
          },
          end: {
            line: 23,
            column: 56
          }
        },
        '13': {
          start: {
            line: 23,
            column: 51
          },
          end: {
            line: 23,
            column: 55
          }
        }
      },
      fnMap: {
        '0': {
          name: '(anonymous_0)',
          decl: {
            start: {
              line: 1,
              column: 17
            },
            end: {
              line: 1,
              column: 18
            }
          },
          loc: {
            start: {
              line: 1,
              column: 26
            },
            end: {
              line: 3,
              column: 1
            }
          },
          line: 1
        },
        '1': {
          name: '(anonymous_1)',
          decl: {
            start: {
              line: 5,
              column: 21
            },
            end: {
              line: 5,
              column: 22
            }
          },
          loc: {
            start: {
              line: 5,
              column: 37
            },
            end: {
              line: 21,
              column: 1
            }
          },
          line: 5
        },
        '2': {
          name: '(anonymous_2)',
          decl: {
            start: {
              line: 7,
              column: 24
            },
            end: {
              line: 7,
              column: 25
            }
          },
          loc: {
            start: {
              line: 7,
              column: 44
            },
            end: {
              line: 20,
              column: 3
            }
          },
          line: 7
        },
        '3': {
          name: '(anonymous_3)',
          decl: {
            start: {
              line: 9,
              column: 32
            },
            end: {
              line: 9,
              column: 33
            }
          },
          loc: {
            start: {
              line: 9,
              column: 39
            },
            end: {
              line: 18,
              column: 5
            }
          },
          line: 9
        },
        '4': {
          name: '(anonymous_4)',
          decl: {
            start: {
              line: 23,
              column: 22
            },
            end: {
              line: 23,
              column: 23
            }
          },
          loc: {
            start: {
              line: 23,
              column: 27
            },
            end: {
              line: 23,
              column: 56
            }
          },
          line: 23
        },
        '5': {
          name: '(anonymous_5)',
          decl: {
            start: {
              line: 23,
              column: 46
            },
            end: {
              line: 23,
              column: 47
            }
          },
          loc: {
            start: {
              line: 23,
              column: 51
            },
            end: {
              line: 23,
              column: 55
            }
          },
          line: 23
        }
      },
      branchMap: {
        '0': {
          loc: {
            start: {
              line: 2,
              column: 9
            },
            end: {
              line: 2,
              column: 41
            }
          },
          type: 'binary-expr',
          locations: [{
            start: {
              line: 2,
              column: 9
            },
            end: {
              line: 2,
              column: 14
            }
          }, {
            start: {
              line: 2,
              column: 18
            },
            end: {
              line: 2,
              column: 41
            }
          }],
          line: 2
        },
        '1': {
          loc: {
            start: {
              line: 11,
              column: 6
            },
            end: {
              line: 17,
              column: 7
            }
          },
          type: 'if',
          locations: [{
            start: {
              line: 11,
              column: 6
            },
            end: {
              line: 17,
              column: 7
            }
          }, {
            start: {
              line: 11,
              column: 6
            },
            end: {
              line: 17,
              column: 7
            }
          }],
          line: 11
        },
        '2': {
          loc: {
            start: {
              line: 11,
              column: 10
            },
            end: {
              line: 11,
              column: 66
            }
          },
          type: 'binary-expr',
          locations: [{
            start: {
              line: 11,
              column: 10
            },
            end: {
              line: 11,
              column: 36
            }
          }, {
            start: {
              line: 11,
              column: 40
            },
            end: {
              line: 11,
              column: 66
            }
          }],
          line: 11
        },
        '3': {
          loc: {
            start: {
              line: 13,
              column: 13
            },
            end: {
              line: 17,
              column: 7
            }
          },
          type: 'if',
          locations: [{
            start: {
              line: 13,
              column: 13
            },
            end: {
              line: 17,
              column: 7
            }
          }, {
            start: {
              line: 13,
              column: 13
            },
            end: {
              line: 17,
              column: 7
            }
          }],
          line: 13
        },
        '4': {
          loc: {
            start: {
              line: 13,
              column: 17
            },
            end: {
              line: 13,
              column: 63
            }
          },
          type: 'binary-expr',
          locations: [{
            start: {
              line: 13,
              column: 17
            },
            end: {
              line: 13,
              column: 38
            }
          }, {
            start: {
              line: 13,
              column: 42
            },
            end: {
              line: 13,
              column: 63
            }
          }],
          line: 13
        }
      },
      s: {
        '0': 0,
        '1': 0,
        '2': 0,
        '3': 0,
        '4': 0,
        '5': 0,
        '6': 0,
        '7': 0,
        '8': 0,
        '9': 0,
        '10': 0,
        '11': 0,
        '12': 0,
        '13': 0
      },
      f: {
        '0': 0,
        '1': 0,
        '2': 0,
        '3': 0,
        '4': 0,
        '5': 0
      },
      b: {
        '0': [0, 0],
        '1': [0, 0],
        '2': [0, 0],
        '3': [0, 0],
        '4': [0, 0]
      },
      _coverageSchema: '332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'
    },
        coverage = global[gcv] || (global[gcv] = {});

    if (coverage[path] && coverage[path].hash === hash) {
      return coverage[path];
    }

    coverageData.hash = hash;
    return coverage[path] = coverageData;
  }();

  cov_2l5w8p4c9h.s[0]++;

  var isObject = function isObject(obj) {
    cov_2l5w8p4c9h.f[0]++;
    cov_2l5w8p4c9h.s[1]++;
    return (cov_2l5w8p4c9h.b[0][0]++, !!obj) && (cov_2l5w8p4c9h.b[0][1]++, typeof obj === 'object');
  };

  cov_2l5w8p4c9h.s[2]++;
  var merge = function merge() {
    cov_2l5w8p4c9h.f[1]++;
    cov_2l5w8p4c9h.s[3]++;

    for (var _len = arguments.length, objects = new Array(_len), _key = 0; _key < _len; _key++) {
      objects[_key] = arguments[_key];
    }

    return objects.reduce(function (result, source) {
      cov_2l5w8p4c9h.f[2]++;
      cov_2l5w8p4c9h.s[4]++;
      Object.keys(source).forEach(function (key) {
        cov_2l5w8p4c9h.f[3]++;
        cov_2l5w8p4c9h.s[5]++;

        if ((cov_2l5w8p4c9h.b[2][0]++, Array.isArray(result[key])) && (cov_2l5w8p4c9h.b[2][1]++, Array.isArray(source[key]))) {
          cov_2l5w8p4c9h.b[1][0]++;
          cov_2l5w8p4c9h.s[6]++;
          result[key] = result[key].concat(source[key]);
        } else {
          cov_2l5w8p4c9h.b[1][1]++;
          cov_2l5w8p4c9h.s[7]++;

          if ((cov_2l5w8p4c9h.b[4][0]++, isObject(result[key])) && (cov_2l5w8p4c9h.b[4][1]++, isObject(source[key]))) {
            cov_2l5w8p4c9h.b[3][0]++;
            cov_2l5w8p4c9h.s[8]++;
            result[key] = merge(result[key], source[key]);
          } else {
            cov_2l5w8p4c9h.b[3][1]++;
            cov_2l5w8p4c9h.s[9]++;
            result[key] = source[key];
          }
        }
      });
      cov_2l5w8p4c9h.s[10]++;
      return result;
    }, {});
  };
  cov_2l5w8p4c9h.s[11]++;
  var values = function values(o) {
    cov_2l5w8p4c9h.f[4]++;
    cov_2l5w8p4c9h.s[12]++;
    return Object.keys(o).map(function (k) {
      cov_2l5w8p4c9h.f[5]++;
      cov_2l5w8p4c9h.s[13]++;
      return o[k];
    });
  };

  var cov_c2qeh96db = function () {
    var path = "/Users/gkatsevman/p/mpd-parser/src/utils/list.js",
        hash = "6ef14a381b8c7473c10eac418b15c59eb11a680f",
        Function = function () {}.constructor,
        global = new Function('return this')(),
        gcv = "__coverage__",
        coverageData = {
      path: "/Users/gkatsevman/p/mpd-parser/src/utils/list.js",
      statementMap: {
        "0": {
          start: {
            line: 1,
            column: 21
          },
          end: {
            line: 9,
            column: 1
          }
        },
        "1": {
          start: {
            line: 2,
            column: 17
          },
          end: {
            line: 2,
            column: 19
          }
        },
        "2": {
          start: {
            line: 4,
            column: 2
          },
          end: {
            line: 6,
            column: 3
          }
        },
        "3": {
          start: {
            line: 5,
            column: 4
          },
          end: {
            line: 5,
            column: 19
          }
        },
        "4": {
          start: {
            line: 8,
            column: 2
          },
          end: {
            line: 8,
            column: 16
          }
        },
        "5": {
          start: {
            line: 11,
            column: 23
          },
          end: {
            line: 11,
            column: 71
          }
        },
        "6": {
          start: {
            line: 11,
            column: 32
          },
          end: {
            line: 11,
            column: 71
          }
        },
        "7": {
          start: {
            line: 11,
            column: 55
          },
          end: {
            line: 11,
            column: 66
          }
        },
        "8": {
          start: {
            line: 13,
            column: 20
          },
          end: {
            line: 25,
            column: 1
          }
        },
        "9": {
          start: {
            line: 14,
            column: 2
          },
          end: {
            line: 16,
            column: 3
          }
        },
        "10": {
          start: {
            line: 15,
            column: 4
          },
          end: {
            line: 15,
            column: 14
          }
        },
        "11": {
          start: {
            line: 18,
            column: 17
          },
          end: {
            line: 18,
            column: 19
          }
        },
        "12": {
          start: {
            line: 20,
            column: 2
          },
          end: {
            line: 22,
            column: 3
          }
        },
        "13": {
          start: {
            line: 21,
            column: 4
          },
          end: {
            line: 21,
            column: 25
          }
        },
        "14": {
          start: {
            line: 24,
            column: 2
          },
          end: {
            line: 24,
            column: 16
          }
        },
        "15": {
          start: {
            line: 27,
            column: 27
          },
          end: {
            line: 33,
            column: 6
          }
        },
        "16": {
          start: {
            line: 27,
            column: 39
          },
          end: {
            line: 33,
            column: 6
          }
        },
        "17": {
          start: {
            line: 28,
            column: 2
          },
          end: {
            line: 30,
            column: 3
          }
        },
        "18": {
          start: {
            line: 29,
            column: 4
          },
          end: {
            line: 29,
            column: 14
          }
        },
        "19": {
          start: {
            line: 32,
            column: 2
          },
          end: {
            line: 32,
            column: 11
          }
        }
      },
      fnMap: {
        "0": {
          name: "(anonymous_0)",
          decl: {
            start: {
              line: 1,
              column: 21
            },
            end: {
              line: 1,
              column: 22
            }
          },
          loc: {
            start: {
              line: 1,
              column: 37
            },
            end: {
              line: 9,
              column: 1
            }
          },
          line: 1
        },
        "1": {
          name: "(anonymous_1)",
          decl: {
            start: {
              line: 11,
              column: 23
            },
            end: {
              line: 11,
              column: 24
            }
          },
          loc: {
            start: {
              line: 11,
              column: 32
            },
            end: {
              line: 11,
              column: 71
            }
          },
          line: 11
        },
        "2": {
          name: "(anonymous_2)",
          decl: {
            start: {
              line: 11,
              column: 45
            },
            end: {
              line: 11,
              column: 46
            }
          },
          loc: {
            start: {
              line: 11,
              column: 55
            },
            end: {
              line: 11,
              column: 66
            }
          },
          line: 11
        },
        "3": {
          name: "(anonymous_3)",
          decl: {
            start: {
              line: 13,
              column: 20
            },
            end: {
              line: 13,
              column: 21
            }
          },
          loc: {
            start: {
              line: 13,
              column: 28
            },
            end: {
              line: 25,
              column: 1
            }
          },
          line: 13
        },
        "4": {
          name: "(anonymous_4)",
          decl: {
            start: {
              line: 27,
              column: 27
            },
            end: {
              line: 27,
              column: 28
            }
          },
          loc: {
            start: {
              line: 27,
              column: 39
            },
            end: {
              line: 33,
              column: 6
            }
          },
          line: 27
        },
        "5": {
          name: "(anonymous_5)",
          decl: {
            start: {
              line: 27,
              column: 48
            },
            end: {
              line: 27,
              column: 49
            }
          },
          loc: {
            start: {
              line: 27,
              column: 61
            },
            end: {
              line: 33,
              column: 1
            }
          },
          line: 27
        }
      },
      branchMap: {
        "0": {
          loc: {
            start: {
              line: 14,
              column: 2
            },
            end: {
              line: 16,
              column: 3
            }
          },
          type: "if",
          locations: [{
            start: {
              line: 14,
              column: 2
            },
            end: {
              line: 16,
              column: 3
            }
          }, {
            start: {
              line: 14,
              column: 2
            },
            end: {
              line: 16,
              column: 3
            }
          }],
          line: 14
        },
        "1": {
          loc: {
            start: {
              line: 28,
              column: 2
            },
            end: {
              line: 30,
              column: 3
            }
          },
          type: "if",
          locations: [{
            start: {
              line: 28,
              column: 2
            },
            end: {
              line: 30,
              column: 3
            }
          }, {
            start: {
              line: 28,
              column: 2
            },
            end: {
              line: 30,
              column: 3
            }
          }],
          line: 28
        }
      },
      s: {
        "0": 0,
        "1": 0,
        "2": 0,
        "3": 0,
        "4": 0,
        "5": 0,
        "6": 0,
        "7": 0,
        "8": 0,
        "9": 0,
        "10": 0,
        "11": 0,
        "12": 0,
        "13": 0,
        "14": 0,
        "15": 0,
        "16": 0,
        "17": 0,
        "18": 0,
        "19": 0
      },
      f: {
        "0": 0,
        "1": 0,
        "2": 0,
        "3": 0,
        "4": 0,
        "5": 0
      },
      b: {
        "0": [0, 0],
        "1": [0, 0]
      },
      _coverageSchema: "332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"
    },
        coverage = global[gcv] || (global[gcv] = {});

    if (coverage[path] && coverage[path].hash === hash) {
      return coverage[path];
    }

    coverageData.hash = hash;
    return coverage[path] = coverageData;
  }();

  cov_c2qeh96db.s[0]++;
  var range = function range(start, end) {
    cov_c2qeh96db.f[0]++;
    var result = (cov_c2qeh96db.s[1]++, []);
    cov_c2qeh96db.s[2]++;

    for (var i = start; i < end; i++) {
      cov_c2qeh96db.s[3]++;
      result.push(i);
    }

    cov_c2qeh96db.s[4]++;
    return result;
  };
  cov_c2qeh96db.s[5]++;
  var flatten = function flatten(lists) {
    cov_c2qeh96db.f[1]++;
    cov_c2qeh96db.s[6]++;
    return lists.reduce(function (x, y) {
      cov_c2qeh96db.f[2]++;
      cov_c2qeh96db.s[7]++;
      return x.concat(y);
    }, []);
  };
  cov_c2qeh96db.s[8]++;
  var from = function from(list) {
    cov_c2qeh96db.f[3]++;
    cov_c2qeh96db.s[9]++;

    if (!list.length) {
      cov_c2qeh96db.b[0][0]++;
      cov_c2qeh96db.s[10]++;
      return [];
    } else {
      cov_c2qeh96db.b[0][1]++;
    }

    var result = (cov_c2qeh96db.s[11]++, []);
    cov_c2qeh96db.s[12]++;

    for (var i = 0; i < list.length; i++) {
      cov_c2qeh96db.s[13]++;
      result.push(list[i]);
    }

    cov_c2qeh96db.s[14]++;
    return result;
  };
  cov_c2qeh96db.s[15]++;
  var findIndexes = function findIndexes(l, key) {
    cov_c2qeh96db.f[4]++;
    cov_c2qeh96db.s[16]++;
    return l.reduce(function (a, e, i) {
      cov_c2qeh96db.f[5]++;
      cov_c2qeh96db.s[17]++;

      if (e[key]) {
        cov_c2qeh96db.b[1][0]++;
        cov_c2qeh96db.s[18]++;
        a.push(i);
      } else {
        cov_c2qeh96db.b[1][1]++;
      }

      cov_c2qeh96db.s[19]++;
      return a;
    }, []);
  };

  var cov_15m39cb3p2 = function () {
    var path = '/Users/gkatsevman/p/mpd-parser/src/errors.js',
        hash = '0dc4308082d6a103421e2809e5957f9ff3b3b594',
        Function = function () {}.constructor,
        global = new Function('return this')(),
        gcv = '__coverage__',
        coverageData = {
      path: '/Users/gkatsevman/p/mpd-parser/src/errors.js',
      statementMap: {},
      fnMap: {},
      branchMap: {},
      s: {},
      f: {},
      b: {},
      _coverageSchema: '332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'
    },
        coverage = global[gcv] || (global[gcv] = {});

    if (coverage[path] && coverage[path].hash === hash) {
      return coverage[path];
    }

    coverageData.hash = hash;
    return coverage[path] = coverageData;
  }();

  var errors = {
    INVALID_NUMBER_OF_PERIOD: 'INVALID_NUMBER_OF_PERIOD',
    DASH_EMPTY_MANIFEST: 'DASH_EMPTY_MANIFEST',
    DASH_INVALID_XML: 'DASH_INVALID_XML',
    NO_BASE_URL: 'NO_BASE_URL',
    MISSING_SEGMENT_INFORMATION: 'MISSING_SEGMENT_INFORMATION',
    SEGMENT_TIME_UNSPECIFIED: 'SEGMENT_TIME_UNSPECIFIED',
    UNSUPPORTED_UTC_TIMING_SCHEME: 'UNSUPPORTED_UTC_TIMING_SCHEME'
  };

  var commonjsGlobal = typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};

  function createCommonjsModule(fn, module) {
  	return module = { exports: {} }, fn(module, module.exports), module.exports;
  }

  var urlToolkit = createCommonjsModule(function (module, exports) {
  // see https://tools.ietf.org/html/rfc1808

  /* jshint ignore:start */
  (function(root) { 
  /* jshint ignore:end */

    var URL_REGEX = /^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/;
    var FIRST_SEGMENT_REGEX = /^([^\/?#]*)(.*)$/;
    var SLASH_DOT_REGEX = /(?:\/|^)\.(?=\/)/g;
    var SLASH_DOT_DOT_REGEX = /(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g;

    var URLToolkit = { // jshint ignore:line
      // If opts.alwaysNormalize is true then the path will always be normalized even when it starts with / or //
      // E.g
      // With opts.alwaysNormalize = false (default, spec compliant)
      // http://a.com/b/cd + /e/f/../g => http://a.com/e/f/../g
      // With opts.alwaysNormalize = true (not spec compliant)
      // http://a.com/b/cd + /e/f/../g => http://a.com/e/g
      buildAbsoluteURL: function(baseURL, relativeURL, opts) {
        opts = opts || {};
        // remove any remaining space and CRLF
        baseURL = baseURL.trim();
        relativeURL = relativeURL.trim();
        if (!relativeURL) {
          // 2a) If the embedded URL is entirely empty, it inherits the
          // entire base URL (i.e., is set equal to the base URL)
          // and we are done.
          if (!opts.alwaysNormalize) {
            return baseURL;
          }
          var basePartsForNormalise = URLToolkit.parseURL(baseURL);
          if (!basePartsForNormalise) {
            throw new Error('Error trying to parse base URL.');
          }
          basePartsForNormalise.path = URLToolkit.normalizePath(basePartsForNormalise.path);
          return URLToolkit.buildURLFromParts(basePartsForNormalise);
        }
        var relativeParts = URLToolkit.parseURL(relativeURL);
        if (!relativeParts) {
          throw new Error('Error trying to parse relative URL.');
        }
        if (relativeParts.scheme) {
          // 2b) If the embedded URL starts with a scheme name, it is
          // interpreted as an absolute URL and we are done.
          if (!opts.alwaysNormalize) {
            return relativeURL;
          }
          relativeParts.path = URLToolkit.normalizePath(relativeParts.path);
          return URLToolkit.buildURLFromParts(relativeParts);
        }
        var baseParts = URLToolkit.parseURL(baseURL);
        if (!baseParts) {
          throw new Error('Error trying to parse base URL.');
        }
        if (!baseParts.netLoc && baseParts.path && baseParts.path[0] !== '/') {
          // If netLoc missing and path doesn't start with '/', assume everthing before the first '/' is the netLoc
          // This causes 'example.com/a' to be handled as '//example.com/a' instead of '/example.com/a'
          var pathParts = FIRST_SEGMENT_REGEX.exec(baseParts.path);
          baseParts.netLoc = pathParts[1];
          baseParts.path = pathParts[2];
        }
        if (baseParts.netLoc && !baseParts.path) {
          baseParts.path = '/';
        }
        var builtParts = {
          // 2c) Otherwise, the embedded URL inherits the scheme of
          // the base URL.
          scheme: baseParts.scheme,
          netLoc: relativeParts.netLoc,
          path: null,
          params: relativeParts.params,
          query: relativeParts.query,
          fragment: relativeParts.fragment
        };
        if (!relativeParts.netLoc) {
          // 3) If the embedded URL's <net_loc> is non-empty, we skip to
          // Step 7.  Otherwise, the embedded URL inherits the <net_loc>
          // (if any) of the base URL.
          builtParts.netLoc = baseParts.netLoc;
          // 4) If the embedded URL path is preceded by a slash "/", the
          // path is not relative and we skip to Step 7.
          if (relativeParts.path[0] !== '/') {
            if (!relativeParts.path) {
              // 5) If the embedded URL path is empty (and not preceded by a
              // slash), then the embedded URL inherits the base URL path
              builtParts.path = baseParts.path;
              // 5a) if the embedded URL's <params> is non-empty, we skip to
              // step 7; otherwise, it inherits the <params> of the base
              // URL (if any) and
              if (!relativeParts.params) {
                builtParts.params = baseParts.params;
                // 5b) if the embedded URL's <query> is non-empty, we skip to
                // step 7; otherwise, it inherits the <query> of the base
                // URL (if any) and we skip to step 7.
                if (!relativeParts.query) {
                  builtParts.query = baseParts.query;
                }
              }
            } else {
              // 6) The last segment of the base URL's path (anything
              // following the rightmost slash "/", or the entire path if no
              // slash is present) is removed and the embedded URL's path is
              // appended in its place.
              var baseURLPath = baseParts.path;
              var newPath = baseURLPath.substring(0, baseURLPath.lastIndexOf('/') + 1) + relativeParts.path;
              builtParts.path = URLToolkit.normalizePath(newPath);
            }
          }
        }
        if (builtParts.path === null) {
          builtParts.path = opts.alwaysNormalize ? URLToolkit.normalizePath(relativeParts.path) : relativeParts.path;
        }
        return URLToolkit.buildURLFromParts(builtParts);
      },
      parseURL: function(url) {
        var parts = URL_REGEX.exec(url);
        if (!parts) {
          return null;
        }
        return {
          scheme: parts[1] || '',
          netLoc: parts[2] || '',
          path: parts[3] || '',
          params: parts[4] || '',
          query: parts[5] || '',
          fragment: parts[6] || ''
        };
      },
      normalizePath: function(path) {
        // The following operations are
        // then applied, in order, to the new path:
        // 6a) All occurrences of "./", where "." is a complete path
        // segment, are removed.
        // 6b) If the path ends with "." as a complete path segment,
        // that "." is removed.
        path = path.split('').reverse().join('').replace(SLASH_DOT_REGEX, '');
        // 6c) All occurrences of "<segment>/../", where <segment> is a
        // complete path segment not equal to "..", are removed.
        // Removal of these path segments is performed iteratively,
        // removing the leftmost matching pattern on each iteration,
        // until no matching pattern remains.
        // 6d) If the path ends with "<segment>/..", where <segment> is a
        // complete path segment not equal to "..", that
        // "<segment>/.." is removed.
        while (path.length !== (path = path.replace(SLASH_DOT_DOT_REGEX, '')).length) {} // jshint ignore:line
        return path.split('').reverse().join('');
      },
      buildURLFromParts: function(parts) {
        return parts.scheme + parts.netLoc + parts.path + parts.params + parts.query + parts.fragment;
      }
    };

  /* jshint ignore:start */
    module.exports = URLToolkit;
  })(commonjsGlobal);
  /* jshint ignore:end */
  });

  var win;

  if (typeof window !== "undefined") {
      win = window;
  } else if (typeof commonjsGlobal !== "undefined") {
      win = commonjsGlobal;
  } else if (typeof self !== "undefined"){
      win = self;
  } else {
      win = {};
  }

  var window_1 = win;

  var cov_1iizkg7php = function () {
    var path = '/Users/gkatsevman/p/mpd-parser/src/utils/resolveUrl.js',
        hash = 'f1b3833f379532ca1d7bf012b37ef564fea9efeb',
        Function = function () {}.constructor,
        global = new Function('return this')(),
        gcv = '__coverage__',
        coverageData = {
      path: '/Users/gkatsevman/p/mpd-parser/src/utils/resolveUrl.js',
      statementMap: {
        '0': {
          start: {
            line: 4,
            column: 19
          },
          end: {
            line: 16,
            column: 1
          }
        },
        '1': {
          start: {
            line: 6,
            column: 2
          },
          end: {
            line: 8,
            column: 3
          }
        },
        '2': {
          start: {
            line: 7,
            column: 4
          },
          end: {
            line: 7,
            column: 23
          }
        },
        '3': {
          start: {
            line: 11,
            column: 2
          },
          end: {
            line: 13,
            column: 3
          }
        },
        '4': {
          start: {
            line: 12,
            column: 4
          },
          end: {
            line: 12,
            column: 73
          }
        },
        '5': {
          start: {
            line: 15,
            column: 2
          },
          end: {
            line: 15,
            column: 59
          }
        }
      },
      fnMap: {
        '0': {
          name: '(anonymous_0)',
          decl: {
            start: {
              line: 4,
              column: 19
            },
            end: {
              line: 4,
              column: 20
            }
          },
          loc: {
            start: {
              line: 4,
              column: 45
            },
            end: {
              line: 16,
              column: 1
            }
          },
          line: 4
        }
      },
      branchMap: {
        '0': {
          loc: {
            start: {
              line: 6,
              column: 2
            },
            end: {
              line: 8,
              column: 3
            }
          },
          type: 'if',
          locations: [{
            start: {
              line: 6,
              column: 2
            },
            end: {
              line: 8,
              column: 3
            }
          }, {
            start: {
              line: 6,
              column: 2
            },
            end: {
              line: 8,
              column: 3
            }
          }],
          line: 6
        },
        '1': {
          loc: {
            start: {
              line: 11,
              column: 2
            },
            end: {
              line: 13,
              column: 3
            }
          },
          type: 'if',
          locations: [{
            start: {
              line: 11,
              column: 2
            },
            end: {
              line: 13,
              column: 3
            }
          }, {
            start: {
              line: 11,
              column: 2
            },
            end: {
              line: 13,
              column: 3
            }
          }],
          line: 11
        }
      },
      s: {
        '0': 0,
        '1': 0,
        '2': 0,
        '3': 0,
        '4': 0,
        '5': 0
      },
      f: {
        '0': 0
      },
      b: {
        '0': [0, 0],
        '1': [0, 0]
      },
      _coverageSchema: '332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'
    },
        coverage = global[gcv] || (global[gcv] = {});

    if (coverage[path] && coverage[path].hash === hash) {
      return coverage[path];
    }

    coverageData.hash = hash;
    return coverage[path] = coverageData;
  }();
  cov_1iizkg7php.s[0]++;

  var resolveUrl = function resolveUrl(baseUrl, relativeUrl) {
    cov_1iizkg7php.f[0]++;
    cov_1iizkg7php.s[1]++;

    if (/^[a-z]+:/i.test(relativeUrl)) {
      cov_1iizkg7php.b[0][0]++;
      cov_1iizkg7php.s[2]++;
      return relativeUrl;
    } else {
      cov_1iizkg7php.b[0][1]++;
    }

    cov_1iizkg7php.s[3]++;

    if (!/\/\//i.test(baseUrl)) {
      cov_1iizkg7php.b[1][0]++;
      cov_1iizkg7php.s[4]++;
      baseUrl = urlToolkit.buildAbsoluteURL(window_1.location.href, baseUrl);
    } else {
      cov_1iizkg7php.b[1][1]++;
    }

    cov_1iizkg7php.s[5]++;
    return urlToolkit.buildAbsoluteURL(baseUrl, relativeUrl);
  };

  var cov_19v2377ejs = function () {
    var path = '/Users/gkatsevman/p/mpd-parser/src/segment/urlType.js',
        hash = 'e8034f982f07f06f56b7e85f3346a46a43e60198',
        Function = function () {}.constructor,
        global = new Function('return this')(),
        gcv = '__coverage__',
        coverageData = {
      path: '/Users/gkatsevman/p/mpd-parser/src/segment/urlType.js',
      statementMap: {
        '0': {
          start: {
            line: 28,
            column: 32
          },
          end: {
            line: 49,
            column: 1
          }
        },
        '1': {
          start: {
            line: 29,
            column: 18
          },
          end: {
            line: 32,
            column: 3
          }
        },
        '2': {
          start: {
            line: 34,
            column: 2
          },
          end: {
            line: 46,
            column: 3
          }
        },
        '3': {
          start: {
            line: 35,
            column: 21
          },
          end: {
            line: 35,
            column: 47
          }
        },
        '4': {
          start: {
            line: 36,
            column: 19
          },
          end: {
            line: 36,
            column: 38
          }
        },
        '5': {
          start: {
            line: 37,
            column: 23
          },
          end: {
            line: 37,
            column: 46
          }
        },
        '6': {
          start: {
            line: 38,
            column: 21
          },
          end: {
            line: 38,
            column: 44
          }
        },
        '7': {
          start: {
            line: 42,
            column: 4
          },
          end: {
            line: 45,
            column: 6
          }
        },
        '8': {
          start: {
            line: 48,
            column: 2
          },
          end: {
            line: 48,
            column: 17
          }
        },
        '9': {
          start: {
            line: 51,
            column: 33
          },
          end: {
            line: 57,
            column: 1
          }
        },
        '10': {
          start: {
            line: 54,
            column: 19
          },
          end: {
            line: 54,
            column: 58
          }
        },
        '11': {
          start: {
            line: 56,
            column: 2
          },
          end: {
            line: 56,
            column: 43
          }
        }
      },
      fnMap: {
        '0': {
          name: '(anonymous_0)',
          decl: {
            start: {
              line: 28,
              column: 32
            },
            end: {
              line: 28,
              column: 33
            }
          },
          loc: {
            start: {
              line: 28,
              column: 96
            },
            end: {
              line: 49,
              column: 1
            }
          },
          line: 28
        },
        '1': {
          name: '(anonymous_1)',
          decl: {
            start: {
              line: 51,
              column: 33
            },
            end: {
              line: 51,
              column: 34
            }
          },
          loc: {
            start: {
              line: 51,
              column: 48
            },
            end: {
              line: 57,
              column: 1
            }
          },
          line: 51
        }
      },
      branchMap: {
        '0': {
          loc: {
            start: {
              line: 28,
              column: 35
            },
            end: {
              line: 28,
              column: 47
            }
          },
          type: 'default-arg',
          locations: [{
            start: {
              line: 28,
              column: 45
            },
            end: {
              line: 28,
              column: 47
            }
          }],
          line: 28
        },
        '1': {
          loc: {
            start: {
              line: 28,
              column: 49
            },
            end: {
              line: 28,
              column: 60
            }
          },
          type: 'default-arg',
          locations: [{
            start: {
              line: 28,
              column: 58
            },
            end: {
              line: 28,
              column: 60
            }
          }],
          line: 28
        },
        '2': {
          loc: {
            start: {
              line: 28,
              column: 62
            },
            end: {
              line: 28,
              column: 72
            }
          },
          type: 'default-arg',
          locations: [{
            start: {
              line: 28,
              column: 70
            },
            end: {
              line: 28,
              column: 72
            }
          }],
          line: 28
        },
        '3': {
          loc: {
            start: {
              line: 28,
              column: 74
            },
            end: {
              line: 28,
              column: 89
            }
          },
          type: 'default-arg',
          locations: [{
            start: {
              line: 28,
              column: 87
            },
            end: {
              line: 28,
              column: 89
            }
          }],
          line: 28
        },
        '4': {
          loc: {
            start: {
              line: 31,
              column: 28
            },
            end: {
              line: 31,
              column: 41
            }
          },
          type: 'binary-expr',
          locations: [{
            start: {
              line: 31,
              column: 28
            },
            end: {
              line: 31,
              column: 35
            }
          }, {
            start: {
              line: 31,
              column: 39
            },
            end: {
              line: 31,
              column: 41
            }
          }],
          line: 31
        },
        '5': {
          loc: {
            start: {
              line: 34,
              column: 2
            },
            end: {
              line: 46,
              column: 3
            }
          },
          type: 'if',
          locations: [{
            start: {
              line: 34,
              column: 2
            },
            end: {
              line: 46,
              column: 3
            }
          }, {
            start: {
              line: 34,
              column: 2
            },
            end: {
              line: 46,
              column: 3
            }
          }],
          line: 34
        },
        '6': {
          loc: {
            start: {
              line: 34,
              column: 6
            },
            end: {
              line: 34,
              column: 25
            }
          },
          type: 'binary-expr',
          locations: [{
            start: {
              line: 34,
              column: 6
            },
            end: {
              line: 34,
              column: 11
            }
          }, {
            start: {
              line: 34,
              column: 15
            },
            end: {
              line: 34,
              column: 25
            }
          }],
          line: 34
        },
        '7': {
          loc: {
            start: {
              line: 35,
              column: 21
            },
            end: {
              line: 35,
              column: 47
            }
          },
          type: 'cond-expr',
          locations: [{
            start: {
              line: 35,
              column: 29
            },
            end: {
              line: 35,
              column: 34
            }
          }, {
            start: {
              line: 35,
              column: 37
            },
            end: {
              line: 35,
              column: 47
            }
          }],
          line: 35
        }
      },
      s: {
        '0': 0,
        '1': 0,
        '2': 0,
        '3': 0,
        '4': 0,
        '5': 0,
        '6': 0,
        '7': 0,
        '8': 0,
        '9': 0,
        '10': 0,
        '11': 0
      },
      f: {
        '0': 0,
        '1': 0
      },
      b: {
        '0': [0],
        '1': [0],
        '2': [0],
        '3': [0],
        '4': [0, 0],
        '5': [0, 0],
        '6': [0, 0],
        '7': [0, 0]
      },
      _coverageSchema: '332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'
    },
        coverage = global[gcv] || (global[gcv] = {});

    if (coverage[path] && coverage[path].hash === hash) {
      return coverage[path];
    }

    coverageData.hash = hash;
    return coverage[path] = coverageData;
  }();
  cov_19v2377ejs.s[0]++;
  var urlTypeToSegment = function urlTypeToSegment(_ref) {
    var _ref$baseUrl = _ref.baseUrl,
        baseUrl = _ref$baseUrl === void 0 ? (cov_19v2377ejs.b[0][0]++, '') : _ref$baseUrl,
        _ref$source = _ref.source,
        source = _ref$source === void 0 ? (cov_19v2377ejs.b[1][0]++, '') : _ref$source,
        _ref$range = _ref.range,
        range = _ref$range === void 0 ? (cov_19v2377ejs.b[2][0]++, '') : _ref$range,
        _ref$indexRange = _ref.indexRange,
        indexRange = _ref$indexRange === void 0 ? (cov_19v2377ejs.b[3][0]++, '') : _ref$indexRange;
    cov_19v2377ejs.f[0]++;
    var segment = (cov_19v2377ejs.s[1]++, {
      uri: source,
      resolvedUri: resolveUrl((cov_19v2377ejs.b[4][0]++, baseUrl) || (cov_19v2377ejs.b[4][1]++, ''), source)
    });
    cov_19v2377ejs.s[2]++;

    if ((cov_19v2377ejs.b[6][0]++, range) || (cov_19v2377ejs.b[6][1]++, indexRange)) {
      cov_19v2377ejs.b[5][0]++;
      var rangeStr = (cov_19v2377ejs.s[3]++, range ? (cov_19v2377ejs.b[7][0]++, range) : (cov_19v2377ejs.b[7][1]++, indexRange));
      var ranges = (cov_19v2377ejs.s[4]++, rangeStr.split('-'));
      var startRange = (cov_19v2377ejs.s[5]++, parseInt(ranges[0], 10));
      var endRange = (cov_19v2377ejs.s[6]++, parseInt(ranges[1], 10));
      cov_19v2377ejs.s[7]++;
      segment.byterange = {
        length: endRange - startRange + 1,
        offset: startRange
      };
    } else {
      cov_19v2377ejs.b[5][1]++;
    }

    cov_19v2377ejs.s[8]++;
    return segment;
  };
  cov_19v2377ejs.s[9]++;
  var byteRangeToString = function byteRangeToString(byterange) {
    cov_19v2377ejs.f[1]++;
    var endRange = (cov_19v2377ejs.s[10]++, byterange.offset + byterange.length - 1);
    cov_19v2377ejs.s[11]++;
    return byterange.offset + "-" + endRange;
  };

  var cov_270ru1kouy = function () {
    var path = '/Users/gkatsevman/p/mpd-parser/src/segment/durationTimeParser.js',
        hash = '7421497d62239658d441f2071fe20b656bdcd451',
        Function = function () {}.constructor,
        global = new Function('return this')(),
        gcv = '__coverage__',
        coverageData = {
      path: '/Users/gkatsevman/p/mpd-parser/src/segment/durationTimeParser.js',
      statementMap: {
        '0': {
          start: {
            line: 7,
            column: 28
          },
          end: {
            line: 62,
            column: 1
          }
        },
        '1': {
          start: {
            line: 21,
            column: 8
          },
          end: {
            line: 21,
            column: 18
          }
        },
        '2': {
          start: {
            line: 23,
            column: 4
          },
          end: {
            line: 26,
            column: 6
          }
        },
        '3': {
          start: {
            line: 47,
            column: 8
          },
          end: {
            line: 47,
            column: 18
          }
        },
        '4': {
          start: {
            line: 48,
            column: 16
          },
          end: {
            line: 48,
            column: 43
          }
        },
        '5': {
          start: {
            line: 49,
            column: 26
          },
          end: {
            line: 49,
            column: 55
          }
        },
        '6': {
          start: {
            line: 50,
            column: 24
          },
          end: {
            line: 50,
            column: 49
          }
        },
        '7': {
          start: {
            line: 51,
            column: 27
          },
          end: {
            line: 51,
            column: 54
          }
        },
        '8': {
          start: {
            line: 52,
            column: 25
          },
          end: {
            line: 52,
            column: 73
          }
        },
        '9': {
          start: {
            line: 54,
            column: 6
          },
          end: {
            line: 54,
            column: 85
          }
        },
        '10': {
          start: {
            line: 55,
            column: 25
          },
          end: {
            line: 55,
            column: 81
          }
        },
        '11': {
          start: {
            line: 57,
            column: 4
          },
          end: {
            line: 60,
            column: 6
          }
        },
        '12': {
          start: {
            line: 87,
            column: 26
          },
          end: {
            line: 101,
            column: 1
          }
        },
        '13': {
          start: {
            line: 87,
            column: 42
          },
          end: {
            line: 101,
            column: 1
          }
        },
        '14': {
          start: {
            line: 93,
            column: 6
          },
          end: {
            line: 93,
            column: 16
          }
        },
        '15': {
          start: {
            line: 95,
            column: 2
          },
          end: {
            line: 100,
            column: 4
          }
        },
        '16': {
          start: {
            line: 113,
            column: 31
          },
          end: {
            line: 132,
            column: 1
          }
        },
        '17': {
          start: {
            line: 119,
            column: 6
          },
          end: {
            line: 119,
            column: 16
          }
        },
        '18': {
          start: {
            line: 121,
            column: 25
          },
          end: {
            line: 121,
            column: 55
          }
        },
        '19': {
          start: {
            line: 122,
            column: 19
          },
          end: {
            line: 122,
            column: 64
          }
        },
        '20': {
          start: {
            line: 124,
            column: 2
          },
          end: {
            line: 129,
            column: 3
          }
        },
        '21': {
          start: {
            line: 125,
            column: 18
          },
          end: {
            line: 125,
            column: 37
          }
        },
        '22': {
          start: {
            line: 128,
            column: 4
          },
          end: {
            line: 128,
            column: 79
          }
        },
        '23': {
          start: {
            line: 131,
            column: 2
          },
          end: {
            line: 131,
            column: 18
          }
        }
      },
      fnMap: {
        '0': {
          name: '(anonymous_0)',
          decl: {
            start: {
              line: 87,
              column: 26
            },
            end: {
              line: 87,
              column: 27
            }
          },
          loc: {
            start: {
              line: 87,
              column: 42
            },
            end: {
              line: 101,
              column: 1
            }
          },
          line: 87
        },
        '1': {
          name: '(anonymous_1)',
          decl: {
            start: {
              line: 87,
              column: 42
            },
            end: {
              line: 87,
              column: 43
            }
          },
          loc: {
            start: {
              line: 87,
              column: 61
            },
            end: {
              line: 101,
              column: 1
            }
          },
          line: 87
        },
        '2': {
          name: '(anonymous_2)',
          decl: {
            start: {
              line: 113,
              column: 31
            },
            end: {
              line: 113,
              column: 32
            }
          },
          loc: {
            start: {
              line: 113,
              column: 47
            },
            end: {
              line: 132,
              column: 1
            }
          },
          line: 113
        }
      },
      branchMap: {
        '0': {
          loc: {
            start: {
              line: 19,
              column: 6
            },
            end: {
              line: 19,
              column: 19
            }
          },
          type: 'default-arg',
          locations: [{
            start: {
              line: 19,
              column: 18
            },
            end: {
              line: 19,
              column: 19
            }
          }],
          line: 19
        },
        '1': {
          loc: {
            start: {
              line: 42,
              column: 6
            },
            end: {
              line: 42,
              column: 19
            }
          },
          type: 'default-arg',
          locations: [{
            start: {
              line: 42,
              column: 18
            },
            end: {
              line: 42,
              column: 19
            }
          }],
          line: 42
        },
        '2': {
          loc: {
            start: {
              line: 44,
              column: 6
            },
            end: {
              line: 44,
              column: 15
            }
          },
          type: 'default-arg',
          locations: [{
            start: {
              line: 44,
              column: 14
            },
            end: {
              line: 44,
              column: 15
            }
          }],
          line: 44
        },
        '3': {
          loc: {
            start: {
              line: 45,
              column: 6
            },
            end: {
              line: 45,
              column: 29
            }
          },
          type: 'default-arg',
          locations: [{
            start: {
              line: 45,
              column: 28
            },
            end: {
              line: 45,
              column: 29
            }
          }],
          line: 45
        },
        '4': {
          loc: {
            start: {
              line: 46,
              column: 6
            },
            end: {
              line: 46,
              column: 37
            }
          },
          type: 'default-arg',
          locations: [{
            start: {
              line: 46,
              column: 29
            },
            end: {
              line: 46,
              column: 37
            }
          }],
          line: 46
        },
        '5': {
          loc: {
            start: {
              line: 90,
              column: 4
            },
            end: {
              line: 90,
              column: 17
            }
          },
          type: 'default-arg',
          locations: [{
            start: {
              line: 90,
              column: 16
            },
            end: {
              line: 90,
              column: 17
            }
          }],
          line: 90
        },
        '6': {
          loc: {
            start: {
              line: 92,
              column: 4
            },
            end: {
              line: 92,
              column: 19
            }
          },
          type: 'default-arg',
          locations: [{
            start: {
              line: 92,
              column: 18
            },
            end: {
              line: 92,
              column: 19
            }
          }],
          line: 92
        },
        '7': {
          loc: {
            start: {
              line: 115,
              column: 4
            },
            end: {
              line: 115,
              column: 19
            }
          },
          type: 'default-arg',
          locations: [{
            start: {
              line: 115,
              column: 11
            },
            end: {
              line: 115,
              column: 19
            }
          }],
          line: 115
        },
        '8': {
          loc: {
            start: {
              line: 117,
              column: 4
            },
            end: {
              line: 117,
              column: 17
            }
          },
          type: 'default-arg',
          locations: [{
            start: {
              line: 117,
              column: 16
            },
            end: {
              line: 117,
              column: 17
            }
          }],
          line: 117
        },
        '9': {
          loc: {
            start: {
              line: 124,
              column: 2
            },
            end: {
              line: 129,
              column: 3
            }
          },
          type: 'if',
          locations: [{
            start: {
              line: 124,
              column: 2
            },
            end: {
              line: 129,
              column: 3
            }
          }, {
            start: {
              line: 124,
              column: 2
            },
            end: {
              line: 129,
              column: 3
            }
          }],
          line: 124
        }
      },
      s: {
        '0': 0,
        '1': 0,
        '2': 0,
        '3': 0,
        '4': 0,
        '5': 0,
        '6': 0,
        '7': 0,
        '8': 0,
        '9': 0,
        '10': 0,
        '11': 0,
        '12': 0,
        '13': 0,
        '14': 0,
        '15': 0,
        '16': 0,
        '17': 0,
        '18': 0,
        '19': 0,
        '20': 0,
        '21': 0,
        '22': 0,
        '23': 0
      },
      f: {
        '0': 0,
        '1': 0,
        '2': 0
      },
      b: {
        '0': [0],
        '1': [0],
        '2': [0],
        '3': [0],
        '4': [0],
        '5': [0],
        '6': [0],
        '7': [0],
        '8': [0],
        '9': [0, 0]
      },
      _coverageSchema: '332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'
    },
        coverage = global[gcv] || (global[gcv] = {});

    if (coverage[path] && coverage[path].hash === hash) {
      return coverage[path];
    }

    coverageData.hash = hash;
    return coverage[path] = coverageData;
  }();
  var segmentRange = (cov_270ru1kouy.s[0]++, {
    static: function _static(attributes) {
      var _ref = (cov_270ru1kouy.s[1]++, attributes),
          duration = _ref.duration,
          _ref$timescale = _ref.timescale,
          timescale = _ref$timescale === void 0 ? (cov_270ru1kouy.b[0][0]++, 1) : _ref$timescale,
          sourceDuration = _ref.sourceDuration;

      cov_270ru1kouy.s[2]++;
      return {
        start: 0,
        end: Math.ceil(sourceDuration / (duration / timescale))
      };
    },
    dynamic: function dynamic(attributes) {
      var _ref2 = (cov_270ru1kouy.s[3]++, attributes),
          NOW = _ref2.NOW,
          clientOffset = _ref2.clientOffset,
          availabilityStartTime = _ref2.availabilityStartTime,
          _ref2$timescale = _ref2.timescale,
          timescale = _ref2$timescale === void 0 ? (cov_270ru1kouy.b[1][0]++, 1) : _ref2$timescale,
          duration = _ref2.duration,
          _ref2$start = _ref2.start,
          start = _ref2$start === void 0 ? (cov_270ru1kouy.b[2][0]++, 0) : _ref2$start,
          _ref2$minimumUpdatePe = _ref2.minimumUpdatePeriod,
          minimumUpdatePeriod = _ref2$minimumUpdatePe === void 0 ? (cov_270ru1kouy.b[3][0]++, 0) : _ref2$minimumUpdatePe,
          _ref2$timeShiftBuffer = _ref2.timeShiftBufferDepth,
          timeShiftBufferDepth = _ref2$timeShiftBuffer === void 0 ? (cov_270ru1kouy.b[4][0]++, Infinity) : _ref2$timeShiftBuffer;

      var now = (cov_270ru1kouy.s[4]++, (NOW + clientOffset) / 1000);
      var periodStartWC = (cov_270ru1kouy.s[5]++, availabilityStartTime + start);
      var periodEndWC = (cov_270ru1kouy.s[6]++, now + minimumUpdatePeriod);
      var periodDuration = (cov_270ru1kouy.s[7]++, periodEndWC - periodStartWC);
      var segmentCount = (cov_270ru1kouy.s[8]++, Math.ceil(periodDuration * timescale / duration));
      var availableStart = (cov_270ru1kouy.s[9]++, Math.floor((now - periodStartWC - timeShiftBufferDepth) * timescale / duration));
      var availableEnd = (cov_270ru1kouy.s[10]++, Math.floor((now - periodStartWC) * timescale / duration));
      cov_270ru1kouy.s[11]++;
      return {
        start: Math.max(0, availableStart),
        end: Math.min(segmentCount, availableEnd)
      };
    }
  });
  cov_270ru1kouy.s[12]++;
  var toSegments = function toSegments(attributes) {
    cov_270ru1kouy.f[0]++;
    cov_270ru1kouy.s[13]++;
    return function (number, index) {
      cov_270ru1kouy.f[1]++;

      var _ref3 = (cov_270ru1kouy.s[14]++, attributes),
          duration = _ref3.duration,
          _ref3$timescale = _ref3.timescale,
          timescale = _ref3$timescale === void 0 ? (cov_270ru1kouy.b[5][0]++, 1) : _ref3$timescale,
          periodIndex = _ref3.periodIndex,
          _ref3$startNumber = _ref3.startNumber,
          startNumber = _ref3$startNumber === void 0 ? (cov_270ru1kouy.b[6][0]++, 1) : _ref3$startNumber;

      cov_270ru1kouy.s[15]++;
      return {
        number: startNumber + number,
        duration: duration / timescale,
        timeline: periodIndex,
        time: index * duration
      };
    };
  };
  cov_270ru1kouy.s[16]++;
  var parseByDuration = function parseByDuration(attributes) {
    cov_270ru1kouy.f[2]++;

    var _ref4 = (cov_270ru1kouy.s[17]++, attributes),
        _ref4$type = _ref4.type,
        type = _ref4$type === void 0 ? (cov_270ru1kouy.b[7][0]++, 'static') : _ref4$type,
        duration = _ref4.duration,
        _ref4$timescale = _ref4.timescale,
        timescale = _ref4$timescale === void 0 ? (cov_270ru1kouy.b[8][0]++, 1) : _ref4$timescale,
        sourceDuration = _ref4.sourceDuration;

    var _ref5 = (cov_270ru1kouy.s[18]++, segmentRange[type](attributes)),
        start = _ref5.start,
        end = _ref5.end;

    var segments = (cov_270ru1kouy.s[19]++, range(start, end).map(toSegments(attributes)));
    cov_270ru1kouy.s[20]++;

    if (type === 'static') {
      cov_270ru1kouy.b[9][0]++;
      var index = (cov_270ru1kouy.s[21]++, segments.length - 1);
      cov_270ru1kouy.s[22]++;
      segments[index].duration = sourceDuration - duration / timescale * index;
    } else {
      cov_270ru1kouy.b[9][1]++;
    }

    cov_270ru1kouy.s[23]++;
    return segments;
  };

  var cov_133tlb3jo0 = function () {
    var path = '/Users/gkatsevman/p/mpd-parser/src/segment/segmentBase.js',
        hash = '8e89e31b417567d8bf0e9cd156bdb885585b48d3',
        Function = function () {}.constructor,
        global = new Function('return this')(),
        gcv = '__coverage__',
        coverageData = {
      path: '/Users/gkatsevman/p/mpd-parser/src/segment/segmentBase.js',
      statementMap: {
        '0': {
          start: {
            line: 15,
            column: 32
          },
          end: {
            line: 58,
            column: 1
          }
        },
        '1': {
          start: {
            line: 23,
            column: 6
          },
          end: {
            line: 23,
            column: 16
          }
        },
        '2': {
          start: {
            line: 26,
            column: 2
          },
          end: {
            line: 28,
            column: 3
          }
        },
        '3': {
          start: {
            line: 27,
            column: 4
          },
          end: {
            line: 27,
            column: 40
          }
        },
        '4': {
          start: {
            line: 30,
            column: 22
          },
          end: {
            line: 34,
            column: 4
          }
        },
        '5': {
          start: {
            line: 36,
            column: 18
          },
          end: {
            line: 36,
            column: 76
          }
        },
        '6': {
          start: {
            line: 38,
            column: 2
          },
          end: {
            line: 38,
            column: 28
          }
        },
        '7': {
          start: {
            line: 42,
            column: 2
          },
          end: {
            line: 52,
            column: 3
          }
        },
        '8': {
          start: {
            line: 43,
            column: 28
          },
          end: {
            line: 43,
            column: 55
          }
        },
        '9': {
          start: {
            line: 45,
            column: 4
          },
          end: {
            line: 48,
            column: 5
          }
        },
        '10': {
          start: {
            line: 46,
            column: 6
          },
          end: {
            line: 46,
            column: 53
          }
        },
        '11': {
          start: {
            line: 47,
            column: 6
          },
          end: {
            line: 47,
            column: 53
          }
        },
        '12': {
          start: {
            line: 49,
            column: 9
          },
          end: {
            line: 52,
            column: 3
          }
        },
        '13': {
          start: {
            line: 50,
            column: 4
          },
          end: {
            line: 50,
            column: 52
          }
        },
        '14': {
          start: {
            line: 51,
            column: 4
          },
          end: {
            line: 51,
            column: 25
          }
        },
        '15': {
          start: {
            line: 55,
            column: 2
          },
          end: {
            line: 55,
            column: 21
          }
        },
        '16': {
          start: {
            line: 57,
            column: 2
          },
          end: {
            line: 57,
            column: 19
          }
        },
        '17': {
          start: {
            line: 71,
            column: 37
          },
          end: {
            line: 124,
            column: 1
          }
        },
        '18': {
          start: {
            line: 73,
            column: 22
          },
          end: {
            line: 73,
            column: 66
          }
        },
        '19': {
          start: {
            line: 75,
            column: 25
          },
          end: {
            line: 75,
            column: 47
          }
        },
        '20': {
          start: {
            line: 77,
            column: 19
          },
          end: {
            line: 77,
            column: 41
          }
        },
        '21': {
          start: {
            line: 78,
            column: 24
          },
          end: {
            line: 78,
            column: 47
          }
        },
        '22': {
          start: {
            line: 79,
            column: 18
          },
          end: {
            line: 79,
            column: 61
          }
        },
        '23': {
          start: {
            line: 81,
            column: 20
          },
          end: {
            line: 81,
            column: 34
          }
        },
        '24': {
          start: {
            line: 83,
            column: 26
          },
          end: {
            line: 83,
            column: 76
          }
        },
        '25': {
          start: {
            line: 83,
            column: 54
          },
          end: {
            line: 83,
            column: 75
          }
        },
        '26': {
          start: {
            line: 84,
            column: 19
          },
          end: {
            line: 84,
            column: 21
          }
        },
        '27': {
          start: {
            line: 87,
            column: 19
          },
          end: {
            line: 87,
            column: 45
          }
        },
        '28': {
          start: {
            line: 89,
            column: 2
          },
          end: {
            line: 119,
            column: 3
          }
        },
        '29': {
          start: {
            line: 90,
            column: 22
          },
          end: {
            line: 90,
            column: 40
          }
        },
        '30': {
          start: {
            line: 92,
            column: 17
          },
          end: {
            line: 92,
            column: 41
          }
        },
        '31': {
          start: {
            line: 95,
            column: 21
          },
          end: {
            line: 95,
            column: 49
          }
        },
        '32': {
          start: {
            line: 97,
            column: 21
          },
          end: {
            line: 97,
            column: 42
          }
        },
        '33': {
          start: {
            line: 98,
            column: 23
          },
          end: {
            line: 98,
            column: 50
          }
        },
        '34': {
          start: {
            line: 100,
            column: 23
          },
          end: {
            line: 109,
            column: 5
          }
        },
        '35': {
          start: {
            line: 111,
            column: 20
          },
          end: {
            line: 111,
            column: 51
          }
        },
        '36': {
          start: {
            line: 113,
            column: 4
          },
          end: {
            line: 115,
            column: 5
          }
        },
        '37': {
          start: {
            line: 114,
            column: 6
          },
          end: {
            line: 114,
            column: 32
          }
        },
        '38': {
          start: {
            line: 117,
            column: 4
          },
          end: {
            line: 117,
            column: 27
          }
        },
        '39': {
          start: {
            line: 118,
            column: 4
          },
          end: {
            line: 118,
            column: 23
          }
        },
        '40': {
          start: {
            line: 121,
            column: 2
          },
          end: {
            line: 121,
            column: 31
          }
        },
        '41': {
          start: {
            line: 123,
            column: 2
          },
          end: {
            line: 123,
            column: 18
          }
        }
      },
      fnMap: {
        '0': {
          name: '(anonymous_0)',
          decl: {
            start: {
              line: 15,
              column: 32
            },
            end: {
              line: 15,
              column: 33
            }
          },
          loc: {
            start: {
              line: 15,
              column: 48
            },
            end: {
              line: 58,
              column: 1
            }
          },
          line: 15
        },
        '1': {
          name: '(anonymous_1)',
          decl: {
            start: {
              line: 71,
              column: 37
            },
            end: {
              line: 71,
              column: 38
            }
          },
          loc: {
            start: {
              line: 71,
              column: 66
            },
            end: {
              line: 124,
              column: 1
            }
          },
          line: 71
        },
        '2': {
          name: '(anonymous_2)',
          decl: {
            start: {
              line: 83,
              column: 49
            },
            end: {
              line: 83,
              column: 50
            }
          },
          loc: {
            start: {
              line: 83,
              column: 54
            },
            end: {
              line: 83,
              column: 75
            }
          },
          line: 83
        }
      },
      branchMap: {
        '0': {
          loc: {
            start: {
              line: 18,
              column: 4
            },
            end: {
              line: 18,
              column: 23
            }
          },
          type: 'default-arg',
          locations: [{
            start: {
              line: 18,
              column: 21
            },
            end: {
              line: 18,
              column: 23
            }
          }],
          line: 18
        },
        '1': {
          loc: {
            start: {
              line: 20,
              column: 4
            },
            end: {
              line: 20,
              column: 17
            }
          },
          type: 'default-arg',
          locations: [{
            start: {
              line: 20,
              column: 16
            },
            end: {
              line: 20,
              column: 17
            }
          }],
          line: 20
        },
        '2': {
          loc: {
            start: {
              line: 21,
              column: 4
            },
            end: {
              line: 21,
              column: 19
            }
          },
          type: 'default-arg',
          locations: [{
            start: {
              line: 21,
              column: 17
            },
            end: {
              line: 21,
              column: 19
            }
          }],
          line: 21
        },
        '3': {
          loc: {
            start: {
              line: 26,
              column: 2
            },
            end: {
              line: 28,
              column: 3
            }
          },
          type: 'if',
          locations: [{
            start: {
              line: 26,
              column: 2
            },
            end: {
              line: 28,
              column: 3
            }
          }, {
            start: {
              line: 26,
              column: 2
            },
            end: {
              line: 28,
              column: 3
            }
          }],
          line: 26
        },
        '4': {
          loc: {
            start: {
              line: 42,
              column: 2
            },
            end: {
              line: 52,
              column: 3
            }
          },
          type: 'if',
          locations: [{
            start: {
              line: 42,
              column: 2
            },
            end: {
              line: 52,
              column: 3
            }
          }, {
            start: {
              line: 42,
              column: 2
            },
            end: {
              line: 52,
              column: 3
            }
          }],
          line: 42
        },
        '5': {
          loc: {
            start: {
              line: 45,
              column: 4
            },
            end: {
              line: 48,
              column: 5
            }
          },
          type: 'if',
          locations: [{
            start: {
              line: 45,
              column: 4
            },
            end: {
              line: 48,
              column: 5
            }
          }, {
            start: {
              line: 45,
              column: 4
            },
            end: {
              line: 48,
              column: 5
            }
          }],
          line: 45
        },
        '6': {
          loc: {
            start: {
              line: 49,
              column: 9
            },
            end: {
              line: 52,
              column: 3
            }
          },
          type: 'if',
          locations: [{
            start: {
              line: 49,
              column: 9
            },
            end: {
              line: 52,
              column: 3
            }
          }, {
            start: {
              line: 49,
              column: 9
            },
            end: {
              line: 52,
              column: 3
            }
          }],
          line: 49
        },
        '7': {
          loc: {
            start: {
              line: 73,
              column: 22
            },
            end: {
              line: 73,
              column: 66
            }
          },
          type: 'cond-expr',
          locations: [{
            start: {
              line: 73,
              column: 42
            },
            end: {
              line: 73,
              column: 59
            }
          }, {
            start: {
              line: 73,
              column: 62
            },
            end: {
              line: 73,
              column: 66
            }
          }],
          line: 73
        },
        '8': {
          loc: {
            start: {
              line: 77,
              column: 19
            },
            end: {
              line: 77,
              column: 41
            }
          },
          type: 'binary-expr',
          locations: [{
            start: {
              line: 77,
              column: 19
            },
            end: {
              line: 77,
              column: 36
            }
          }, {
            start: {
              line: 77,
              column: 40
            },
            end: {
              line: 77,
              column: 41
            }
          }],
          line: 77
        },
        '9': {
          loc: {
            start: {
              line: 113,
              column: 4
            },
            end: {
              line: 115,
              column: 5
            }
          },
          type: 'if',
          locations: [{
            start: {
              line: 113,
              column: 4
            },
            end: {
              line: 115,
              column: 5
            }
          }, {
            start: {
              line: 113,
              column: 4
            },
            end: {
              line: 115,
              column: 5
            }
          }],
          line: 113
        }
      },
      s: {
        '0': 0,
        '1': 0,
        '2': 0,
        '3': 0,
        '4': 0,
        '5': 0,
        '6': 0,
        '7': 0,
        '8': 0,
        '9': 0,
        '10': 0,
        '11': 0,
        '12': 0,
        '13': 0,
        '14': 0,
        '15': 0,
        '16': 0,
        '17': 0,
        '18': 0,
        '19': 0,
        '20': 0,
        '21': 0,
        '22': 0,
        '23': 0,
        '24': 0,
        '25': 0,
        '26': 0,
        '27': 0,
        '28': 0,
        '29': 0,
        '30': 0,
        '31': 0,
        '32': 0,
        '33': 0,
        '34': 0,
        '35': 0,
        '36': 0,
        '37': 0,
        '38': 0,
        '39': 0,
        '40': 0,
        '41': 0
      },
      f: {
        '0': 0,
        '1': 0,
        '2': 0
      },
      b: {
        '0': [0],
        '1': [0],
        '2': [0],
        '3': [0, 0],
        '4': [0, 0],
        '5': [0, 0],
        '6': [0, 0],
        '7': [0, 0],
        '8': [0, 0],
        '9': [0, 0]
      },
      _coverageSchema: '332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'
    },
        coverage = global[gcv] || (global[gcv] = {});

    if (coverage[path] && coverage[path].hash === hash) {
      return coverage[path];
    }

    coverageData.hash = hash;
    return coverage[path] = coverageData;
  }();
  cov_133tlb3jo0.s[0]++;
  var segmentsFromBase = function segmentsFromBase(attributes) {
    cov_133tlb3jo0.f[0]++;

    var _ref = (cov_133tlb3jo0.s[1]++, attributes),
        baseUrl = _ref.baseUrl,
        _ref$initialization = _ref.initialization,
        initialization = _ref$initialization === void 0 ? (cov_133tlb3jo0.b[0][0]++, {}) : _ref$initialization,
        sourceDuration = _ref.sourceDuration,
        _ref$timescale = _ref.timescale,
        timescale = _ref$timescale === void 0 ? (cov_133tlb3jo0.b[1][0]++, 1) : _ref$timescale,
        _ref$indexRange = _ref.indexRange,
        indexRange = _ref$indexRange === void 0 ? (cov_133tlb3jo0.b[2][0]++, '') : _ref$indexRange,
        duration = _ref.duration;

    cov_133tlb3jo0.s[2]++;

    if (!baseUrl) {
      cov_133tlb3jo0.b[3][0]++;
      cov_133tlb3jo0.s[3]++;
      throw new Error(errors.NO_BASE_URL);
    } else {
      cov_133tlb3jo0.b[3][1]++;
    }

    var initSegment = (cov_133tlb3jo0.s[4]++, urlTypeToSegment({
      baseUrl: baseUrl,
      source: initialization.sourceURL,
      range: initialization.range
    }));
    var segment = (cov_133tlb3jo0.s[5]++, urlTypeToSegment({
      baseUrl: baseUrl,
      source: baseUrl,
      indexRange: indexRange
    }));
    cov_133tlb3jo0.s[6]++;
    segment.map = initSegment;
    cov_133tlb3jo0.s[7]++;

    if (duration) {
      cov_133tlb3jo0.b[4][0]++;
      var segmentTimeInfo = (cov_133tlb3jo0.s[8]++, parseByDuration(attributes));
      cov_133tlb3jo0.s[9]++;

      if (segmentTimeInfo.length) {
        cov_133tlb3jo0.b[5][0]++;
        cov_133tlb3jo0.s[10]++;
        segment.duration = segmentTimeInfo[0].duration;
        cov_133tlb3jo0.s[11]++;
        segment.timeline = segmentTimeInfo[0].timeline;
      } else {
        cov_133tlb3jo0.b[5][1]++;
      }
    } else {
      cov_133tlb3jo0.b[4][1]++;
      cov_133tlb3jo0.s[12]++;

      if (sourceDuration) {
        cov_133tlb3jo0.b[6][0]++;
        cov_133tlb3jo0.s[13]++;
        segment.duration = sourceDuration / timescale;
        cov_133tlb3jo0.s[14]++;
        segment.timeline = 0;
      } else {
        cov_133tlb3jo0.b[6][1]++;
      }
    }

    cov_133tlb3jo0.s[15]++;
    segment.number = 0;
    cov_133tlb3jo0.s[16]++;
    return [segment];
  };
  cov_133tlb3jo0.s[17]++;
  var addSegmentsToPlaylist = function addSegmentsToPlaylist(playlist, sidx, baseUrl) {
    cov_133tlb3jo0.f[1]++;
    var initSegment = (cov_133tlb3jo0.s[18]++, playlist.sidx.map ? (cov_133tlb3jo0.b[7][0]++, playlist.sidx.map) : (cov_133tlb3jo0.b[7][1]++, null));
    var sourceDuration = (cov_133tlb3jo0.s[19]++, playlist.sidx.duration);
    var timeline = (cov_133tlb3jo0.s[20]++, (cov_133tlb3jo0.b[8][0]++, playlist.timeline) || (cov_133tlb3jo0.b[8][1]++, 0));
    var sidxByteRange = (cov_133tlb3jo0.s[21]++, playlist.sidx.byterange);
    var sidxEnd = (cov_133tlb3jo0.s[22]++, sidxByteRange.offset + sidxByteRange.length);
    var timescale = (cov_133tlb3jo0.s[23]++, sidx.timescale);
    var mediaReferences = (cov_133tlb3jo0.s[24]++, sidx.references.filter(function (r) {
      cov_133tlb3jo0.f[2]++;
      cov_133tlb3jo0.s[25]++;
      return r.referenceType !== 1;
    }));
    var segments = (cov_133tlb3jo0.s[26]++, []);
    var startIndex = (cov_133tlb3jo0.s[27]++, sidxEnd + sidx.firstOffset);
    cov_133tlb3jo0.s[28]++;

    for (var i = 0; i < mediaReferences.length; i++) {
      var reference = (cov_133tlb3jo0.s[29]++, sidx.references[i]);
      var size = (cov_133tlb3jo0.s[30]++, reference.referencedSize);
      var duration = (cov_133tlb3jo0.s[31]++, reference.subsegmentDuration);
      var endIndex = (cov_133tlb3jo0.s[32]++, startIndex + size - 1);
      var indexRange = (cov_133tlb3jo0.s[33]++, startIndex + "-" + endIndex);
      var attributes = (cov_133tlb3jo0.s[34]++, {
        baseUrl: baseUrl,
        timescale: timescale,
        timeline: timeline,
        periodIndex: timeline,
        duration: duration,
        sourceDuration: sourceDuration,
        indexRange: indexRange
      });
      var segment = (cov_133tlb3jo0.s[35]++, segmentsFromBase(attributes)[0]);
      cov_133tlb3jo0.s[36]++;

      if (initSegment) {
        cov_133tlb3jo0.b[9][0]++;
        cov_133tlb3jo0.s[37]++;
        segment.map = initSegment;
      } else {
        cov_133tlb3jo0.b[9][1]++;
      }

      cov_133tlb3jo0.s[38]++;
      segments.push(segment);
      cov_133tlb3jo0.s[39]++;
      startIndex += size;
    }

    cov_133tlb3jo0.s[40]++;
    playlist.segments = segments;
    cov_133tlb3jo0.s[41]++;
    return playlist;
  };

  var cov_qa6wliqs3 = function () {
    var path = '/Users/gkatsevman/p/mpd-parser/src/toM3u8.js',
        hash = '01af22849dad494c23f0e25859d184fcf5c6235d',
        Function = function () {}.constructor,
        global = new Function('return this')(),
        gcv = '__coverage__',
        coverageData = {
      path: '/Users/gkatsevman/p/mpd-parser/src/toM3u8.js',
      statementMap: {
        '0': {
          start: {
            line: 6,
            column: 36
          },
          end: {
            line: 41,
            column: 1
          }
        },
        '1': {
          start: {
            line: 7,
            column: 26
          },
          end: {
            line: 33,
            column: 9
          }
        },
        '2': {
          start: {
            line: 11,
            column: 17
          },
          end: {
            line: 11,
            column: 74
          }
        },
        '3': {
          start: {
            line: 14,
            column: 4
          },
          end: {
            line: 30,
            column: 5
          }
        },
        '4': {
          start: {
            line: 16,
            column: 6
          },
          end: {
            line: 18,
            column: 7
          }
        },
        '5': {
          start: {
            line: 17,
            column: 8
          },
          end: {
            line: 17,
            column: 50
          }
        },
        '6': {
          start: {
            line: 19,
            column: 6
          },
          end: {
            line: 19,
            column: 52
          }
        },
        '7': {
          start: {
            line: 23,
            column: 6
          },
          end: {
            line: 26,
            column: 7
          }
        },
        '8': {
          start: {
            line: 24,
            column: 8
          },
          end: {
            line: 25,
            column: 48
          }
        },
        '9': {
          start: {
            line: 29,
            column: 6
          },
          end: {
            line: 29,
            column: 27
          }
        },
        '10': {
          start: {
            line: 32,
            column: 4
          },
          end: {
            line: 32,
            column: 15
          }
        },
        '11': {
          start: {
            line: 35,
            column: 2
          },
          end: {
            line: 40,
            column: 5
          }
        },
        '12': {
          start: {
            line: 36,
            column: 4
          },
          end: {
            line: 37,
            column: 56
          }
        },
        '13': {
          start: {
            line: 39,
            column: 4
          },
          end: {
            line: 39,
            column: 20
          }
        },
        '14': {
          start: {
            line: 43,
            column: 31
          },
          end: {
            line: 65,
            column: 1
          }
        },
        '15': {
          start: {
            line: 44,
            column: 2
          },
          end: {
            line: 46,
            column: 3
          }
        },
        '16': {
          start: {
            line: 45,
            column: 4
          },
          end: {
            line: 45,
            column: 21
          }
        },
        '17': {
          start: {
            line: 48,
            column: 2
          },
          end: {
            line: 62,
            column: 3
          }
        },
        '18': {
          start: {
            line: 49,
            column: 21
          },
          end: {
            line: 49,
            column: 33
          }
        },
        '19': {
          start: {
            line: 51,
            column: 4
          },
          end: {
            line: 53,
            column: 5
          }
        },
        '20': {
          start: {
            line: 52,
            column: 6
          },
          end: {
            line: 52,
            column: 15
          }
        },
        '21': {
          start: {
            line: 55,
            column: 20
          },
          end: {
            line: 56,
            column: 48
          }
        },
        '22': {
          start: {
            line: 57,
            column: 22
          },
          end: {
            line: 57,
            column: 71
          }
        },
        '23': {
          start: {
            line: 59,
            column: 4
          },
          end: {
            line: 61,
            column: 5
          }
        },
        '24': {
          start: {
            line: 60,
            column: 6
          },
          end: {
            line: 60,
            column: 76
          }
        },
        '25': {
          start: {
            line: 64,
            column: 2
          },
          end: {
            line: 64,
            column: 19
          }
        },
        '26': {
          start: {
            line: 67,
            column: 35
          },
          end: {
            line: 93,
            column: 1
          }
        },
        '27': {
          start: {
            line: 68,
            column: 19
          },
          end: {
            line: 82,
            column: 3
          }
        },
        '28': {
          start: {
            line: 84,
            column: 2
          },
          end: {
            line: 86,
            column: 3
          }
        },
        '29': {
          start: {
            line: 85,
            column: 4
          },
          end: {
            line: 85,
            column: 62
          }
        },
        '30': {
          start: {
            line: 88,
            column: 2
          },
          end: {
            line: 90,
            column: 3
          }
        },
        '31': {
          start: {
            line: 89,
            column: 4
          },
          end: {
            line: 89,
            column: 25
          }
        },
        '32': {
          start: {
            line: 92,
            column: 2
          },
          end: {
            line: 92,
            column: 18
          }
        },
        '33': {
          start: {
            line: 95,
            column: 33
          },
          end: {
            line: 122,
            column: 1
          }
        },
        '34': {
          start: {
            line: 96,
            column: 2
          },
          end: {
            line: 107,
            column: 3
          }
        },
        '35': {
          start: {
            line: 98,
            column: 4
          },
          end: {
            line: 104,
            column: 7
          }
        },
        '36': {
          start: {
            line: 106,
            column: 4
          },
          end: {
            line: 106,
            column: 52
          }
        },
        '37': {
          start: {
            line: 108,
            column: 2
          },
          end: {
            line: 121,
            column: 4
          }
        },
        '38': {
          start: {
            line: 124,
            column: 38
          },
          end: {
            line: 174,
            column: 1
          }
        },
        '39': {
          start: {
            line: 127,
            column: 29
          },
          end: {
            line: 164,
            column: 8
          }
        },
        '40': {
          start: {
            line: 128,
            column: 17
          },
          end: {
            line: 129,
            column: 42
          }
        },
        '41': {
          start: {
            line: 130,
            column: 21
          },
          end: {
            line: 130,
            column: 51
          }
        },
        '42': {
          start: {
            line: 132,
            column: 16
          },
          end: {
            line: 132,
            column: 22
          }
        },
        '43': {
          start: {
            line: 134,
            column: 4
          },
          end: {
            line: 138,
            column: 5
          }
        },
        '44': {
          start: {
            line: 135,
            column: 24
          },
          end: {
            line: 135,
            column: 48
          }
        },
        '45': {
          start: {
            line: 137,
            column: 6
          },
          end: {
            line: 137,
            column: 56
          }
        },
        '46': {
          start: {
            line: 141,
            column: 4
          },
          end: {
            line: 145,
            column: 5
          }
        },
        '47': {
          start: {
            line: 144,
            column: 6
          },
          end: {
            line: 144,
            column: 15
          }
        },
        '48': {
          start: {
            line: 147,
            column: 4
          },
          end: {
            line: 156,
            column: 6
          }
        },
        '49': {
          start: {
            line: 158,
            column: 4
          },
          end: {
            line: 161,
            column: 5
          }
        },
        '50': {
          start: {
            line: 159,
            column: 6
          },
          end: {
            line: 159,
            column: 30
          }
        },
        '51': {
          start: {
            line: 160,
            column: 6
          },
          end: {
            line: 160,
            column: 34
          }
        },
        '52': {
          start: {
            line: 163,
            column: 4
          },
          end: {
            line: 163,
            column: 13
          }
        },
        '53': {
          start: {
            line: 167,
            column: 2
          },
          end: {
            line: 171,
            column: 3
          }
        },
        '54': {
          start: {
            line: 168,
            column: 23
          },
          end: {
            line: 168,
            column: 57
          }
        },
        '55': {
          start: {
            line: 170,
            column: 4
          },
          end: {
            line: 170,
            column: 50
          }
        },
        '56': {
          start: {
            line: 173,
            column: 2
          },
          end: {
            line: 173,
            column: 28
          }
        },
        '57': {
          start: {
            line: 176,
            column: 36
          },
          end: {
            line: 198,
            column: 1
          }
        },
        '58': {
          start: {
            line: 177,
            column: 2
          },
          end: {
            line: 197,
            column: 9
          }
        },
        '59': {
          start: {
            line: 178,
            column: 18
          },
          end: {
            line: 178,
            column: 52
          }
        },
        '60': {
          start: {
            line: 181,
            column: 4
          },
          end: {
            line: 183,
            column: 5
          }
        },
        '61': {
          start: {
            line: 182,
            column: 6
          },
          end: {
            line: 182,
            column: 15
          }
        },
        '62': {
          start: {
            line: 185,
            column: 4
          },
          end: {
            line: 194,
            column: 6
          }
        },
        '63': {
          start: {
            line: 196,
            column: 4
          },
          end: {
            line: 196,
            column: 13
          }
        },
        '64': {
          start: {
            line: 200,
            column: 35
          },
          end: {
            line: 232,
            column: 1
          }
        },
        '65': {
          start: {
            line: 201,
            column: 19
          },
          end: {
            line: 221,
            column: 3
          }
        },
        '66': {
          start: {
            line: 223,
            column: 2
          },
          end: {
            line: 225,
            column: 3
          }
        },
        '67': {
          start: {
            line: 224,
            column: 4
          },
          end: {
            line: 224,
            column: 62
          }
        },
        '68': {
          start: {
            line: 227,
            column: 2
          },
          end: {
            line: 229,
            column: 3
          }
        },
        '69': {
          start: {
            line: 228,
            column: 4
          },
          end: {
            line: 228,
            column: 25
          }
        },
        '70': {
          start: {
            line: 231,
            column: 2
          },
          end: {
            line: 231,
            column: 18
          }
        },
        '71': {
          start: {
            line: 234,
            column: 22
          },
          end: {
            line: 284,
            column: 1
          }
        },
        '72': {
          start: {
            line: 235,
            column: 2
          },
          end: {
            line: 237,
            column: 3
          }
        },
        '73': {
          start: {
            line: 236,
            column: 4
          },
          end: {
            line: 236,
            column: 14
          }
        },
        '74': {
          start: {
            line: 243,
            column: 6
          },
          end: {
            line: 243,
            column: 33
          }
        },
        '75': {
          start: {
            line: 245,
            column: 20
          },
          end: {
            line: 246,
            column: 77
          }
        },
        '76': {
          start: {
            line: 246,
            column: 4
          },
          end: {
            line: 246,
            column: 77
          }
        },
        '77': {
          start: {
            line: 247,
            column: 20
          },
          end: {
            line: 248,
            column: 77
          }
        },
        '78': {
          start: {
            line: 248,
            column: 4
          },
          end: {
            line: 248,
            column: 77
          }
        },
        '79': {
          start: {
            line: 249,
            column: 18
          },
          end: {
            line: 250,
            column: 75
          }
        },
        '80': {
          start: {
            line: 250,
            column: 4
          },
          end: {
            line: 250,
            column: 75
          }
        },
        '81': {
          start: {
            line: 252,
            column: 25
          },
          end: {
            line: 254,
            column: 28
          }
        },
        '82': {
          start: {
            line: 255,
            column: 25
          },
          end: {
            line: 255,
            column: 85
          }
        },
        '83': {
          start: {
            line: 256,
            column: 23
          },
          end: {
            line: 256,
            column: 52
          }
        },
        '84': {
          start: {
            line: 258,
            column: 17
          },
          end: {
            line: 273,
            column: 3
          }
        },
        '85': {
          start: {
            line: 275,
            column: 2
          },
          end: {
            line: 277,
            column: 3
          }
        },
        '86': {
          start: {
            line: 276,
            column: 4
          },
          end: {
            line: 276,
            column: 89
          }
        },
        '87': {
          start: {
            line: 279,
            column: 2
          },
          end: {
            line: 281,
            column: 3
          }
        },
        '88': {
          start: {
            line: 280,
            column: 4
          },
          end: {
            line: 280,
            column: 88
          }
        },
        '89': {
          start: {
            line: 283,
            column: 2
          },
          end: {
            line: 283,
            column: 16
          }
        }
      },
      fnMap: {
        '0': {
          name: '(anonymous_0)',
          decl: {
            start: {
              line: 6,
              column: 36
            },
            end: {
              line: 6,
              column: 37
            }
          },
          loc: {
            start: {
              line: 6,
              column: 49
            },
            end: {
              line: 41,
              column: 1
            }
          },
          line: 6
        },
        '1': {
          name: '(anonymous_1)',
          decl: {
            start: {
              line: 7,
              column: 50
            },
            end: {
              line: 7,
              column: 51
            }
          },
          loc: {
            start: {
              line: 7,
              column: 69
            },
            end: {
              line: 33,
              column: 3
            }
          },
          line: 7
        },
        '2': {
          name: '(anonymous_2)',
          decl: {
            start: {
              line: 35,
              column: 29
            },
            end: {
              line: 35,
              column: 30
            }
          },
          loc: {
            start: {
              line: 35,
              column: 41
            },
            end: {
              line: 40,
              column: 3
            }
          },
          line: 35
        },
        '3': {
          name: '(anonymous_3)',
          decl: {
            start: {
              line: 43,
              column: 31
            },
            end: {
              line: 43,
              column: 32
            }
          },
          loc: {
            start: {
              line: 43,
              column: 64
            },
            end: {
              line: 65,
              column: 1
            }
          },
          line: 43
        },
        '4': {
          name: '(anonymous_4)',
          decl: {
            start: {
              line: 67,
              column: 35
            },
            end: {
              line: 67,
              column: 36
            }
          },
          loc: {
            start: {
              line: 67,
              column: 71
            },
            end: {
              line: 93,
              column: 1
            }
          },
          line: 67
        },
        '5': {
          name: '(anonymous_5)',
          decl: {
            start: {
              line: 95,
              column: 33
            },
            end: {
              line: 95,
              column: 34
            }
          },
          loc: {
            start: {
              line: 95,
              column: 63
            },
            end: {
              line: 122,
              column: 1
            }
          },
          line: 95
        },
        '6': {
          name: '(anonymous_6)',
          decl: {
            start: {
              line: 124,
              column: 38
            },
            end: {
              line: 124,
              column: 39
            }
          },
          loc: {
            start: {
              line: 124,
              column: 71
            },
            end: {
              line: 174,
              column: 1
            }
          },
          line: 124
        },
        '7': {
          name: '(anonymous_7)',
          decl: {
            start: {
              line: 127,
              column: 46
            },
            end: {
              line: 127,
              column: 47
            }
          },
          loc: {
            start: {
              line: 127,
              column: 63
            },
            end: {
              line: 164,
              column: 3
            }
          },
          line: 127
        },
        '8': {
          name: '(anonymous_8)',
          decl: {
            start: {
              line: 176,
              column: 36
            },
            end: {
              line: 176,
              column: 37
            }
          },
          loc: {
            start: {
              line: 176,
              column: 69
            },
            end: {
              line: 198,
              column: 1
            }
          },
          line: 176
        },
        '9': {
          name: '(anonymous_9)',
          decl: {
            start: {
              line: 177,
              column: 26
            },
            end: {
              line: 177,
              column: 27
            }
          },
          loc: {
            start: {
              line: 177,
              column: 43
            },
            end: {
              line: 197,
              column: 3
            }
          },
          line: 177
        },
        '10': {
          name: '(anonymous_10)',
          decl: {
            start: {
              line: 200,
              column: 35
            },
            end: {
              line: 200,
              column: 36
            }
          },
          loc: {
            start: {
              line: 200,
              column: 71
            },
            end: {
              line: 232,
              column: 1
            }
          },
          line: 200
        },
        '11': {
          name: '(anonymous_11)',
          decl: {
            start: {
              line: 234,
              column: 22
            },
            end: {
              line: 234,
              column: 23
            }
          },
          loc: {
            start: {
              line: 234,
              column: 59
            },
            end: {
              line: 284,
              column: 1
            }
          },
          line: 234
        },
        '12': {
          name: '(anonymous_12)',
          decl: {
            start: {
              line: 245,
              column: 20
            },
            end: {
              line: 245,
              column: 21
            }
          },
          loc: {
            start: {
              line: 246,
              column: 4
            },
            end: {
              line: 246,
              column: 77
            }
          },
          line: 246
        },
        '13': {
          name: '(anonymous_13)',
          decl: {
            start: {
              line: 247,
              column: 20
            },
            end: {
              line: 247,
              column: 21
            }
          },
          loc: {
            start: {
              line: 248,
              column: 4
            },
            end: {
              line: 248,
              column: 77
            }
          },
          line: 248
        },
        '14': {
          name: '(anonymous_14)',
          decl: {
            start: {
              line: 249,
              column: 18
            },
            end: {
              line: 249,
              column: 19
            }
          },
          loc: {
            start: {
              line: 250,
              column: 4
            },
            end: {
              line: 250,
              column: 75
            }
          },
          line: 250
        }
      },
      branchMap: {
        '0': {
          loc: {
            start: {
              line: 11,
              column: 43
            },
            end: {
              line: 11,
              column: 73
            }
          },
          type: 'binary-expr',
          locations: [{
            start: {
              line: 11,
              column: 43
            },
            end: {
              line: 11,
              column: 67
            }
          }, {
            start: {
              line: 11,
              column: 71
            },
            end: {
              line: 11,
              column: 73
            }
          }],
          line: 11
        },
        '1': {
          loc: {
            start: {
              line: 14,
              column: 4
            },
            end: {
              line: 30,
              column: 5
            }
          },
          type: 'if',
          locations: [{
            start: {
              line: 14,
              column: 4
            },
            end: {
              line: 30,
              column: 5
            }
          }, {
            start: {
              line: 14,
              column: 4
            },
            end: {
              line: 30,
              column: 5
            }
          }],
          line: 14
        },
        '2': {
          loc: {
            start: {
              line: 16,
              column: 6
            },
            end: {
              line: 18,
              column: 7
            }
          },
          type: 'if',
          locations: [{
            start: {
              line: 16,
              column: 6
            },
            end: {
              line: 18,
              column: 7
            }
          }, {
            start: {
              line: 16,
              column: 6
            },
            end: {
              line: 18,
              column: 7
            }
          }],
          line: 16
        },
        '3': {
          loc: {
            start: {
              line: 23,
              column: 6
            },
            end: {
              line: 26,
              column: 7
            }
          },
          type: 'if',
          locations: [{
            start: {
              line: 23,
              column: 6
            },
            end: {
              line: 26,
              column: 7
            }
          }, {
            start: {
              line: 23,
              column: 6
            },
            end: {
              line: 26,
              column: 7
            }
          }],
          line: 23
        },
        '4': {
          loc: {
            start: {
              line: 43,
              column: 43
            },
            end: {
              line: 43,
              column: 59
            }
          },
          type: 'default-arg',
          locations: [{
            start: {
              line: 43,
              column: 57
            },
            end: {
              line: 43,
              column: 59
            }
          }],
          line: 43
        },
        '5': {
          loc: {
            start: {
              line: 44,
              column: 2
            },
            end: {
              line: 46,
              column: 3
            }
          },
          type: 'if',
          locations: [{
            start: {
              line: 44,
              column: 2
            },
            end: {
              line: 46,
              column: 3
            }
          }, {
            start: {
              line: 44,
              column: 2
            },
            end: {
              line: 46,
              column: 3
            }
          }],
          line: 44
        },
        '6': {
          loc: {
            start: {
              line: 51,
              column: 4
            },
            end: {
              line: 53,
              column: 5
            }
          },
          type: 'if',
          locations: [{
            start: {
              line: 51,
              column: 4
            },
            end: {
              line: 53,
              column: 5
            }
          }, {
            start: {
              line: 51,
              column: 4
            },
            end: {
              line: 53,
              column: 5
            }
          }],
          line: 51
        },
        '7': {
          loc: {
            start: {
              line: 57,
              column: 22
            },
            end: {
              line: 57,
              column: 71
            }
          },
          type: 'binary-expr',
          locations: [{
            start: {
              line: 57,
              column: 22
            },
            end: {
              line: 57,
              column: 42
            }
          }, {
            start: {
              line: 57,
              column: 46
            },
            end: {
              line: 57,
              column: 71
            }
          }],
          line: 57
        },
        '8': {
          loc: {
            start: {
              line: 59,
              column: 4
            },
            end: {
              line: 61,
              column: 5
            }
          },
          type: 'if',
          locations: [{
            start: {
              line: 59,
              column: 4
            },
            end: {
              line: 61,
              column: 5
            }
          }, {
            start: {
              line: 59,
              column: 4
            },
            end: {
              line: 61,
              column: 5
            }
          }],
          line: 59
        },
        '9': {
          loc: {
            start: {
              line: 59,
              column: 8
            },
            end: {
              line: 59,
              column: 34
            }
          },
          type: 'binary-expr',
          locations: [{
            start: {
              line: 59,
              column: 8
            },
            end: {
              line: 59,
              column: 21
            }
          }, {
            start: {
              line: 59,
              column: 25
            },
            end: {
              line: 59,
              column: 34
            }
          }],
          line: 59
        },
        '10': {
          loc: {
            start: {
              line: 76,
              column: 14
            },
            end: {
              line: 76,
              column: 41
            }
          },
          type: 'binary-expr',
          locations: [{
            start: {
              line: 76,
              column: 14
            },
            end: {
              line: 76,
              column: 29
            }
          }, {
            start: {
              line: 76,
              column: 33
            },
            end: {
              line: 76,
              column: 41
            }
          }],
          line: 76
        },
        '11': {
          loc: {
            start: {
              line: 81,
              column: 19
            },
            end: {
              line: 81,
              column: 59
            }
          },
          type: 'cond-expr',
          locations: [{
            start: {
              line: 81,
              column: 37
            },
            end: {
              line: 81,
              column: 55
            }
          }, {
            start: {
              line: 81,
              column: 58
            },
            end: {
              line: 81,
              column: 59
            }
          }],
          line: 81
        },
        '12': {
          loc: {
            start: {
              line: 84,
              column: 2
            },
            end: {
              line: 86,
              column: 3
            }
          },
          type: 'if',
          locations: [{
            start: {
              line: 84,
              column: 2
            },
            end: {
              line: 86,
              column: 3
            }
          }, {
            start: {
              line: 84,
              column: 2
            },
            end: {
              line: 86,
              column: 3
            }
          }],
          line: 84
        },
        '13': {
          loc: {
            start: {
              line: 88,
              column: 2
            },
            end: {
              line: 90,
              column: 3
            }
          },
          type: 'if',
          locations: [{
            start: {
              line: 88,
              column: 2
            },
            end: {
              line: 90,
              column: 3
            }
          }, {
            start: {
              line: 88,
              column: 2
            },
            end: {
              line: 90,
              column: 3
            }
          }],
          line: 88
        },
        '14': {
          loc: {
            start: {
              line: 96,
              column: 2
            },
            end: {
              line: 107,
              column: 3
            }
          },
          type: 'if',
          locations: [{
            start: {
              line: 96,
              column: 2
            },
            end: {
              line: 107,
              column: 3
            }
          }, {
            start: {
              line: 96,
              column: 2
            },
            end: {
              line: 107,
              column: 3
            }
          }],
          line: 96
        },
        '15': {
          loc: {
            start: {
              line: 101,
              column: 19
            },
            end: {
              line: 101,
              column: 43
            }
          },
          type: 'binary-expr',
          locations: [{
            start: {
              line: 101,
              column: 19
            },
            end: {
              line: 101,
              column: 37
            }
          }, {
            start: {
              line: 101,
              column: 41
            },
            end: {
              line: 101,
              column: 43
            }
          }],
          line: 101
        },
        '16': {
          loc: {
            start: {
              line: 115,
              column: 14
            },
            end: {
              line: 115,
              column: 41
            }
          },
          type: 'binary-expr',
          locations: [{
            start: {
              line: 115,
              column: 14
            },
            end: {
              line: 115,
              column: 29
            }
          }, {
            start: {
              line: 115,
              column: 33
            },
            end: {
              line: 115,
              column: 41
            }
          }],
          line: 115
        },
        '17': {
          loc: {
            start: {
              line: 117,
              column: 17
            },
            end: {
              line: 117,
              column: 41
            }
          },
          type: 'binary-expr',
          locations: [{
            start: {
              line: 117,
              column: 17
            },
            end: {
              line: 117,
              column: 35
            }
          }, {
            start: {
              line: 117,
              column: 39
            },
            end: {
              line: 117,
              column: 41
            }
          }],
          line: 117
        },
        '18': {
          loc: {
            start: {
              line: 120,
              column: 19
            },
            end: {
              line: 120,
              column: 59
            }
          },
          type: 'cond-expr',
          locations: [{
            start: {
              line: 120,
              column: 37
            },
            end: {
              line: 120,
              column: 55
            }
          }, {
            start: {
              line: 120,
              column: 58
            },
            end: {
              line: 120,
              column: 59
            }
          }],
          line: 120
        },
        '19': {
          loc: {
            start: {
              line: 124,
              column: 50
            },
            end: {
              line: 124,
              column: 66
            }
          },
          type: 'default-arg',
          locations: [{
            start: {
              line: 124,
              column: 64
            },
            end: {
              line: 124,
              column: 66
            }
          }],
          line: 124
        },
        '20': {
          loc: {
            start: {
              line: 128,
              column: 17
            },
            end: {
              line: 129,
              column: 42
            }
          },
          type: 'binary-expr',
          locations: [{
            start: {
              line: 128,
              column: 17
            },
            end: {
              line: 128,
              column: 41
            }
          }, {
            start: {
              line: 129,
              column: 6
            },
            end: {
              line: 129,
              column: 36
            }
          }, {
            start: {
              line: 129,
              column: 40
            },
            end: {
              line: 129,
              column: 42
            }
          }],
          line: 128
        },
        '21': {
          loc: {
            start: {
              line: 130,
              column: 21
            },
            end: {
              line: 130,
              column: 51
            }
          },
          type: 'binary-expr',
          locations: [{
            start: {
              line: 130,
              column: 21
            },
            end: {
              line: 130,
              column: 45
            }
          }, {
            start: {
              line: 130,
              column: 49
            },
            end: {
              line: 130,
              column: 51
            }
          }],
          line: 130
        },
        '22': {
          loc: {
            start: {
              line: 134,
              column: 4
            },
            end: {
              line: 138,
              column: 5
            }
          },
          type: 'if',
          locations: [{
            start: {
              line: 134,
              column: 4
            },
            end: {
              line: 138,
              column: 5
            }
          }, {
            start: {
              line: 134,
              column: 4
            },
            end: {
              line: 138,
              column: 5
            }
          }],
          line: 134
        },
        '23': {
          loc: {
            start: {
              line: 135,
              column: 24
            },
            end: {
              line: 135,
              column: 48
            }
          },
          type: 'cond-expr',
          locations: [{
            start: {
              line: 135,
              column: 31
            },
            end: {
              line: 135,
              column: 43
            }
          }, {
            start: {
              line: 135,
              column: 46
            },
            end: {
              line: 135,
              column: 48
            }
          }],
          line: 135
        },
        '24': {
          loc: {
            start: {
              line: 141,
              column: 4
            },
            end: {
              line: 145,
              column: 5
            }
          },
          type: 'if',
          locations: [{
            start: {
              line: 141,
              column: 4
            },
            end: {
              line: 145,
              column: 5
            }
          }, {
            start: {
              line: 141,
              column: 4
            },
            end: {
              line: 145,
              column: 5
            }
          }],
          line: 141
        },
        '25': {
          loc: {
            start: {
              line: 141,
              column: 8
            },
            end: {
              line: 143,
              column: 35
            }
          },
          type: 'binary-expr',
          locations: [{
            start: {
              line: 141,
              column: 8
            },
            end: {
              line: 141,
              column: 16
            }
          }, {
            start: {
              line: 142,
              column: 6
            },
            end: {
              line: 143,
              column: 35
            }
          }],
          line: 141
        },
        '26': {
          loc: {
            start: {
              line: 158,
              column: 4
            },
            end: {
              line: 161,
              column: 5
            }
          },
          type: 'if',
          locations: [{
            start: {
              line: 158,
              column: 4
            },
            end: {
              line: 161,
              column: 5
            }
          }, {
            start: {
              line: 158,
              column: 4
            },
            end: {
              line: 161,
              column: 5
            }
          }],
          line: 158
        },
        '27': {
          loc: {
            start: {
              line: 158,
              column: 8
            },
            end: {
              line: 158,
              column: 62
            }
          },
          type: 'binary-expr',
          locations: [{
            start: {
              line: 158,
              column: 8
            },
            end: {
              line: 158,
              column: 43
            }
          }, {
            start: {
              line: 158,
              column: 47
            },
            end: {
              line: 158,
              column: 62
            }
          }],
          line: 158
        },
        '28': {
          loc: {
            start: {
              line: 167,
              column: 2
            },
            end: {
              line: 171,
              column: 3
            }
          },
          type: 'if',
          locations: [{
            start: {
              line: 167,
              column: 2
            },
            end: {
              line: 171,
              column: 3
            }
          }, {
            start: {
              line: 167,
              column: 2
            },
            end: {
              line: 171,
              column: 3
            }
          }],
          line: 167
        },
        '29': {
          loc: {
            start: {
              line: 176,
              column: 48
            },
            end: {
              line: 176,
              column: 64
            }
          },
          type: 'default-arg',
          locations: [{
            start: {
              line: 176,
              column: 62
            },
            end: {
              line: 176,
              column: 64
            }
          }],
          line: 176
        },
        '30': {
          loc: {
            start: {
              line: 178,
              column: 18
            },
            end: {
              line: 178,
              column: 52
            }
          },
          type: 'binary-expr',
          locations: [{
            start: {
              line: 178,
              column: 18
            },
            end: {
              line: 178,
              column: 42
            }
          }, {
            start: {
              line: 178,
              column: 46
            },
            end: {
              line: 178,
              column: 52
            }
          }],
          line: 178
        },
        '31': {
          loc: {
            start: {
              line: 181,
              column: 4
            },
            end: {
              line: 183,
              column: 5
            }
          },
          type: 'if',
          locations: [{
            start: {
              line: 181,
              column: 4
            },
            end: {
              line: 183,
              column: 5
            }
          }, {
            start: {
              line: 181,
              column: 4
            },
            end: {
              line: 183,
              column: 5
            }
          }],
          line: 181
        },
        '32': {
          loc: {
            start: {
              line: 215,
              column: 14
            },
            end: {
              line: 215,
              column: 41
            }
          },
          type: 'binary-expr',
          locations: [{
            start: {
              line: 215,
              column: 14
            },
            end: {
              line: 215,
              column: 29
            }
          }, {
            start: {
              line: 215,
              column: 33
            },
            end: {
              line: 215,
              column: 41
            }
          }],
          line: 215
        },
        '33': {
          loc: {
            start: {
              line: 220,
              column: 19
            },
            end: {
              line: 220,
              column: 59
            }
          },
          type: 'cond-expr',
          locations: [{
            start: {
              line: 220,
              column: 37
            },
            end: {
              line: 220,
              column: 55
            }
          }, {
            start: {
              line: 220,
              column: 58
            },
            end: {
              line: 220,
              column: 59
            }
          }],
          line: 220
        },
        '34': {
          loc: {
            start: {
              line: 223,
              column: 2
            },
            end: {
              line: 225,
              column: 3
            }
          },
          type: 'if',
          locations: [{
            start: {
              line: 223,
              column: 2
            },
            end: {
              line: 225,
              column: 3
            }
          }, {
            start: {
              line: 223,
              column: 2
            },
            end: {
              line: 225,
              column: 3
            }
          }],
          line: 223
        },
        '35': {
          loc: {
            start: {
              line: 227,
              column: 2
            },
            end: {
              line: 229,
              column: 3
            }
          },
          type: 'if',
          locations: [{
            start: {
              line: 227,
              column: 2
            },
            end: {
              line: 229,
              column: 3
            }
          }, {
            start: {
              line: 227,
              column: 2
            },
            end: {
              line: 229,
              column: 3
            }
          }],
          line: 227
        },
        '36': {
          loc: {
            start: {
              line: 234,
              column: 38
            },
            end: {
              line: 234,
              column: 54
            }
          },
          type: 'default-arg',
          locations: [{
            start: {
              line: 234,
              column: 52
            },
            end: {
              line: 234,
              column: 54
            }
          }],
          line: 234
        },
        '37': {
          loc: {
            start: {
              line: 235,
              column: 2
            },
            end: {
              line: 237,
              column: 3
            }
          },
          type: 'if',
          locations: [{
            start: {
              line: 235,
              column: 2
            },
            end: {
              line: 237,
              column: 3
            }
          }, {
            start: {
              line: 235,
              column: 2
            },
            end: {
              line: 237,
              column: 3
            }
          }],
          line: 235
        },
        '38': {
          loc: {
            start: {
              line: 242,
              column: 4
            },
            end: {
              line: 242,
              column: 27
            }
          },
          type: 'default-arg',
          locations: [{
            start: {
              line: 242,
              column: 26
            },
            end: {
              line: 242,
              column: 27
            }
          }],
          line: 242
        },
        '39': {
          loc: {
            start: {
              line: 246,
              column: 4
            },
            end: {
              line: 246,
              column: 77
            }
          },
          type: 'binary-expr',
          locations: [{
            start: {
              line: 246,
              column: 4
            },
            end: {
              line: 246,
              column: 39
            }
          }, {
            start: {
              line: 246,
              column: 43
            },
            end: {
              line: 246,
              column: 77
            }
          }],
          line: 246
        },
        '40': {
          loc: {
            start: {
              line: 248,
              column: 4
            },
            end: {
              line: 248,
              column: 77
            }
          },
          type: 'binary-expr',
          locations: [{
            start: {
              line: 248,
              column: 4
            },
            end: {
              line: 248,
              column: 39
            }
          }, {
            start: {
              line: 248,
              column: 43
            },
            end: {
              line: 248,
              column: 77
            }
          }],
          line: 248
        },
        '41': {
          loc: {
            start: {
              line: 250,
              column: 4
            },
            end: {
              line: 250,
              column: 75
            }
          },
          type: 'binary-expr',
          locations: [{
            start: {
              line: 250,
              column: 4
            },
            end: {
              line: 250,
              column: 38
            }
          }, {
            start: {
              line: 250,
              column: 42
            },
            end: {
              line: 250,
              column: 75
            }
          }],
          line: 250
        },
        '42': {
          loc: {
            start: {
              line: 275,
              column: 2
            },
            end: {
              line: 277,
              column: 3
            }
          },
          type: 'if',
          locations: [{
            start: {
              line: 275,
              column: 2
            },
            end: {
              line: 277,
              column: 3
            }
          }, {
            start: {
              line: 275,
              column: 2
            },
            end: {
              line: 277,
              column: 3
            }
          }],
          line: 275
        },
        '43': {
          loc: {
            start: {
              line: 279,
              column: 2
            },
            end: {
              line: 281,
              column: 3
            }
          },
          type: 'if',
          locations: [{
            start: {
              line: 279,
              column: 2
            },
            end: {
              line: 281,
              column: 3
            }
          }, {
            start: {
              line: 279,
              column: 2
            },
            end: {
              line: 281,
              column: 3
            }
          }],
          line: 279
        }
      },
      s: {
        '0': 0,
        '1': 0,
        '2': 0,
        '3': 0,
        '4': 0,
        '5': 0,
        '6': 0,
        '7': 0,
        '8': 0,
        '9': 0,
        '10': 0,
        '11': 0,
        '12': 0,
        '13': 0,
        '14': 0,
        '15': 0,
        '16': 0,
        '17': 0,
        '18': 0,
        '19': 0,
        '20': 0,
        '21': 0,
        '22': 0,
        '23': 0,
        '24': 0,
        '25': 0,
        '26': 0,
        '27': 0,
        '28': 0,
        '29': 0,
        '30': 0,
        '31': 0,
        '32': 0,
        '33': 0,
        '34': 0,
        '35': 0,
        '36': 0,
        '37': 0,
        '38': 0,
        '39': 0,
        '40': 0,
        '41': 0,
        '42': 0,
        '43': 0,
        '44': 0,
        '45': 0,
        '46': 0,
        '47': 0,
        '48': 0,
        '49': 0,
        '50': 0,
        '51': 0,
        '52': 0,
        '53': 0,
        '54': 0,
        '55': 0,
        '56': 0,
        '57': 0,
        '58': 0,
        '59': 0,
        '60': 0,
        '61': 0,
        '62': 0,
        '63': 0,
        '64': 0,
        '65': 0,
        '66': 0,
        '67': 0,
        '68': 0,
        '69': 0,
        '70': 0,
        '71': 0,
        '72': 0,
        '73': 0,
        '74': 0,
        '75': 0,
        '76': 0,
        '77': 0,
        '78': 0,
        '79': 0,
        '80': 0,
        '81': 0,
        '82': 0,
        '83': 0,
        '84': 0,
        '85': 0,
        '86': 0,
        '87': 0,
        '88': 0,
        '89': 0
      },
      f: {
        '0': 0,
        '1': 0,
        '2': 0,
        '3': 0,
        '4': 0,
        '5': 0,
        '6': 0,
        '7': 0,
        '8': 0,
        '9': 0,
        '10': 0,
        '11': 0,
        '12': 0,
        '13': 0,
        '14': 0
      },
      b: {
        '0': [0, 0],
        '1': [0, 0],
        '2': [0, 0],
        '3': [0, 0],
        '4': [0],
        '5': [0, 0],
        '6': [0, 0],
        '7': [0, 0],
        '8': [0, 0],
        '9': [0, 0],
        '10': [0, 0],
        '11': [0, 0],
        '12': [0, 0],
        '13': [0, 0],
        '14': [0, 0],
        '15': [0, 0],
        '16': [0, 0],
        '17': [0, 0],
        '18': [0, 0],
        '19': [0],
        '20': [0, 0, 0],
        '21': [0, 0],
        '22': [0, 0],
        '23': [0, 0],
        '24': [0, 0],
        '25': [0, 0],
        '26': [0, 0],
        '27': [0, 0],
        '28': [0, 0],
        '29': [0],
        '30': [0, 0],
        '31': [0, 0],
        '32': [0, 0],
        '33': [0, 0],
        '34': [0, 0],
        '35': [0, 0],
        '36': [0],
        '37': [0, 0],
        '38': [0],
        '39': [0, 0],
        '40': [0, 0],
        '41': [0, 0],
        '42': [0, 0],
        '43': [0, 0]
      },
      _coverageSchema: '332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'
    },
        coverage = global[gcv] || (global[gcv] = {});

    if (coverage[path] && coverage[path].hash === hash) {
      return coverage[path];
    }

    coverageData.hash = hash;
    return coverage[path] = coverageData;
  }();
  cov_qa6wliqs3.s[0]++;

  var mergeDiscontiguousPlaylists = function mergeDiscontiguousPlaylists(playlists) {
    cov_qa6wliqs3.f[0]++;
    var mergedPlaylists = (cov_qa6wliqs3.s[1]++, values(playlists.reduce(function (acc, playlist) {
      cov_qa6wliqs3.f[1]++;
      var name = (cov_qa6wliqs3.s[2]++, playlist.attributes.id + ((cov_qa6wliqs3.b[0][0]++, playlist.attributes.lang) || (cov_qa6wliqs3.b[0][1]++, '')));
      cov_qa6wliqs3.s[3]++;

      if (acc[name]) {
        var _acc$name$segments;

        cov_qa6wliqs3.b[1][0]++;
        cov_qa6wliqs3.s[4]++;

        if (playlist.segments[0]) {
          cov_qa6wliqs3.b[2][0]++;
          cov_qa6wliqs3.s[5]++;
          playlist.segments[0].discontinuity = true;
        } else {
          cov_qa6wliqs3.b[2][1]++;
        }

        cov_qa6wliqs3.s[6]++;

        (_acc$name$segments = acc[name].segments).push.apply(_acc$name$segments, playlist.segments);

        cov_qa6wliqs3.s[7]++;

        if (playlist.attributes.contentProtection) {
          cov_qa6wliqs3.b[3][0]++;
          cov_qa6wliqs3.s[8]++;
          acc[name].attributes.contentProtection = playlist.attributes.contentProtection;
        } else {
          cov_qa6wliqs3.b[3][1]++;
        }
      } else {
        cov_qa6wliqs3.b[1][1]++;
        cov_qa6wliqs3.s[9]++;
        acc[name] = playlist;
      }

      cov_qa6wliqs3.s[10]++;
      return acc;
    }, {})));
    cov_qa6wliqs3.s[11]++;
    return mergedPlaylists.map(function (playlist) {
      cov_qa6wliqs3.f[2]++;
      cov_qa6wliqs3.s[12]++;
      playlist.discontinuityStarts = findIndexes(playlist.segments, 'discontinuity');
      cov_qa6wliqs3.s[13]++;
      return playlist;
    });
  };

  cov_qa6wliqs3.s[14]++;

  var addSegmentInfoFromSidx = function addSegmentInfoFromSidx(playlists, sidxMapping) {
    if (sidxMapping === void 0) {
      sidxMapping = (cov_qa6wliqs3.b[4][0]++, {});
    }

    cov_qa6wliqs3.f[3]++;
    cov_qa6wliqs3.s[15]++;

    if (!Object.keys(sidxMapping).length) {
      cov_qa6wliqs3.b[5][0]++;
      cov_qa6wliqs3.s[16]++;
      return playlists;
    } else {
      cov_qa6wliqs3.b[5][1]++;
    }

    cov_qa6wliqs3.s[17]++;

    for (var i in playlists) {
      var playlist = (cov_qa6wliqs3.s[18]++, playlists[i]);
      cov_qa6wliqs3.s[19]++;

      if (!playlist.sidx) {
        cov_qa6wliqs3.b[6][0]++;
        cov_qa6wliqs3.s[20]++;
        continue;
      } else {
        cov_qa6wliqs3.b[6][1]++;
      }

      var sidxKey = (cov_qa6wliqs3.s[21]++, playlist.sidx.uri + '-' + byteRangeToString(playlist.sidx.byterange));
      var sidxMatch = (cov_qa6wliqs3.s[22]++, (cov_qa6wliqs3.b[7][0]++, sidxMapping[sidxKey]) && (cov_qa6wliqs3.b[7][1]++, sidxMapping[sidxKey].sidx));
      cov_qa6wliqs3.s[23]++;

      if ((cov_qa6wliqs3.b[9][0]++, playlist.sidx) && (cov_qa6wliqs3.b[9][1]++, sidxMatch)) {
        cov_qa6wliqs3.b[8][0]++;
        cov_qa6wliqs3.s[24]++;
        addSegmentsToPlaylist(playlist, sidxMatch, playlist.sidx.resolvedUri);
      } else {
        cov_qa6wliqs3.b[8][1]++;
      }
    }

    cov_qa6wliqs3.s[25]++;
    return playlists;
  };

  cov_qa6wliqs3.s[26]++;
  var formatAudioPlaylist = function formatAudioPlaylist(_ref) {
    var _attributes;

    var attributes = _ref.attributes,
        segments = _ref.segments,
        sidx = _ref.sidx;
    cov_qa6wliqs3.f[4]++;
    var playlist = (cov_qa6wliqs3.s[27]++, {
      attributes: (_attributes = {
        NAME: attributes.id,
        BANDWIDTH: attributes.bandwidth,
        CODECS: attributes.codecs
      }, _attributes['PROGRAM-ID'] = 1, _attributes),
      uri: '',
      endList: ((cov_qa6wliqs3.b[10][0]++, attributes.type) || (cov_qa6wliqs3.b[10][1]++, 'static')) === 'static',
      timeline: attributes.periodIndex,
      resolvedUri: '',
      targetDuration: attributes.duration,
      segments: segments,
      mediaSequence: segments.length ? (cov_qa6wliqs3.b[11][0]++, segments[0].number) : (cov_qa6wliqs3.b[11][1]++, 1)
    });
    cov_qa6wliqs3.s[28]++;

    if (attributes.contentProtection) {
      cov_qa6wliqs3.b[12][0]++;
      cov_qa6wliqs3.s[29]++;
      playlist.contentProtection = attributes.contentProtection;
    } else {
      cov_qa6wliqs3.b[12][1]++;
    }

    cov_qa6wliqs3.s[30]++;

    if (sidx) {
      cov_qa6wliqs3.b[13][0]++;
      cov_qa6wliqs3.s[31]++;
      playlist.sidx = sidx;
    } else {
      cov_qa6wliqs3.b[13][1]++;
    }

    cov_qa6wliqs3.s[32]++;
    return playlist;
  };
  cov_qa6wliqs3.s[33]++;
  var formatVttPlaylist = function formatVttPlaylist(_ref2) {
    var _attributes2;

    var attributes = _ref2.attributes,
        segments = _ref2.segments;
    cov_qa6wliqs3.f[5]++;
    cov_qa6wliqs3.s[34]++;

    if (typeof segments === 'undefined') {
      cov_qa6wliqs3.b[14][0]++;
      cov_qa6wliqs3.s[35]++;
      segments = [{
        uri: attributes.baseUrl,
        timeline: attributes.periodIndex,
        resolvedUri: (cov_qa6wliqs3.b[15][0]++, attributes.baseUrl) || (cov_qa6wliqs3.b[15][1]++, ''),
        duration: attributes.sourceDuration,
        number: 0
      }];
      cov_qa6wliqs3.s[36]++;
      attributes.duration = attributes.sourceDuration;
    } else {
      cov_qa6wliqs3.b[14][1]++;
    }

    cov_qa6wliqs3.s[37]++;
    return {
      attributes: (_attributes2 = {
        NAME: attributes.id,
        BANDWIDTH: attributes.bandwidth
      }, _attributes2['PROGRAM-ID'] = 1, _attributes2),
      uri: '',
      endList: ((cov_qa6wliqs3.b[16][0]++, attributes.type) || (cov_qa6wliqs3.b[16][1]++, 'static')) === 'static',
      timeline: attributes.periodIndex,
      resolvedUri: (cov_qa6wliqs3.b[17][0]++, attributes.baseUrl) || (cov_qa6wliqs3.b[17][1]++, ''),
      targetDuration: attributes.duration,
      segments: segments,
      mediaSequence: segments.length ? (cov_qa6wliqs3.b[18][0]++, segments[0].number) : (cov_qa6wliqs3.b[18][1]++, 1)
    };
  };
  cov_qa6wliqs3.s[38]++;
  var organizeAudioPlaylists = function organizeAudioPlaylists(playlists, sidxMapping) {
    if (sidxMapping === void 0) {
      sidxMapping = (cov_qa6wliqs3.b[19][0]++, {});
    }

    cov_qa6wliqs3.f[6]++;
    var mainPlaylist;
    var formattedPlaylists = (cov_qa6wliqs3.s[39]++, playlists.reduce(function (a, playlist) {
      cov_qa6wliqs3.f[7]++;
      var role = (cov_qa6wliqs3.s[40]++, (cov_qa6wliqs3.b[20][0]++, playlist.attributes.role) && (cov_qa6wliqs3.b[20][1]++, playlist.attributes.role.value) || (cov_qa6wliqs3.b[20][2]++, ''));
      var language = (cov_qa6wliqs3.s[41]++, (cov_qa6wliqs3.b[21][0]++, playlist.attributes.lang) || (cov_qa6wliqs3.b[21][1]++, ''));
      var label = (cov_qa6wliqs3.s[42]++, 'main');
      cov_qa6wliqs3.s[43]++;

      if (language) {
        cov_qa6wliqs3.b[22][0]++;
        var roleLabel = (cov_qa6wliqs3.s[44]++, role ? (cov_qa6wliqs3.b[23][0]++, " (" + role + ")") : (cov_qa6wliqs3.b[23][1]++, ''));
        cov_qa6wliqs3.s[45]++;
        label = "" + playlist.attributes.lang + roleLabel;
      } else {
        cov_qa6wliqs3.b[22][1]++;
      }

      cov_qa6wliqs3.s[46]++;

      if ((cov_qa6wliqs3.b[25][0]++, a[label]) && (cov_qa6wliqs3.b[25][1]++, a[label].playlists[0].attributes.BANDWIDTH > playlist.attributes.bandwidth)) {
        cov_qa6wliqs3.b[24][0]++;
        cov_qa6wliqs3.s[47]++;
        return a;
      } else {
        cov_qa6wliqs3.b[24][1]++;
      }

      cov_qa6wliqs3.s[48]++;
      a[label] = {
        language: language,
        autoselect: true,
        default: role === 'main',
        playlists: addSegmentInfoFromSidx([formatAudioPlaylist(playlist)], sidxMapping),
        uri: ''
      };
      cov_qa6wliqs3.s[49]++;

      if ((cov_qa6wliqs3.b[27][0]++, typeof mainPlaylist === 'undefined') && (cov_qa6wliqs3.b[27][1]++, role === 'main')) {
        cov_qa6wliqs3.b[26][0]++;
        cov_qa6wliqs3.s[50]++;
        mainPlaylist = playlist;
        cov_qa6wliqs3.s[51]++;
        mainPlaylist.default = true;
      } else {
        cov_qa6wliqs3.b[26][1]++;
      }

      cov_qa6wliqs3.s[52]++;
      return a;
    }, {}));
    cov_qa6wliqs3.s[53]++;

    if (!mainPlaylist) {
      cov_qa6wliqs3.b[28][0]++;
      var firstLabel = (cov_qa6wliqs3.s[54]++, Object.keys(formattedPlaylists)[0]);
      cov_qa6wliqs3.s[55]++;
      formattedPlaylists[firstLabel].default = true;
    } else {
      cov_qa6wliqs3.b[28][1]++;
    }

    cov_qa6wliqs3.s[56]++;
    return formattedPlaylists;
  };
  cov_qa6wliqs3.s[57]++;
  var organizeVttPlaylists = function organizeVttPlaylists(playlists, sidxMapping) {
    if (sidxMapping === void 0) {
      sidxMapping = (cov_qa6wliqs3.b[29][0]++, {});
    }

    cov_qa6wliqs3.f[8]++;
    cov_qa6wliqs3.s[58]++;
    return playlists.reduce(function (a, playlist) {
      cov_qa6wliqs3.f[9]++;
      var label = (cov_qa6wliqs3.s[59]++, (cov_qa6wliqs3.b[30][0]++, playlist.attributes.lang) || (cov_qa6wliqs3.b[30][1]++, 'text'));
      cov_qa6wliqs3.s[60]++;

      if (a[label]) {
        cov_qa6wliqs3.b[31][0]++;
        cov_qa6wliqs3.s[61]++;
        return a;
      } else {
        cov_qa6wliqs3.b[31][1]++;
      }

      cov_qa6wliqs3.s[62]++;
      a[label] = {
        language: label,
        default: false,
        autoselect: false,
        playlists: addSegmentInfoFromSidx([formatVttPlaylist(playlist)], sidxMapping),
        uri: ''
      };
      cov_qa6wliqs3.s[63]++;
      return a;
    }, {});
  };
  cov_qa6wliqs3.s[64]++;
  var formatVideoPlaylist = function formatVideoPlaylist(_ref3) {
    var _attributes3;

    var attributes = _ref3.attributes,
        segments = _ref3.segments,
        sidx = _ref3.sidx;
    cov_qa6wliqs3.f[10]++;
    var playlist = (cov_qa6wliqs3.s[65]++, {
      attributes: (_attributes3 = {
        NAME: attributes.id,
        AUDIO: 'audio',
        SUBTITLES: 'subs',
        RESOLUTION: {
          width: attributes.width,
          height: attributes.height
        },
        CODECS: attributes.codecs,
        BANDWIDTH: attributes.bandwidth
      }, _attributes3['PROGRAM-ID'] = 1, _attributes3),
      uri: '',
      endList: ((cov_qa6wliqs3.b[32][0]++, attributes.type) || (cov_qa6wliqs3.b[32][1]++, 'static')) === 'static',
      timeline: attributes.periodIndex,
      resolvedUri: '',
      targetDuration: attributes.duration,
      segments: segments,
      mediaSequence: segments.length ? (cov_qa6wliqs3.b[33][0]++, segments[0].number) : (cov_qa6wliqs3.b[33][1]++, 1)
    });
    cov_qa6wliqs3.s[66]++;

    if (attributes.contentProtection) {
      cov_qa6wliqs3.b[34][0]++;
      cov_qa6wliqs3.s[67]++;
      playlist.contentProtection = attributes.contentProtection;
    } else {
      cov_qa6wliqs3.b[34][1]++;
    }

    cov_qa6wliqs3.s[68]++;

    if (sidx) {
      cov_qa6wliqs3.b[35][0]++;
      cov_qa6wliqs3.s[69]++;
      playlist.sidx = sidx;
    } else {
      cov_qa6wliqs3.b[35][1]++;
    }

    cov_qa6wliqs3.s[70]++;
    return playlist;
  };
  cov_qa6wliqs3.s[71]++;
  var toM3u8 = function toM3u8(dashPlaylists, sidxMapping) {
    var _mediaGroups;

    if (sidxMapping === void 0) {
      sidxMapping = (cov_qa6wliqs3.b[36][0]++, {});
    }

    cov_qa6wliqs3.f[11]++;
    cov_qa6wliqs3.s[72]++;

    if (!dashPlaylists.length) {
      cov_qa6wliqs3.b[37][0]++;
      cov_qa6wliqs3.s[73]++;
      return {};
    } else {
      cov_qa6wliqs3.b[37][1]++;
    }

    var _ref4 = (cov_qa6wliqs3.s[74]++, dashPlaylists[0].attributes),
        duration = _ref4.sourceDuration,
        _ref4$minimumUpdatePe = _ref4.minimumUpdatePeriod,
        minimumUpdatePeriod = _ref4$minimumUpdatePe === void 0 ? (cov_qa6wliqs3.b[38][0]++, 0) : _ref4$minimumUpdatePe;

    cov_qa6wliqs3.s[75]++;

    var videoOnly = function videoOnly(_ref5) {
      var attributes = _ref5.attributes;
      cov_qa6wliqs3.f[12]++;
      cov_qa6wliqs3.s[76]++;
      return (cov_qa6wliqs3.b[39][0]++, attributes.mimeType === 'video/mp4') || (cov_qa6wliqs3.b[39][1]++, attributes.contentType === 'video');
    };

    cov_qa6wliqs3.s[77]++;

    var audioOnly = function audioOnly(_ref6) {
      var attributes = _ref6.attributes;
      cov_qa6wliqs3.f[13]++;
      cov_qa6wliqs3.s[78]++;
      return (cov_qa6wliqs3.b[40][0]++, attributes.mimeType === 'audio/mp4') || (cov_qa6wliqs3.b[40][1]++, attributes.contentType === 'audio');
    };

    cov_qa6wliqs3.s[79]++;

    var vttOnly = function vttOnly(_ref7) {
      var attributes = _ref7.attributes;
      cov_qa6wliqs3.f[14]++;
      cov_qa6wliqs3.s[80]++;
      return (cov_qa6wliqs3.b[41][0]++, attributes.mimeType === 'text/vtt') || (cov_qa6wliqs3.b[41][1]++, attributes.contentType === 'text');
    };

    var videoPlaylists = (cov_qa6wliqs3.s[81]++, mergeDiscontiguousPlaylists(dashPlaylists.filter(videoOnly)).map(formatVideoPlaylist));
    var audioPlaylists = (cov_qa6wliqs3.s[82]++, mergeDiscontiguousPlaylists(dashPlaylists.filter(audioOnly)));
    var vttPlaylists = (cov_qa6wliqs3.s[83]++, dashPlaylists.filter(vttOnly));
    var master = (cov_qa6wliqs3.s[84]++, {
      allowCache: true,
      discontinuityStarts: [],
      segments: [],
      endList: true,
      mediaGroups: (_mediaGroups = {
        AUDIO: {},
        VIDEO: {}
      }, _mediaGroups['CLOSED-CAPTIONS'] = {}, _mediaGroups.SUBTITLES = {}, _mediaGroups),
      uri: '',
      duration: duration,
      playlists: addSegmentInfoFromSidx(videoPlaylists, sidxMapping),
      minimumUpdatePeriod: minimumUpdatePeriod * 1000
    });
    cov_qa6wliqs3.s[85]++;

    if (audioPlaylists.length) {
      cov_qa6wliqs3.b[42][0]++;
      cov_qa6wliqs3.s[86]++;
      master.mediaGroups.AUDIO.audio = organizeAudioPlaylists(audioPlaylists, sidxMapping);
    } else {
      cov_qa6wliqs3.b[42][1]++;
    }

    cov_qa6wliqs3.s[87]++;

    if (vttPlaylists.length) {
      cov_qa6wliqs3.b[43][0]++;
      cov_qa6wliqs3.s[88]++;
      master.mediaGroups.SUBTITLES.subs = organizeVttPlaylists(vttPlaylists, sidxMapping);
    } else {
      cov_qa6wliqs3.b[43][1]++;
    }

    cov_qa6wliqs3.s[89]++;
    return master;
  };

  var cov_2m22dqtzi = function () {
    var path = '/Users/gkatsevman/p/mpd-parser/src/segment/timelineTimeParser.js',
        hash = 'd46d78e08d2191fad995904392f3da7e7a221df0',
        Function = function () {}.constructor,
        global = new Function('return this')(),
        gcv = '__coverage__',
        coverageData = {
      path: '/Users/gkatsevman/p/mpd-parser/src/segment/timelineTimeParser.js',
      statementMap: {
        '0': {
          start: {
            line: 16,
            column: 22
          },
          end: {
            line: 31,
            column: 1
          }
        },
        '1': {
          start: {
            line: 24,
            column: 6
          },
          end: {
            line: 24,
            column: 16
          }
        },
        '2': {
          start: {
            line: 25,
            column: 14
          },
          end: {
            line: 25,
            column: 41
          }
        },
        '3': {
          start: {
            line: 26,
            column: 24
          },
          end: {
            line: 26,
            column: 53
          }
        },
        '4': {
          start: {
            line: 27,
            column: 22
          },
          end: {
            line: 27,
            column: 47
          }
        },
        '5': {
          start: {
            line: 28,
            column: 25
          },
          end: {
            line: 28,
            column: 52
          }
        },
        '6': {
          start: {
            line: 30,
            column: 2
          },
          end: {
            line: 30,
            column: 69
          }
        },
        '7': {
          start: {
            line: 46,
            column: 31
          },
          end: {
            line: 129,
            column: 1
          }
        },
        '8': {
          start: {
            line: 55,
            column: 6
          },
          end: {
            line: 55,
            column: 16
          }
        },
        '9': {
          start: {
            line: 56,
            column: 19
          },
          end: {
            line: 56,
            column: 21
          }
        },
        '10': {
          start: {
            line: 57,
            column: 13
          },
          end: {
            line: 57,
            column: 15
          }
        },
        '11': {
          start: {
            line: 59,
            column: 2
          },
          end: {
            line: 126,
            column: 3
          }
        },
        '12': {
          start: {
            line: 60,
            column: 14
          },
          end: {
            line: 60,
            column: 37
          }
        },
        '13': {
          start: {
            line: 61,
            column: 21
          },
          end: {
            line: 61,
            column: 24
          }
        },
        '14': {
          start: {
            line: 62,
            column: 19
          },
          end: {
            line: 62,
            column: 27
          }
        },
        '15': {
          start: {
            line: 63,
            column: 24
          },
          end: {
            line: 63,
            column: 32
          }
        },
        '16': {
          start: {
            line: 65,
            column: 4
          },
          end: {
            line: 68,
            column: 5
          }
        },
        '17': {
          start: {
            line: 67,
            column: 6
          },
          end: {
            line: 67,
            column: 25
          }
        },
        '18': {
          start: {
            line: 70,
            column: 4
          },
          end: {
            line: 94,
            column: 5
          }
        },
        '19': {
          start: {
            line: 93,
            column: 6
          },
          end: {
            line: 93,
            column: 25
          }
        },
        '20': {
          start: {
            line: 98,
            column: 4
          },
          end: {
            line: 116,
            column: 5
          }
        },
        '21': {
          start: {
            line: 99,
            column: 20
          },
          end: {
            line: 99,
            column: 30
          }
        },
        '22': {
          start: {
            line: 101,
            column: 6
          },
          end: {
            line: 113,
            column: 7
          }
        },
        '23': {
          start: {
            line: 103,
            column: 8
          },
          end: {
            line: 110,
            column: 9
          }
        },
        '24': {
          start: {
            line: 106,
            column: 10
          },
          end: {
            line: 106,
            column: 60
          }
        },
        '25': {
          start: {
            line: 109,
            column: 10
          },
          end: {
            line: 109,
            column: 67
          }
        },
        '26': {
          start: {
            line: 112,
            column: 8
          },
          end: {
            line: 112,
            column: 61
          }
        },
        '27': {
          start: {
            line: 115,
            column: 6
          },
          end: {
            line: 115,
            column: 25
          }
        },
        '28': {
          start: {
            line: 118,
            column: 16
          },
          end: {
            line: 118,
            column: 53
          }
        },
        '29': {
          start: {
            line: 119,
            column: 17
          },
          end: {
            line: 119,
            column: 46
          }
        },
        '30': {
          start: {
            line: 121,
            column: 4
          },
          end: {
            line: 125,
            column: 5
          }
        },
        '31': {
          start: {
            line: 122,
            column: 6
          },
          end: {
            line: 122,
            column: 80
          }
        },
        '32': {
          start: {
            line: 123,
            column: 6
          },
          end: {
            line: 123,
            column: 23
          }
        },
        '33': {
          start: {
            line: 124,
            column: 6
          },
          end: {
            line: 124,
            column: 15
          }
        },
        '34': {
          start: {
            line: 128,
            column: 2
          },
          end: {
            line: 128,
            column: 18
          }
        }
      },
      fnMap: {
        '0': {
          name: '(anonymous_0)',
          decl: {
            start: {
              line: 16,
              column: 22
            },
            end: {
              line: 16,
              column: 23
            }
          },
          loc: {
            start: {
              line: 16,
              column: 54
            },
            end: {
              line: 31,
              column: 1
            }
          },
          line: 16
        },
        '1': {
          name: '(anonymous_1)',
          decl: {
            start: {
              line: 46,
              column: 31
            },
            end: {
              line: 46,
              column: 32
            }
          },
          loc: {
            start: {
              line: 46,
              column: 64
            },
            end: {
              line: 129,
              column: 1
            }
          },
          line: 46
        }
      },
      branchMap: {
        '0': {
          loc: {
            start: {
              line: 21,
              column: 4
            },
            end: {
              line: 21,
              column: 17
            }
          },
          type: 'default-arg',
          locations: [{
            start: {
              line: 21,
              column: 16
            },
            end: {
              line: 21,
              column: 17
            }
          }],
          line: 21
        },
        '1': {
          loc: {
            start: {
              line: 22,
              column: 4
            },
            end: {
              line: 22,
              column: 13
            }
          },
          type: 'default-arg',
          locations: [{
            start: {
              line: 22,
              column: 12
            },
            end: {
              line: 22,
              column: 13
            }
          }],
          line: 22
        },
        '2': {
          loc: {
            start: {
              line: 23,
              column: 4
            },
            end: {
              line: 23,
              column: 27
            }
          },
          type: 'default-arg',
          locations: [{
            start: {
              line: 23,
              column: 26
            },
            end: {
              line: 23,
              column: 27
            }
          }],
          line: 23
        },
        '3': {
          loc: {
            start: {
              line: 48,
              column: 4
            },
            end: {
              line: 48,
              column: 19
            }
          },
          type: 'default-arg',
          locations: [{
            start: {
              line: 48,
              column: 11
            },
            end: {
              line: 48,
              column: 19
            }
          }],
          line: 48
        },
        '4': {
          loc: {
            start: {
              line: 49,
              column: 4
            },
            end: {
              line: 49,
              column: 27
            }
          },
          type: 'default-arg',
          locations: [{
            start: {
              line: 49,
              column: 26
            },
            end: {
              line: 49,
              column: 27
            }
          }],
          line: 49
        },
        '5': {
          loc: {
            start: {
              line: 50,
              column: 4
            },
            end: {
              line: 50,
              column: 14
            }
          },
          type: 'default-arg',
          locations: [{
            start: {
              line: 50,
              column: 12
            },
            end: {
              line: 50,
              column: 14
            }
          }],
          line: 50
        },
        '6': {
          loc: {
            start: {
              line: 52,
              column: 4
            },
            end: {
              line: 52,
              column: 17
            }
          },
          type: 'default-arg',
          locations: [{
            start: {
              line: 52,
              column: 16
            },
            end: {
              line: 52,
              column: 17
            }
          }],
          line: 52
        },
        '7': {
          loc: {
            start: {
              line: 53,
              column: 4
            },
            end: {
              line: 53,
              column: 19
            }
          },
          type: 'default-arg',
          locations: [{
            start: {
              line: 53,
              column: 18
            },
            end: {
              line: 53,
              column: 19
            }
          }],
          line: 53
        },
        '8': {
          loc: {
            start: {
              line: 62,
              column: 19
            },
            end: {
              line: 62,
              column: 27
            }
          },
          type: 'binary-expr',
          locations: [{
            start: {
              line: 62,
              column: 19
            },
            end: {
              line: 62,
              column: 22
            }
          }, {
            start: {
              line: 62,
              column: 26
            },
            end: {
              line: 62,
              column: 27
            }
          }],
          line: 62
        },
        '9': {
          loc: {
            start: {
              line: 63,
              column: 24
            },
            end: {
              line: 63,
              column: 32
            }
          },
          type: 'binary-expr',
          locations: [{
            start: {
              line: 63,
              column: 24
            },
            end: {
              line: 63,
              column: 27
            }
          }, {
            start: {
              line: 63,
              column: 31
            },
            end: {
              line: 63,
              column: 32
            }
          }],
          line: 63
        },
        '10': {
          loc: {
            start: {
              line: 65,
              column: 4
            },
            end: {
              line: 68,
              column: 5
            }
          },
          type: 'if',
          locations: [{
            start: {
              line: 65,
              column: 4
            },
            end: {
              line: 68,
              column: 5
            }
          }, {
            start: {
              line: 65,
              column: 4
            },
            end: {
              line: 68,
              column: 5
            }
          }],
          line: 65
        },
        '11': {
          loc: {
            start: {
              line: 70,
              column: 4
            },
            end: {
              line: 94,
              column: 5
            }
          },
          type: 'if',
          locations: [{
            start: {
              line: 70,
              column: 4
            },
            end: {
              line: 94,
              column: 5
            }
          }, {
            start: {
              line: 70,
              column: 4
            },
            end: {
              line: 94,
              column: 5
            }
          }],
          line: 70
        },
        '12': {
          loc: {
            start: {
              line: 70,
              column: 8
            },
            end: {
              line: 70,
              column: 41
            }
          },
          type: 'binary-expr',
          locations: [{
            start: {
              line: 70,
              column: 8
            },
            end: {
              line: 70,
              column: 19
            }
          }, {
            start: {
              line: 70,
              column: 23
            },
            end: {
              line: 70,
              column: 41
            }
          }],
          line: 70
        },
        '13': {
          loc: {
            start: {
              line: 98,
              column: 4
            },
            end: {
              line: 116,
              column: 5
            }
          },
          type: 'if',
          locations: [{
            start: {
              line: 98,
              column: 4
            },
            end: {
              line: 116,
              column: 5
            }
          }, {
            start: {
              line: 98,
              column: 4
            },
            end: {
              line: 116,
              column: 5
            }
          }],
          line: 98
        },
        '14': {
          loc: {
            start: {
              line: 101,
              column: 6
            },
            end: {
              line: 113,
              column: 7
            }
          },
          type: 'if',
          locations: [{
            start: {
              line: 101,
              column: 6
            },
            end: {
              line: 113,
              column: 7
            }
          }, {
            start: {
              line: 101,
              column: 6
            },
            end: {
              line: 113,
              column: 7
            }
          }],
          line: 101
        },
        '15': {
          loc: {
            start: {
              line: 103,
              column: 8
            },
            end: {
              line: 110,
              column: 9
            }
          },
          type: 'if',
          locations: [{
            start: {
              line: 103,
              column: 8
            },
            end: {
              line: 110,
              column: 9
            }
          }, {
            start: {
              line: 103,
              column: 8
            },
            end: {
              line: 110,
              column: 9
            }
          }],
          line: 103
        },
        '16': {
          loc: {
            start: {
              line: 103,
              column: 12
            },
            end: {
              line: 105,
              column: 41
            }
          },
          type: 'binary-expr',
          locations: [{
            start: {
              line: 103,
              column: 12
            },
            end: {
              line: 103,
              column: 30
            }
          }, {
            start: {
              line: 104,
              column: 12
            },
            end: {
              line: 104,
              column: 35
            }
          }, {
            start: {
              line: 105,
              column: 12
            },
            end: {
              line: 105,
              column: 41
            }
          }],
          line: 103
        }
      },
      s: {
        '0': 0,
        '1': 0,
        '2': 0,
        '3': 0,
        '4': 0,
        '5': 0,
        '6': 0,
        '7': 0,
        '8': 0,
        '9': 0,
        '10': 0,
        '11': 0,
        '12': 0,
        '13': 0,
        '14': 0,
        '15': 0,
        '16': 0,
        '17': 0,
        '18': 0,
        '19': 0,
        '20': 0,
        '21': 0,
        '22': 0,
        '23': 0,
        '24': 0,
        '25': 0,
        '26': 0,
        '27': 0,
        '28': 0,
        '29': 0,
        '30': 0,
        '31': 0,
        '32': 0,
        '33': 0,
        '34': 0
      },
      f: {
        '0': 0,
        '1': 0
      },
      b: {
        '0': [0],
        '1': [0],
        '2': [0],
        '3': [0],
        '4': [0],
        '5': [0],
        '6': [0],
        '7': [0],
        '8': [0, 0],
        '9': [0, 0],
        '10': [0, 0],
        '11': [0, 0],
        '12': [0, 0],
        '13': [0, 0],
        '14': [0, 0],
        '15': [0, 0],
        '16': [0, 0, 0]
      },
      _coverageSchema: '332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'
    },
        coverage = global[gcv] || (global[gcv] = {});

    if (coverage[path] && coverage[path].hash === hash) {
      return coverage[path];
    }

    coverageData.hash = hash;
    return coverage[path] = coverageData;
  }();

  cov_2m22dqtzi.s[0]++;

  var getLiveRValue = function getLiveRValue(attributes, time, duration) {
    cov_2m22dqtzi.f[0]++;

    var _ref = (cov_2m22dqtzi.s[1]++, attributes),
        NOW = _ref.NOW,
        clientOffset = _ref.clientOffset,
        availabilityStartTime = _ref.availabilityStartTime,
        _ref$timescale = _ref.timescale,
        timescale = _ref$timescale === void 0 ? (cov_2m22dqtzi.b[0][0]++, 1) : _ref$timescale,
        _ref$start = _ref.start,
        start = _ref$start === void 0 ? (cov_2m22dqtzi.b[1][0]++, 0) : _ref$start,
        _ref$minimumUpdatePer = _ref.minimumUpdatePeriod,
        minimumUpdatePeriod = _ref$minimumUpdatePer === void 0 ? (cov_2m22dqtzi.b[2][0]++, 0) : _ref$minimumUpdatePer;

    var now = (cov_2m22dqtzi.s[2]++, (NOW + clientOffset) / 1000);
    var periodStartWC = (cov_2m22dqtzi.s[3]++, availabilityStartTime + start);
    var periodEndWC = (cov_2m22dqtzi.s[4]++, now + minimumUpdatePeriod);
    var periodDuration = (cov_2m22dqtzi.s[5]++, periodEndWC - periodStartWC);
    cov_2m22dqtzi.s[6]++;
    return Math.ceil((periodDuration * timescale - time) / duration);
  };

  cov_2m22dqtzi.s[7]++;
  var parseByTimeline = function parseByTimeline(attributes, segmentTimeline) {
    cov_2m22dqtzi.f[1]++;

    var _ref2 = (cov_2m22dqtzi.s[8]++, attributes),
        _ref2$type = _ref2.type,
        type = _ref2$type === void 0 ? (cov_2m22dqtzi.b[3][0]++, 'static') : _ref2$type,
        _ref2$minimumUpdatePe = _ref2.minimumUpdatePeriod,
        minimumUpdatePeriod = _ref2$minimumUpdatePe === void 0 ? (cov_2m22dqtzi.b[4][0]++, 0) : _ref2$minimumUpdatePe,
        _ref2$media = _ref2.media,
        media = _ref2$media === void 0 ? (cov_2m22dqtzi.b[5][0]++, '') : _ref2$media,
        sourceDuration = _ref2.sourceDuration,
        _ref2$timescale = _ref2.timescale,
        timescale = _ref2$timescale === void 0 ? (cov_2m22dqtzi.b[6][0]++, 1) : _ref2$timescale,
        _ref2$startNumber = _ref2.startNumber,
        startNumber = _ref2$startNumber === void 0 ? (cov_2m22dqtzi.b[7][0]++, 1) : _ref2$startNumber,
        timeline = _ref2.periodIndex;

    var segments = (cov_2m22dqtzi.s[9]++, []);
    var time = (cov_2m22dqtzi.s[10]++, -1);
    cov_2m22dqtzi.s[11]++;

    for (var sIndex = 0; sIndex < segmentTimeline.length; sIndex++) {
      var S = (cov_2m22dqtzi.s[12]++, segmentTimeline[sIndex]);
      var duration = (cov_2m22dqtzi.s[13]++, S.d);
      var repeat = (cov_2m22dqtzi.s[14]++, (cov_2m22dqtzi.b[8][0]++, S.r) || (cov_2m22dqtzi.b[8][1]++, 0));
      var segmentTime = (cov_2m22dqtzi.s[15]++, (cov_2m22dqtzi.b[9][0]++, S.t) || (cov_2m22dqtzi.b[9][1]++, 0));
      cov_2m22dqtzi.s[16]++;

      if (time < 0) {
        cov_2m22dqtzi.b[10][0]++;
        cov_2m22dqtzi.s[17]++;
        time = segmentTime;
      } else {
        cov_2m22dqtzi.b[10][1]++;
      }

      cov_2m22dqtzi.s[18]++;

      if ((cov_2m22dqtzi.b[12][0]++, segmentTime) && (cov_2m22dqtzi.b[12][1]++, segmentTime > time)) {
        cov_2m22dqtzi.b[11][0]++;
        cov_2m22dqtzi.s[19]++;
        time = segmentTime;
      } else {
        cov_2m22dqtzi.b[11][1]++;
      }

      var count = void 0;
      cov_2m22dqtzi.s[20]++;

      if (repeat < 0) {
        cov_2m22dqtzi.b[13][0]++;
        var nextS = (cov_2m22dqtzi.s[21]++, sIndex + 1);
        cov_2m22dqtzi.s[22]++;

        if (nextS === segmentTimeline.length) {
          cov_2m22dqtzi.b[14][0]++;
          cov_2m22dqtzi.s[23]++;

          if ((cov_2m22dqtzi.b[16][0]++, type === 'dynamic') && (cov_2m22dqtzi.b[16][1]++, minimumUpdatePeriod > 0) && (cov_2m22dqtzi.b[16][2]++, media.indexOf('$Number$') > 0)) {
            cov_2m22dqtzi.b[15][0]++;
            cov_2m22dqtzi.s[24]++;
            count = getLiveRValue(attributes, time, duration);
          } else {
            cov_2m22dqtzi.b[15][1]++;
            cov_2m22dqtzi.s[25]++;
            count = (sourceDuration * timescale - time) / duration;
          }
        } else {
          cov_2m22dqtzi.b[14][1]++;
          cov_2m22dqtzi.s[26]++;
          count = (segmentTimeline[nextS].t - time) / duration;
        }
      } else {
        cov_2m22dqtzi.b[13][1]++;
        cov_2m22dqtzi.s[27]++;
        count = repeat + 1;
      }

      var end = (cov_2m22dqtzi.s[28]++, startNumber + segments.length + count);
      var number = (cov_2m22dqtzi.s[29]++, startNumber + segments.length);
      cov_2m22dqtzi.s[30]++;

      while (number < end) {
        cov_2m22dqtzi.s[31]++;
        segments.push({
          number: number,
          duration: duration / timescale,
          time: time,
          timeline: timeline
        });
        cov_2m22dqtzi.s[32]++;
        time += duration;
        cov_2m22dqtzi.s[33]++;
        number++;
      }
    }

    cov_2m22dqtzi.s[34]++;
    return segments;
  };

  var cov_ixd2lf4bv = function () {
    var path = '/Users/gkatsevman/p/mpd-parser/src/segment/segmentTemplate.js',
        hash = '2eb7122a8f93d72307f77bc01238b8df2df84cd2',
        Function = function () {}.constructor,
        global = new Function('return this')(),
        gcv = '__coverage__',
        coverageData = {
      path: '/Users/gkatsevman/p/mpd-parser/src/segment/segmentTemplate.js',
      statementMap: {
        '0': {
          start: {
            line: 6,
            column: 26
          },
          end: {
            line: 6,
            column: 59
          }
        },
        '1': {
          start: {
            line: 44,
            column: 37
          },
          end: {
            line: 72,
            column: 1
          }
        },
        '2': {
          start: {
            line: 44,
            column: 49
          },
          end: {
            line: 72,
            column: 1
          }
        },
        '3': {
          start: {
            line: 45,
            column: 2
          },
          end: {
            line: 48,
            column: 3
          }
        },
        '4': {
          start: {
            line: 47,
            column: 4
          },
          end: {
            line: 47,
            column: 15
          }
        },
        '5': {
          start: {
            line: 50,
            column: 2
          },
          end: {
            line: 52,
            column: 3
          }
        },
        '6': {
          start: {
            line: 51,
            column: 4
          },
          end: {
            line: 51,
            column: 17
          }
        },
        '7': {
          start: {
            line: 54,
            column: 16
          },
          end: {
            line: 54,
            column: 39
          }
        },
        '8': {
          start: {
            line: 56,
            column: 2
          },
          end: {
            line: 59,
            column: 3
          }
        },
        '9': {
          start: {
            line: 58,
            column: 4
          },
          end: {
            line: 58,
            column: 17
          }
        },
        '10': {
          start: {
            line: 61,
            column: 2
          },
          end: {
            line: 65,
            column: 3
          }
        },
        '11': {
          start: {
            line: 62,
            column: 4
          },
          end: {
            line: 62,
            column: 14
          }
        },
        '12': {
          start: {
            line: 64,
            column: 4
          },
          end: {
            line: 64,
            column: 32
          }
        },
        '13': {
          start: {
            line: 67,
            column: 2
          },
          end: {
            line: 69,
            column: 3
          }
        },
        '14': {
          start: {
            line: 68,
            column: 4
          },
          end: {
            line: 68,
            column: 17
          }
        },
        '15': {
          start: {
            line: 71,
            column: 2
          },
          end: {
            line: 71,
            column: 70
          }
        },
        '16': {
          start: {
            line: 92,
            column: 36
          },
          end: {
            line: 93,
            column: 63
          }
        },
        '17': {
          start: {
            line: 93,
            column: 2
          },
          end: {
            line: 93,
            column: 63
          }
        },
        '18': {
          start: {
            line: 108,
            column: 33
          },
          end: {
            line: 125,
            column: 1
          }
        },
        '19': {
          start: {
            line: 109,
            column: 2
          },
          end: {
            line: 118,
            column: 3
          }
        },
        '20': {
          start: {
            line: 112,
            column: 4
          },
          end: {
            line: 117,
            column: 7
          }
        },
        '21': {
          start: {
            line: 120,
            column: 2
          },
          end: {
            line: 122,
            column: 3
          }
        },
        '22': {
          start: {
            line: 121,
            column: 4
          },
          end: {
            line: 121,
            column: 39
          }
        },
        '23': {
          start: {
            line: 124,
            column: 2
          },
          end: {
            line: 124,
            column: 54
          }
        },
        '24': {
          start: {
            line: 139,
            column: 36
          },
          end: {
            line: 170,
            column: 1
          }
        },
        '25': {
          start: {
            line: 140,
            column: 25
          },
          end: {
            line: 143,
            column: 3
          }
        },
        '26': {
          start: {
            line: 145,
            column: 60
          },
          end: {
            line: 145,
            column: 70
          }
        },
        '27': {
          start: {
            line: 147,
            column: 21
          },
          end: {
            line: 151,
            column: 4
          }
        },
        '28': {
          start: {
            line: 153,
            column: 19
          },
          end: {
            line: 153,
            column: 65
          }
        },
        '29': {
          start: {
            line: 155,
            column: 2
          },
          end: {
            line: 169,
            column: 5
          }
        },
        '30': {
          start: {
            line: 156,
            column: 4
          },
          end: {
            line: 156,
            column: 43
          }
        },
        '31': {
          start: {
            line: 157,
            column: 4
          },
          end: {
            line: 157,
            column: 39
          }
        },
        '32': {
          start: {
            line: 159,
            column: 16
          },
          end: {
            line: 159,
            column: 76
          }
        },
        '33': {
          start: {
            line: 161,
            column: 4
          },
          end: {
            line: 168,
            column: 6
          }
        }
      },
      fnMap: {
        '0': {
          name: '(anonymous_0)',
          decl: {
            start: {
              line: 44,
              column: 37
            },
            end: {
              line: 44,
              column: 38
            }
          },
          loc: {
            start: {
              line: 44,
              column: 49
            },
            end: {
              line: 72,
              column: 1
            }
          },
          line: 44
        },
        '1': {
          name: '(anonymous_1)',
          decl: {
            start: {
              line: 44,
              column: 49
            },
            end: {
              line: 44,
              column: 50
            }
          },
          loc: {
            start: {
              line: 44,
              column: 87
            },
            end: {
              line: 72,
              column: 1
            }
          },
          line: 44
        },
        '2': {
          name: '(anonymous_2)',
          decl: {
            start: {
              line: 92,
              column: 36
            },
            end: {
              line: 92,
              column: 37
            }
          },
          loc: {
            start: {
              line: 93,
              column: 2
            },
            end: {
              line: 93,
              column: 63
            }
          },
          line: 93
        },
        '3': {
          name: '(anonymous_3)',
          decl: {
            start: {
              line: 108,
              column: 33
            },
            end: {
              line: 108,
              column: 34
            }
          },
          loc: {
            start: {
              line: 108,
              column: 66
            },
            end: {
              line: 125,
              column: 1
            }
          },
          line: 108
        },
        '4': {
          name: '(anonymous_4)',
          decl: {
            start: {
              line: 139,
              column: 36
            },
            end: {
              line: 139,
              column: 37
            }
          },
          loc: {
            start: {
              line: 139,
              column: 69
            },
            end: {
              line: 170,
              column: 1
            }
          },
          line: 139
        },
        '5': {
          name: '(anonymous_5)',
          decl: {
            start: {
              line: 155,
              column: 22
            },
            end: {
              line: 155,
              column: 23
            }
          },
          loc: {
            start: {
              line: 155,
              column: 33
            },
            end: {
              line: 169,
              column: 3
            }
          },
          line: 155
        }
      },
      branchMap: {
        '0': {
          loc: {
            start: {
              line: 45,
              column: 2
            },
            end: {
              line: 48,
              column: 3
            }
          },
          type: 'if',
          locations: [{
            start: {
              line: 45,
              column: 2
            },
            end: {
              line: 48,
              column: 3
            }
          }, {
            start: {
              line: 45,
              column: 2
            },
            end: {
              line: 48,
              column: 3
            }
          }],
          line: 45
        },
        '1': {
          loc: {
            start: {
              line: 50,
              column: 2
            },
            end: {
              line: 52,
              column: 3
            }
          },
          type: 'if',
          locations: [{
            start: {
              line: 50,
              column: 2
            },
            end: {
              line: 52,
              column: 3
            }
          }, {
            start: {
              line: 50,
              column: 2
            },
            end: {
              line: 52,
              column: 3
            }
          }],
          line: 50
        },
        '2': {
          loc: {
            start: {
              line: 56,
              column: 2
            },
            end: {
              line: 59,
              column: 3
            }
          },
          type: 'if',
          locations: [{
            start: {
              line: 56,
              column: 2
            },
            end: {
              line: 59,
              column: 3
            }
          }, {
            start: {
              line: 56,
              column: 2
            },
            end: {
              line: 59,
              column: 3
            }
          }],
          line: 56
        },
        '3': {
          loc: {
            start: {
              line: 61,
              column: 2
            },
            end: {
              line: 65,
              column: 3
            }
          },
          type: 'if',
          locations: [{
            start: {
              line: 61,
              column: 2
            },
            end: {
              line: 65,
              column: 3
            }
          }, {
            start: {
              line: 61,
              column: 2
            },
            end: {
              line: 65,
              column: 3
            }
          }],
          line: 61
        },
        '4': {
          loc: {
            start: {
              line: 67,
              column: 2
            },
            end: {
              line: 69,
              column: 3
            }
          },
          type: 'if',
          locations: [{
            start: {
              line: 67,
              column: 2
            },
            end: {
              line: 69,
              column: 3
            }
          }, {
            start: {
              line: 67,
              column: 2
            },
            end: {
              line: 69,
              column: 3
            }
          }],
          line: 67
        },
        '5': {
          loc: {
            start: {
              line: 109,
              column: 2
            },
            end: {
              line: 118,
              column: 3
            }
          },
          type: 'if',
          locations: [{
            start: {
              line: 109,
              column: 2
            },
            end: {
              line: 118,
              column: 3
            }
          }, {
            start: {
              line: 109,
              column: 2
            },
            end: {
              line: 118,
              column: 3
            }
          }],
          line: 109
        },
        '6': {
          loc: {
            start: {
              line: 109,
              column: 6
            },
            end: {
              line: 109,
              column: 46
            }
          },
          type: 'binary-expr',
          locations: [{
            start: {
              line: 109,
              column: 6
            },
            end: {
              line: 109,
              column: 26
            }
          }, {
            start: {
              line: 109,
              column: 30
            },
            end: {
              line: 109,
              column: 46
            }
          }],
          line: 109
        },
        '7': {
          loc: {
            start: {
              line: 113,
              column: 14
            },
            end: {
              line: 113,
              column: 41
            }
          },
          type: 'binary-expr',
          locations: [{
            start: {
              line: 113,
              column: 14
            },
            end: {
              line: 113,
              column: 36
            }
          }, {
            start: {
              line: 113,
              column: 40
            },
            end: {
              line: 113,
              column: 41
            }
          }],
          line: 113
        },
        '8': {
          loc: {
            start: {
              line: 120,
              column: 2
            },
            end: {
              line: 122,
              column: 3
            }
          },
          type: 'if',
          locations: [{
            start: {
              line: 120,
              column: 2
            },
            end: {
              line: 122,
              column: 3
            }
          }, {
            start: {
              line: 120,
              column: 2
            },
            end: {
              line: 122,
              column: 3
            }
          }],
          line: 120
        },
        '9': {
          loc: {
            start: {
              line: 142,
              column: 15
            },
            end: {
              line: 142,
              column: 40
            }
          },
          type: 'binary-expr',
          locations: [{
            start: {
              line: 142,
              column: 15
            },
            end: {
              line: 142,
              column: 35
            }
          }, {
            start: {
              line: 142,
              column: 39
            },
            end: {
              line: 142,
              column: 40
            }
          }],
          line: 142
        },
        '10': {
          loc: {
            start: {
              line: 145,
              column: 10
            },
            end: {
              line: 145,
              column: 55
            }
          },
          type: 'default-arg',
          locations: [{
            start: {
              line: 145,
              column: 27
            },
            end: {
              line: 145,
              column: 55
            }
          }],
          line: 145
        },
        '11': {
          loc: {
            start: {
              line: 159,
              column: 37
            },
            end: {
              line: 159,
              column: 59
            }
          },
          type: 'binary-expr',
          locations: [{
            start: {
              line: 159,
              column: 37
            },
            end: {
              line: 159,
              column: 53
            }
          }, {
            start: {
              line: 159,
              column: 57
            },
            end: {
              line: 159,
              column: 59
            }
          }],
          line: 159
        },
        '12': {
          loc: {
            start: {
              line: 165,
              column: 30
            },
            end: {
              line: 165,
              column: 54
            }
          },
          type: 'binary-expr',
          locations: [{
            start: {
              line: 165,
              column: 30
            },
            end: {
              line: 165,
              column: 48
            }
          }, {
            start: {
              line: 165,
              column: 52
            },
            end: {
              line: 165,
              column: 54
            }
          }],
          line: 165
        }
      },
      s: {
        '0': 0,
        '1': 0,
        '2': 0,
        '3': 0,
        '4': 0,
        '5': 0,
        '6': 0,
        '7': 0,
        '8': 0,
        '9': 0,
        '10': 0,
        '11': 0,
        '12': 0,
        '13': 0,
        '14': 0,
        '15': 0,
        '16': 0,
        '17': 0,
        '18': 0,
        '19': 0,
        '20': 0,
        '21': 0,
        '22': 0,
        '23': 0,
        '24': 0,
        '25': 0,
        '26': 0,
        '27': 0,
        '28': 0,
        '29': 0,
        '30': 0,
        '31': 0,
        '32': 0,
        '33': 0
      },
      f: {
        '0': 0,
        '1': 0,
        '2': 0,
        '3': 0,
        '4': 0,
        '5': 0
      },
      b: {
        '0': [0, 0],
        '1': [0, 0],
        '2': [0, 0],
        '3': [0, 0],
        '4': [0, 0],
        '5': [0, 0],
        '6': [0, 0],
        '7': [0, 0],
        '8': [0, 0],
        '9': [0, 0],
        '10': [0],
        '11': [0, 0],
        '12': [0, 0]
      },
      _coverageSchema: '332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'
    },
        coverage = global[gcv] || (global[gcv] = {});

    if (coverage[path] && coverage[path].hash === hash) {
      return coverage[path];
    }

    coverageData.hash = hash;
    return coverage[path] = coverageData;
  }();
  var identifierPattern = (cov_ixd2lf4bv.s[0]++, /\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g);
  cov_ixd2lf4bv.s[1]++;
  var identifierReplacement = function identifierReplacement(values) {
    cov_ixd2lf4bv.f[0]++;
    cov_ixd2lf4bv.s[2]++;
    return function (match, identifier, format, width) {
      cov_ixd2lf4bv.f[1]++;
      cov_ixd2lf4bv.s[3]++;

      if (match === '$$') {
        cov_ixd2lf4bv.b[0][0]++;
        cov_ixd2lf4bv.s[4]++;
        return '$';
      } else {
        cov_ixd2lf4bv.b[0][1]++;
      }

      cov_ixd2lf4bv.s[5]++;

      if (typeof values[identifier] === 'undefined') {
        cov_ixd2lf4bv.b[1][0]++;
        cov_ixd2lf4bv.s[6]++;
        return match;
      } else {
        cov_ixd2lf4bv.b[1][1]++;
      }

      var value = (cov_ixd2lf4bv.s[7]++, '' + values[identifier]);
      cov_ixd2lf4bv.s[8]++;

      if (identifier === 'RepresentationID') {
        cov_ixd2lf4bv.b[2][0]++;
        cov_ixd2lf4bv.s[9]++;
        return value;
      } else {
        cov_ixd2lf4bv.b[2][1]++;
      }

      cov_ixd2lf4bv.s[10]++;

      if (!format) {
        cov_ixd2lf4bv.b[3][0]++;
        cov_ixd2lf4bv.s[11]++;
        width = 1;
      } else {
        cov_ixd2lf4bv.b[3][1]++;
        cov_ixd2lf4bv.s[12]++;
        width = parseInt(width, 10);
      }

      cov_ixd2lf4bv.s[13]++;

      if (value.length >= width) {
        cov_ixd2lf4bv.b[4][0]++;
        cov_ixd2lf4bv.s[14]++;
        return value;
      } else {
        cov_ixd2lf4bv.b[4][1]++;
      }

      cov_ixd2lf4bv.s[15]++;
      return "" + new Array(width - value.length + 1).join('0') + value;
    };
  };
  cov_ixd2lf4bv.s[16]++;
  var constructTemplateUrl = function constructTemplateUrl(url, values) {
    cov_ixd2lf4bv.f[2]++;
    cov_ixd2lf4bv.s[17]++;
    return url.replace(identifierPattern, identifierReplacement(values));
  };
  cov_ixd2lf4bv.s[18]++;
  var parseTemplateInfo = function parseTemplateInfo(attributes, segmentTimeline) {
    cov_ixd2lf4bv.f[3]++;
    cov_ixd2lf4bv.s[19]++;

    if ((cov_ixd2lf4bv.b[6][0]++, !attributes.duration) && (cov_ixd2lf4bv.b[6][1]++, !segmentTimeline)) {
      cov_ixd2lf4bv.b[5][0]++;
      cov_ixd2lf4bv.s[20]++;
      return [{
        number: (cov_ixd2lf4bv.b[7][0]++, attributes.startNumber) || (cov_ixd2lf4bv.b[7][1]++, 1),
        duration: attributes.sourceDuration,
        time: 0,
        timeline: attributes.periodIndex
      }];
    } else {
      cov_ixd2lf4bv.b[5][1]++;
    }

    cov_ixd2lf4bv.s[21]++;

    if (attributes.duration) {
      cov_ixd2lf4bv.b[8][0]++;
      cov_ixd2lf4bv.s[22]++;
      return parseByDuration(attributes);
    } else {
      cov_ixd2lf4bv.b[8][1]++;
    }

    cov_ixd2lf4bv.s[23]++;
    return parseByTimeline(attributes, segmentTimeline);
  };
  cov_ixd2lf4bv.s[24]++;
  var segmentsFromTemplate = function segmentsFromTemplate(attributes, segmentTimeline) {
    cov_ixd2lf4bv.f[4]++;
    var templateValues = (cov_ixd2lf4bv.s[25]++, {
      RepresentationID: attributes.id,
      Bandwidth: (cov_ixd2lf4bv.b[9][0]++, attributes.bandwidth) || (cov_ixd2lf4bv.b[9][1]++, 0)
    });

    var _ref = (cov_ixd2lf4bv.s[26]++, attributes),
        _ref$initialization = _ref.initialization,
        initialization = _ref$initialization === void 0 ? (cov_ixd2lf4bv.b[10][0]++, {
      sourceURL: '',
      range: ''
    }) : _ref$initialization;

    var mapSegment = (cov_ixd2lf4bv.s[27]++, urlTypeToSegment({
      baseUrl: attributes.baseUrl,
      source: constructTemplateUrl(initialization.sourceURL, templateValues),
      range: initialization.range
    }));
    var segments = (cov_ixd2lf4bv.s[28]++, parseTemplateInfo(attributes, segmentTimeline));
    cov_ixd2lf4bv.s[29]++;
    return segments.map(function (segment) {
      cov_ixd2lf4bv.f[5]++;
      cov_ixd2lf4bv.s[30]++;
      templateValues.Number = segment.number;
      cov_ixd2lf4bv.s[31]++;
      templateValues.Time = segment.time;
      var uri = (cov_ixd2lf4bv.s[32]++, constructTemplateUrl((cov_ixd2lf4bv.b[11][0]++, attributes.media) || (cov_ixd2lf4bv.b[11][1]++, ''), templateValues));
      cov_ixd2lf4bv.s[33]++;
      return {
        uri: uri,
        timeline: segment.timeline,
        duration: segment.duration,
        resolvedUri: resolveUrl((cov_ixd2lf4bv.b[12][0]++, attributes.baseUrl) || (cov_ixd2lf4bv.b[12][1]++, ''), uri),
        map: mapSegment,
        number: segment.number
      };
    });
  };

  var cov_2kl9sn0jen = function () {
    var path = '/Users/gkatsevman/p/mpd-parser/src/segment/segmentList.js',
        hash = 'b6d92ebf9699033fe2fe8bbfba4cc68cffcb22bb',
        Function = function () {}.constructor,
        global = new Function('return this')(),
        gcv = '__coverage__',
        coverageData = {
      path: '/Users/gkatsevman/p/mpd-parser/src/segment/segmentList.js',
      statementMap: {
        '0': {
          start: {
            line: 17,
            column: 34
          },
          end: {
            line: 35,
            column: 1
          }
        },
        '1': {
          start: {
            line: 18,
            column: 43
          },
          end: {
            line: 18,
            column: 53
          }
        },
        '2': {
          start: {
            line: 20,
            column: 22
          },
          end: {
            line: 24,
            column: 4
          }
        },
        '3': {
          start: {
            line: 26,
            column: 18
          },
          end: {
            line: 30,
            column: 4
          }
        },
        '4': {
          start: {
            line: 32,
            column: 2
          },
          end: {
            line: 32,
            column: 28
          }
        },
        '5': {
          start: {
            line: 34,
            column: 2
          },
          end: {
            line: 34,
            column: 17
          }
        },
        '6': {
          start: {
            line: 50,
            column: 32
          },
          end: {
            line: 90,
            column: 1
          }
        },
        '7': {
          start: {
            line: 54,
            column: 6
          },
          end: {
            line: 54,
            column: 16
          }
        },
        '8': {
          start: {
            line: 58,
            column: 2
          },
          end: {
            line: 61,
            column: 3
          }
        },
        '9': {
          start: {
            line: 60,
            column: 4
          },
          end: {
            line: 60,
            column: 53
          }
        },
        '10': {
          start: {
            line: 63,
            column: 24
          },
          end: {
            line: 64,
            column: 60
          }
        },
        '11': {
          start: {
            line: 64,
            column: 4
          },
          end: {
            line: 64,
            column: 59
          }
        },
        '12': {
          start: {
            line: 67,
            column: 2
          },
          end: {
            line: 69,
            column: 3
          }
        },
        '13': {
          start: {
            line: 68,
            column: 4
          },
          end: {
            line: 68,
            column: 50
          }
        },
        '14': {
          start: {
            line: 71,
            column: 2
          },
          end: {
            line: 73,
            column: 3
          }
        },
        '15': {
          start: {
            line: 72,
            column: 4
          },
          end: {
            line: 72,
            column: 67
          }
        },
        '16': {
          start: {
            line: 75,
            column: 19
          },
          end: {
            line: 87,
            column: 31
          }
        },
        '17': {
          start: {
            line: 76,
            column: 4
          },
          end: {
            line: 83,
            column: 5
          }
        },
        '18': {
          start: {
            line: 77,
            column: 22
          },
          end: {
            line: 77,
            column: 42
          }
        },
        '19': {
          start: {
            line: 79,
            column: 6
          },
          end: {
            line: 79,
            column: 46
          }
        },
        '20': {
          start: {
            line: 80,
            column: 6
          },
          end: {
            line: 80,
            column: 46
          }
        },
        '21': {
          start: {
            line: 81,
            column: 6
          },
          end: {
            line: 81,
            column: 42
          }
        },
        '22': {
          start: {
            line: 82,
            column: 6
          },
          end: {
            line: 82,
            column: 21
          }
        },
        '23': {
          start: {
            line: 87,
            column: 23
          },
          end: {
            line: 87,
            column: 30
          }
        },
        '24': {
          start: {
            line: 89,
            column: 2
          },
          end: {
            line: 89,
            column: 18
          }
        }
      },
      fnMap: {
        '0': {
          name: '(anonymous_0)',
          decl: {
            start: {
              line: 17,
              column: 34
            },
            end: {
              line: 17,
              column: 35
            }
          },
          loc: {
            start: {
              line: 17,
              column: 62
            },
            end: {
              line: 35,
              column: 1
            }
          },
          line: 17
        },
        '1': {
          name: '(anonymous_1)',
          decl: {
            start: {
              line: 50,
              column: 32
            },
            end: {
              line: 50,
              column: 33
            }
          },
          loc: {
            start: {
              line: 50,
              column: 65
            },
            end: {
              line: 90,
              column: 1
            }
          },
          line: 50
        },
        '2': {
          name: '(anonymous_2)',
          decl: {
            start: {
              line: 63,
              column: 40
            },
            end: {
              line: 63,
              column: 41
            }
          },
          loc: {
            start: {
              line: 64,
              column: 4
            },
            end: {
              line: 64,
              column: 59
            }
          },
          line: 64
        },
        '3': {
          name: '(anonymous_3)',
          decl: {
            start: {
              line: 75,
              column: 39
            },
            end: {
              line: 75,
              column: 40
            }
          },
          loc: {
            start: {
              line: 75,
              column: 63
            },
            end: {
              line: 87,
              column: 3
            }
          },
          line: 75
        },
        '4': {
          name: '(anonymous_4)',
          decl: {
            start: {
              line: 87,
              column: 12
            },
            end: {
              line: 87,
              column: 13
            }
          },
          loc: {
            start: {
              line: 87,
              column: 23
            },
            end: {
              line: 87,
              column: 30
            }
          },
          line: 87
        }
      },
      branchMap: {
        '0': {
          loc: {
            start: {
              line: 18,
              column: 19
            },
            end: {
              line: 18,
              column: 38
            }
          },
          type: 'default-arg',
          locations: [{
            start: {
              line: 18,
              column: 36
            },
            end: {
              line: 18,
              column: 38
            }
          }],
          line: 18
        },
        '1': {
          loc: {
            start: {
              line: 53,
              column: 4
            },
            end: {
              line: 53,
              column: 20
            }
          },
          type: 'default-arg',
          locations: [{
            start: {
              line: 53,
              column: 18
            },
            end: {
              line: 53,
              column: 20
            }
          }],
          line: 53
        },
        '2': {
          loc: {
            start: {
              line: 58,
              column: 2
            },
            end: {
              line: 61,
              column: 3
            }
          },
          type: 'if',
          locations: [{
            start: {
              line: 58,
              column: 2
            },
            end: {
              line: 61,
              column: 3
            }
          }, {
            start: {
              line: 58,
              column: 2
            },
            end: {
              line: 61,
              column: 3
            }
          }],
          line: 58
        },
        '3': {
          loc: {
            start: {
              line: 58,
              column: 6
            },
            end: {
              line: 59,
              column: 35
            }
          },
          type: 'binary-expr',
          locations: [{
            start: {
              line: 58,
              column: 7
            },
            end: {
              line: 58,
              column: 16
            }
          }, {
            start: {
              line: 58,
              column: 20
            },
            end: {
              line: 58,
              column: 36
            }
          }, {
            start: {
              line: 59,
              column: 7
            },
            end: {
              line: 59,
              column: 15
            }
          }, {
            start: {
              line: 59,
              column: 19
            },
            end: {
              line: 59,
              column: 34
            }
          }],
          line: 58
        },
        '4': {
          loc: {
            start: {
              line: 67,
              column: 2
            },
            end: {
              line: 69,
              column: 3
            }
          },
          type: 'if',
          locations: [{
            start: {
              line: 67,
              column: 2
            },
            end: {
              line: 69,
              column: 3
            }
          }, {
            start: {
              line: 67,
              column: 2
            },
            end: {
              line: 69,
              column: 3
            }
          }],
          line: 67
        },
        '5': {
          loc: {
            start: {
              line: 71,
              column: 2
            },
            end: {
              line: 73,
              column: 3
            }
          },
          type: 'if',
          locations: [{
            start: {
              line: 71,
              column: 2
            },
            end: {
              line: 73,
              column: 3
            }
          }, {
            start: {
              line: 71,
              column: 2
            },
            end: {
              line: 73,
              column: 3
            }
          }],
          line: 71
        },
        '6': {
          loc: {
            start: {
              line: 76,
              column: 4
            },
            end: {
              line: 83,
              column: 5
            }
          },
          type: 'if',
          locations: [{
            start: {
              line: 76,
              column: 4
            },
            end: {
              line: 83,
              column: 5
            }
          }, {
            start: {
              line: 76,
              column: 4
            },
            end: {
              line: 83,
              column: 5
            }
          }],
          line: 76
        }
      },
      s: {
        '0': 0,
        '1': 0,
        '2': 0,
        '3': 0,
        '4': 0,
        '5': 0,
        '6': 0,
        '7': 0,
        '8': 0,
        '9': 0,
        '10': 0,
        '11': 0,
        '12': 0,
        '13': 0,
        '14': 0,
        '15': 0,
        '16': 0,
        '17': 0,
        '18': 0,
        '19': 0,
        '20': 0,
        '21': 0,
        '22': 0,
        '23': 0,
        '24': 0
      },
      f: {
        '0': 0,
        '1': 0,
        '2': 0,
        '3': 0,
        '4': 0
      },
      b: {
        '0': [0],
        '1': [0],
        '2': [0, 0],
        '3': [0, 0, 0, 0],
        '4': [0, 0],
        '5': [0, 0],
        '6': [0, 0]
      },
      _coverageSchema: '332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'
    },
        coverage = global[gcv] || (global[gcv] = {});

    if (coverage[path] && coverage[path].hash === hash) {
      return coverage[path];
    }

    coverageData.hash = hash;
    return coverage[path] = coverageData;
  }();
  cov_2kl9sn0jen.s[0]++;

  var SegmentURLToSegmentObject = function SegmentURLToSegmentObject(attributes, segmentUrl) {
    cov_2kl9sn0jen.f[0]++;

    var _ref = (cov_2kl9sn0jen.s[1]++, attributes),
        baseUrl = _ref.baseUrl,
        _ref$initialization = _ref.initialization,
        initialization = _ref$initialization === void 0 ? (cov_2kl9sn0jen.b[0][0]++, {}) : _ref$initialization;

    var initSegment = (cov_2kl9sn0jen.s[2]++, urlTypeToSegment({
      baseUrl: baseUrl,
      source: initialization.sourceURL,
      range: initialization.range
    }));
    var segment = (cov_2kl9sn0jen.s[3]++, urlTypeToSegment({
      baseUrl: baseUrl,
      source: segmentUrl.media,
      range: segmentUrl.mediaRange
    }));
    cov_2kl9sn0jen.s[4]++;
    segment.map = initSegment;
    cov_2kl9sn0jen.s[5]++;
    return segment;
  };

  cov_2kl9sn0jen.s[6]++;
  var segmentsFromList = function segmentsFromList(attributes, segmentTimeline) {
    cov_2kl9sn0jen.f[1]++;

    var _ref2 = (cov_2kl9sn0jen.s[7]++, attributes),
        duration = _ref2.duration,
        _ref2$segmentUrls = _ref2.segmentUrls,
        segmentUrls = _ref2$segmentUrls === void 0 ? (cov_2kl9sn0jen.b[1][0]++, []) : _ref2$segmentUrls;

    cov_2kl9sn0jen.s[8]++;

    if ((cov_2kl9sn0jen.b[3][0]++, !duration) && (cov_2kl9sn0jen.b[3][1]++, !segmentTimeline) || (cov_2kl9sn0jen.b[3][2]++, duration) && (cov_2kl9sn0jen.b[3][3]++, segmentTimeline)) {
      cov_2kl9sn0jen.b[2][0]++;
      cov_2kl9sn0jen.s[9]++;
      throw new Error(errors.SEGMENT_TIME_UNSPECIFIED);
    } else {
      cov_2kl9sn0jen.b[2][1]++;
    }

    var segmentUrlMap = (cov_2kl9sn0jen.s[10]++, segmentUrls.map(function (segmentUrlObject) {
      cov_2kl9sn0jen.f[2]++;
      cov_2kl9sn0jen.s[11]++;
      return SegmentURLToSegmentObject(attributes, segmentUrlObject);
    }));
    var segmentTimeInfo;
    cov_2kl9sn0jen.s[12]++;

    if (duration) {
      cov_2kl9sn0jen.b[4][0]++;
      cov_2kl9sn0jen.s[13]++;
      segmentTimeInfo = parseByDuration(attributes);
    } else {
      cov_2kl9sn0jen.b[4][1]++;
    }

    cov_2kl9sn0jen.s[14]++;

    if (segmentTimeline) {
      cov_2kl9sn0jen.b[5][0]++;
      cov_2kl9sn0jen.s[15]++;
      segmentTimeInfo = parseByTimeline(attributes, segmentTimeline);
    } else {
      cov_2kl9sn0jen.b[5][1]++;
    }

    var segments = (cov_2kl9sn0jen.s[16]++, segmentTimeInfo.map(function (segmentTime, index) {
      cov_2kl9sn0jen.f[3]++;
      cov_2kl9sn0jen.s[17]++;

      if (segmentUrlMap[index]) {
        cov_2kl9sn0jen.b[6][0]++;
        var segment = (cov_2kl9sn0jen.s[18]++, segmentUrlMap[index]);
        cov_2kl9sn0jen.s[19]++;
        segment.timeline = segmentTime.timeline;
        cov_2kl9sn0jen.s[20]++;
        segment.duration = segmentTime.duration;
        cov_2kl9sn0jen.s[21]++;
        segment.number = segmentTime.number;
        cov_2kl9sn0jen.s[22]++;
        return segment;
      } else {
        cov_2kl9sn0jen.b[6][1]++;
      }
    }).filter(function (segment) {
      cov_2kl9sn0jen.f[4]++;
      cov_2kl9sn0jen.s[23]++;
      return segment;
    }));
    cov_2kl9sn0jen.s[24]++;
    return segments;
  };

  var cov_i85vjvkkt = function () {
    var path = '/Users/gkatsevman/p/mpd-parser/src/toPlaylists.js',
        hash = '2fb3d390480897cf66d82de9eb6fe6b531b42782',
        Function = function () {}.constructor,
        global = new Function('return this')(),
        gcv = '__coverage__',
        coverageData = {
      path: '/Users/gkatsevman/p/mpd-parser/src/toPlaylists.js',
      statementMap: {
        '0': {
          start: {
            line: 6,
            column: 32
          },
          end: {
            line: 58,
            column: 1
          }
        },
        '1': {
          start: {
            line: 10,
            column: 2
          },
          end: {
            line: 19,
            column: 3
          }
        },
        '2': {
          start: {
            line: 11,
            column: 4
          },
          end: {
            line: 11,
            column: 38
          }
        },
        '3': {
          start: {
            line: 12,
            column: 4
          },
          end: {
            line: 12,
            column: 64
          }
        },
        '4': {
          start: {
            line: 13,
            column: 9
          },
          end: {
            line: 19,
            column: 3
          }
        },
        '5': {
          start: {
            line: 14,
            column: 4
          },
          end: {
            line: 14,
            column: 34
          }
        },
        '6': {
          start: {
            line: 15,
            column: 4
          },
          end: {
            line: 15,
            column: 60
          }
        },
        '7': {
          start: {
            line: 16,
            column: 9
          },
          end: {
            line: 19,
            column: 3
          }
        },
        '8': {
          start: {
            line: 17,
            column: 4
          },
          end: {
            line: 17,
            column: 34
          }
        },
        '9': {
          start: {
            line: 18,
            column: 4
          },
          end: {
            line: 18,
            column: 60
          }
        },
        '10': {
          start: {
            line: 21,
            column: 23
          },
          end: {
            line: 23,
            column: 3
          }
        },
        '11': {
          start: {
            line: 25,
            column: 2
          },
          end: {
            line: 27,
            column: 3
          }
        },
        '12': {
          start: {
            line: 26,
            column: 4
          },
          end: {
            line: 26,
            column: 24
          }
        },
        '13': {
          start: {
            line: 29,
            column: 19
          },
          end: {
            line: 29,
            column: 70
          }
        },
        '14': {
          start: {
            line: 34,
            column: 2
          },
          end: {
            line: 46,
            column: 3
          }
        },
        '15': {
          start: {
            line: 35,
            column: 40
          },
          end: {
            line: 35,
            column: 57
          }
        },
        '16': {
          start: {
            line: 37,
            column: 4
          },
          end: {
            line: 37,
            column: 54
          }
        },
        '17': {
          start: {
            line: 38,
            column: 9
          },
          end: {
            line: 46,
            column: 3
          }
        },
        '18': {
          start: {
            line: 41,
            column: 4
          },
          end: {
            line: 43,
            column: 10
          }
        },
        '19': {
          start: {
            line: 42,
            column: 6
          },
          end: {
            line: 42,
            column: 56
          }
        },
        '20': {
          start: {
            line: 45,
            column: 4
          },
          end: {
            line: 45,
            column: 35
          }
        },
        '21': {
          start: {
            line: 48,
            column: 2
          },
          end: {
            line: 48,
            column: 46
          }
        },
        '22': {
          start: {
            line: 49,
            column: 2
          },
          end: {
            line: 49,
            column: 35
          }
        },
        '23': {
          start: {
            line: 52,
            column: 2
          },
          end: {
            line: 55,
            column: 3
          }
        },
        '24': {
          start: {
            line: 53,
            column: 4
          },
          end: {
            line: 53,
            column: 36
          }
        },
        '25': {
          start: {
            line: 54,
            column: 4
          },
          end: {
            line: 54,
            column: 31
          }
        },
        '26': {
          start: {
            line: 57,
            column: 2
          },
          end: {
            line: 57,
            column: 22
          }
        },
        '27': {
          start: {
            line: 60,
            column: 27
          },
          end: {
            line: 60,
            column: 85
          }
        },
        '28': {
          start: {
            line: 60,
            column: 48
          },
          end: {
            line: 60,
            column: 85
          }
        }
      },
      fnMap: {
        '0': {
          name: '(anonymous_0)',
          decl: {
            start: {
              line: 6,
              column: 32
            },
            end: {
              line: 6,
              column: 33
            }
          },
          loc: {
            start: {
              line: 6,
              column: 65
            },
            end: {
              line: 58,
              column: 1
            }
          },
          line: 6
        },
        '1': {
          name: '(anonymous_1)',
          decl: {
            start: {
              line: 41,
              column: 49
            },
            end: {
              line: 41,
              column: 50
            }
          },
          loc: {
            start: {
              line: 41,
              column: 67
            },
            end: {
              line: 43,
              column: 5
            }
          },
          line: 41
        },
        '2': {
          name: '(anonymous_2)',
          decl: {
            start: {
              line: 60,
              column: 27
            },
            end: {
              line: 60,
              column: 28
            }
          },
          loc: {
            start: {
              line: 60,
              column: 48
            },
            end: {
              line: 60,
              column: 85
            }
          },
          line: 60
        }
      },
      branchMap: {
        '0': {
          loc: {
            start: {
              line: 10,
              column: 2
            },
            end: {
              line: 19,
              column: 3
            }
          },
          type: 'if',
          locations: [{
            start: {
              line: 10,
              column: 2
            },
            end: {
              line: 19,
              column: 3
            }
          }, {
            start: {
              line: 10,
              column: 2
            },
            end: {
              line: 19,
              column: 3
            }
          }],
          line: 10
        },
        '1': {
          loc: {
            start: {
              line: 13,
              column: 9
            },
            end: {
              line: 19,
              column: 3
            }
          },
          type: 'if',
          locations: [{
            start: {
              line: 13,
              column: 9
            },
            end: {
              line: 19,
              column: 3
            }
          }, {
            start: {
              line: 13,
              column: 9
            },
            end: {
              line: 19,
              column: 3
            }
          }],
          line: 13
        },
        '2': {
          loc: {
            start: {
              line: 16,
              column: 9
            },
            end: {
              line: 19,
              column: 3
            }
          },
          type: 'if',
          locations: [{
            start: {
              line: 16,
              column: 9
            },
            end: {
              line: 19,
              column: 3
            }
          }, {
            start: {
              line: 16,
              column: 9
            },
            end: {
              line: 19,
              column: 3
            }
          }],
          line: 16
        },
        '3': {
          loc: {
            start: {
              line: 25,
              column: 2
            },
            end: {
              line: 27,
              column: 3
            }
          },
          type: 'if',
          locations: [{
            start: {
              line: 25,
              column: 2
            },
            end: {
              line: 27,
              column: 3
            }
          }, {
            start: {
              line: 25,
              column: 2
            },
            end: {
              line: 27,
              column: 3
            }
          }],
          line: 25
        },
        '4': {
          loc: {
            start: {
              line: 34,
              column: 2
            },
            end: {
              line: 46,
              column: 3
            }
          },
          type: 'if',
          locations: [{
            start: {
              line: 34,
              column: 2
            },
            end: {
              line: 46,
              column: 3
            }
          }, {
            start: {
              line: 34,
              column: 2
            },
            end: {
              line: 46,
              column: 3
            }
          }],
          line: 34
        },
        '5': {
          loc: {
            start: {
              line: 35,
              column: 22
            },
            end: {
              line: 35,
              column: 35
            }
          },
          type: 'default-arg',
          locations: [{
            start: {
              line: 35,
              column: 34
            },
            end: {
              line: 35,
              column: 35
            }
          }],
          line: 35
        },
        '6': {
          loc: {
            start: {
              line: 38,
              column: 9
            },
            end: {
              line: 46,
              column: 3
            }
          },
          type: 'if',
          locations: [{
            start: {
              line: 38,
              column: 9
            },
            end: {
              line: 46,
              column: 3
            }
          }, {
            start: {
              line: 38,
              column: 9
            },
            end: {
              line: 46,
              column: 3
            }
          }],
          line: 38
        },
        '7': {
          loc: {
            start: {
              line: 52,
              column: 2
            },
            end: {
              line: 55,
              column: 3
            }
          },
          type: 'if',
          locations: [{
            start: {
              line: 52,
              column: 2
            },
            end: {
              line: 55,
              column: 3
            }
          }, {
            start: {
              line: 52,
              column: 2
            },
            end: {
              line: 55,
              column: 3
            }
          }],
          line: 52
        },
        '8': {
          loc: {
            start: {
              line: 52,
              column: 6
            },
            end: {
              line: 52,
              column: 54
            }
          },
          type: 'binary-expr',
          locations: [{
            start: {
              line: 52,
              column: 6
            },
            end: {
              line: 52,
              column: 22
            }
          }, {
            start: {
              line: 52,
              column: 26
            },
            end: {
              line: 52,
              column: 54
            }
          }],
          line: 52
        }
      },
      s: {
        '0': 0,
        '1': 0,
        '2': 0,
        '3': 0,
        '4': 0,
        '5': 0,
        '6': 0,
        '7': 0,
        '8': 0,
        '9': 0,
        '10': 0,
        '11': 0,
        '12': 0,
        '13': 0,
        '14': 0,
        '15': 0,
        '16': 0,
        '17': 0,
        '18': 0,
        '19': 0,
        '20': 0,
        '21': 0,
        '22': 0,
        '23': 0,
        '24': 0,
        '25': 0,
        '26': 0,
        '27': 0,
        '28': 0
      },
      f: {
        '0': 0,
        '1': 0,
        '2': 0
      },
      b: {
        '0': [0, 0],
        '1': [0, 0],
        '2': [0, 0],
        '3': [0, 0],
        '4': [0, 0],
        '5': [0],
        '6': [0, 0],
        '7': [0, 0],
        '8': [0, 0]
      },
      _coverageSchema: '332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'
    },
        coverage = global[gcv] || (global[gcv] = {});

    if (coverage[path] && coverage[path].hash === hash) {
      return coverage[path];
    }

    coverageData.hash = hash;
    return coverage[path] = coverageData;
  }();
  cov_i85vjvkkt.s[0]++;
  var generateSegments = function generateSegments(_ref) {
    var attributes = _ref.attributes,
        segmentInfo = _ref.segmentInfo;
    cov_i85vjvkkt.f[0]++;
    var segmentAttributes;
    var segmentsFn;
    cov_i85vjvkkt.s[1]++;

    if (segmentInfo.template) {
      cov_i85vjvkkt.b[0][0]++;
      cov_i85vjvkkt.s[2]++;
      segmentsFn = segmentsFromTemplate;
      cov_i85vjvkkt.s[3]++;
      segmentAttributes = merge(attributes, segmentInfo.template);
    } else {
      cov_i85vjvkkt.b[0][1]++;
      cov_i85vjvkkt.s[4]++;

      if (segmentInfo.base) {
        cov_i85vjvkkt.b[1][0]++;
        cov_i85vjvkkt.s[5]++;
        segmentsFn = segmentsFromBase;
        cov_i85vjvkkt.s[6]++;
        segmentAttributes = merge(attributes, segmentInfo.base);
      } else {
        cov_i85vjvkkt.b[1][1]++;
        cov_i85vjvkkt.s[7]++;

        if (segmentInfo.list) {
          cov_i85vjvkkt.b[2][0]++;
          cov_i85vjvkkt.s[8]++;
          segmentsFn = segmentsFromList;
          cov_i85vjvkkt.s[9]++;
          segmentAttributes = merge(attributes, segmentInfo.list);
        } else {
          cov_i85vjvkkt.b[2][1]++;
        }
      }
    }

    var segmentsInfo = (cov_i85vjvkkt.s[10]++, {
      attributes: attributes
    });
    cov_i85vjvkkt.s[11]++;

    if (!segmentsFn) {
      cov_i85vjvkkt.b[3][0]++;
      cov_i85vjvkkt.s[12]++;
      return segmentsInfo;
    } else {
      cov_i85vjvkkt.b[3][1]++;
    }

    var segments = (cov_i85vjvkkt.s[13]++, segmentsFn(segmentAttributes, segmentInfo.timeline));
    cov_i85vjvkkt.s[14]++;

    if (segmentAttributes.duration) {
      cov_i85vjvkkt.b[4][0]++;

      var _ref2 = (cov_i85vjvkkt.s[15]++, segmentAttributes),
          duration = _ref2.duration,
          _ref2$timescale = _ref2.timescale,
          timescale = _ref2$timescale === void 0 ? (cov_i85vjvkkt.b[5][0]++, 1) : _ref2$timescale;

      cov_i85vjvkkt.s[16]++;
      segmentAttributes.duration = duration / timescale;
    } else {
      cov_i85vjvkkt.b[4][1]++;
      cov_i85vjvkkt.s[17]++;

      if (segments.length) {
        cov_i85vjvkkt.b[6][0]++;
        cov_i85vjvkkt.s[18]++;
        segmentAttributes.duration = segments.reduce(function (max, segment) {
          cov_i85vjvkkt.f[1]++;
          cov_i85vjvkkt.s[19]++;
          return Math.max(max, Math.ceil(segment.duration));
        }, 0);
      } else {
        cov_i85vjvkkt.b[6][1]++;
        cov_i85vjvkkt.s[20]++;
        segmentAttributes.duration = 0;
      }
    }

    cov_i85vjvkkt.s[21]++;
    segmentsInfo.attributes = segmentAttributes;
    cov_i85vjvkkt.s[22]++;
    segmentsInfo.segments = segments;
    cov_i85vjvkkt.s[23]++;

    if ((cov_i85vjvkkt.b[8][0]++, segmentInfo.base) && (cov_i85vjvkkt.b[8][1]++, segmentAttributes.indexRange)) {
      cov_i85vjvkkt.b[7][0]++;
      cov_i85vjvkkt.s[24]++;
      segmentsInfo.sidx = segments[0];
      cov_i85vjvkkt.s[25]++;
      segmentsInfo.segments = [];
    } else {
      cov_i85vjvkkt.b[7][1]++;
    }

    cov_i85vjvkkt.s[26]++;
    return segmentsInfo;
  };
  cov_i85vjvkkt.s[27]++;
  var toPlaylists = function toPlaylists(representations) {
    cov_i85vjvkkt.f[2]++;
    cov_i85vjvkkt.s[28]++;
    return representations.map(generateSegments);
  };

  var cov_19vi9zv32 = function () {
    var path = '/Users/gkatsevman/p/mpd-parser/src/utils/xml.js',
        hash = '863d5904be78154db2137db3d9181a8ef2ec1d3b',
        Function = function () {}.constructor,
        global = new Function('return this')(),
        gcv = '__coverage__',
        coverageData = {
      path: '/Users/gkatsevman/p/mpd-parser/src/utils/xml.js',
      statementMap: {
        '0': {
          start: {
            line: 3,
            column: 28
          },
          end: {
            line: 4,
            column: 66
          }
        },
        '1': {
          start: {
            line: 4,
            column: 2
          },
          end: {
            line: 4,
            column: 66
          }
        },
        '2': {
          start: {
            line: 4,
            column: 49
          },
          end: {
            line: 4,
            column: 65
          }
        },
        '3': {
          start: {
            line: 6,
            column: 26
          },
          end: {
            line: 6,
            column: 63
          }
        },
        '4': {
          start: {
            line: 6,
            column: 37
          },
          end: {
            line: 6,
            column: 63
          }
        }
      },
      fnMap: {
        '0': {
          name: '(anonymous_0)',
          decl: {
            start: {
              line: 3,
              column: 28
            },
            end: {
              line: 3,
              column: 29
            }
          },
          loc: {
            start: {
              line: 4,
              column: 2
            },
            end: {
              line: 4,
              column: 66
            }
          },
          line: 4
        },
        '1': {
          name: '(anonymous_1)',
          decl: {
            start: {
              line: 4,
              column: 34
            },
            end: {
              line: 4,
              column: 35
            }
          },
          loc: {
            start: {
              line: 4,
              column: 49
            },
            end: {
              line: 4,
              column: 65
            }
          },
          line: 4
        },
        '2': {
          name: '(anonymous_2)',
          decl: {
            start: {
              line: 6,
              column: 26
            },
            end: {
              line: 6,
              column: 27
            }
          },
          loc: {
            start: {
              line: 6,
              column: 37
            },
            end: {
              line: 6,
              column: 63
            }
          },
          line: 6
        }
      },
      branchMap: {},
      s: {
        '0': 0,
        '1': 0,
        '2': 0,
        '3': 0,
        '4': 0
      },
      f: {
        '0': 0,
        '1': 0,
        '2': 0
      },
      b: {},
      _coverageSchema: '332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'
    },
        coverage = global[gcv] || (global[gcv] = {});

    if (coverage[path] && coverage[path].hash === hash) {
      return coverage[path];
    }

    coverageData.hash = hash;
    return coverage[path] = coverageData;
  }();
  cov_19vi9zv32.s[0]++;
  var findChildren = function findChildren(element, name) {
    cov_19vi9zv32.f[0]++;
    cov_19vi9zv32.s[1]++;
    return from(element.childNodes).filter(function (_ref) {
      var tagName = _ref.tagName;
      cov_19vi9zv32.f[1]++;
      cov_19vi9zv32.s[2]++;
      return tagName === name;
    });
  };
  cov_19vi9zv32.s[3]++;
  var getContent = function getContent(element) {
    cov_19vi9zv32.f[2]++;
    cov_19vi9zv32.s[4]++;
    return element.textContent.trim();
  };

  var cov_2nynyr80vk = function () {
    var path = '/Users/gkatsevman/p/mpd-parser/src/utils/time.js',
        hash = 'c1b070e09464e323175448ae40aa5b1b737d6116',
        Function = function () {}.constructor,
        global = new Function('return this')(),
        gcv = '__coverage__',
        coverageData = {
      path: '/Users/gkatsevman/p/mpd-parser/src/utils/time.js',
      statementMap: {
        '0': {
          start: {
            line: 1,
            column: 29
          },
          end: {
            line: 25,
            column: 1
          }
        },
        '1': {
          start: {
            line: 2,
            column: 26
          },
          end: {
            line: 2,
            column: 44
          }
        },
        '2': {
          start: {
            line: 3,
            column: 27
          },
          end: {
            line: 3,
            column: 44
          }
        },
        '3': {
          start: {
            line: 4,
            column: 25
          },
          end: {
            line: 4,
            column: 37
          }
        },
        '4': {
          start: {
            line: 5,
            column: 26
          },
          end: {
            line: 5,
            column: 33
          }
        },
        '5': {
          start: {
            line: 6,
            column: 25
          },
          end: {
            line: 6,
            column: 27
          }
        },
        '6': {
          start: {
            line: 10,
            column: 4
          },
          end: {
            line: 10,
            column: 82
          }
        },
        '7': {
          start: {
            line: 11,
            column: 16
          },
          end: {
            line: 11,
            column: 39
          }
        },
        '8': {
          start: {
            line: 13,
            column: 2
          },
          end: {
            line: 15,
            column: 3
          }
        },
        '9': {
          start: {
            line: 14,
            column: 4
          },
          end: {
            line: 14,
            column: 13
          }
        },
        '10': {
          start: {
            line: 17,
            column: 51
          },
          end: {
            line: 17,
            column: 65
          }
        },
        '11': {
          start: {
            line: 19,
            column: 2
          },
          end: {
            line: 24,
            column: 29
          }
        },
        '12': {
          start: {
            line: 27,
            column: 25
          },
          end: {
            line: 39,
            column: 1
          }
        },
        '13': {
          start: {
            line: 30,
            column: 20
          },
          end: {
            line: 30,
            column: 55
          }
        },
        '14': {
          start: {
            line: 34,
            column: 2
          },
          end: {
            line: 36,
            column: 3
          }
        },
        '15': {
          start: {
            line: 35,
            column: 4
          },
          end: {
            line: 35,
            column: 15
          }
        },
        '16': {
          start: {
            line: 38,
            column: 2
          },
          end: {
            line: 38,
            column: 25
          }
        }
      },
      fnMap: {
        '0': {
          name: '(anonymous_0)',
          decl: {
            start: {
              line: 1,
              column: 29
            },
            end: {
              line: 1,
              column: 30
            }
          },
          loc: {
            start: {
              line: 1,
              column: 38
            },
            end: {
              line: 25,
              column: 1
            }
          },
          line: 1
        },
        '1': {
          name: '(anonymous_1)',
          decl: {
            start: {
              line: 27,
              column: 25
            },
            end: {
              line: 27,
              column: 26
            }
          },
          loc: {
            start: {
              line: 27,
              column: 34
            },
            end: {
              line: 39,
              column: 1
            }
          },
          line: 27
        }
      },
      branchMap: {
        '0': {
          loc: {
            start: {
              line: 13,
              column: 2
            },
            end: {
              line: 15,
              column: 3
            }
          },
          type: 'if',
          locations: [{
            start: {
              line: 13,
              column: 2
            },
            end: {
              line: 15,
              column: 3
            }
          }, {
            start: {
              line: 13,
              column: 2
            },
            end: {
              line: 15,
              column: 3
            }
          }],
          line: 13
        },
        '1': {
          loc: {
            start: {
              line: 19,
              column: 21
            },
            end: {
              line: 19,
              column: 30
            }
          },
          type: 'binary-expr',
          locations: [{
            start: {
              line: 19,
              column: 21
            },
            end: {
              line: 19,
              column: 25
            }
          }, {
            start: {
              line: 19,
              column: 29
            },
            end: {
              line: 19,
              column: 30
            }
          }],
          line: 19
        },
        '2': {
          loc: {
            start: {
              line: 20,
              column: 15
            },
            end: {
              line: 20,
              column: 25
            }
          },
          type: 'binary-expr',
          locations: [{
            start: {
              line: 20,
              column: 15
            },
            end: {
              line: 20,
              column: 20
            }
          }, {
            start: {
              line: 20,
              column: 24
            },
            end: {
              line: 20,
              column: 25
            }
          }],
          line: 20
        },
        '3': {
          loc: {
            start: {
              line: 21,
              column: 15
            },
            end: {
              line: 21,
              column: 23
            }
          },
          type: 'binary-expr',
          locations: [{
            start: {
              line: 21,
              column: 15
            },
            end: {
              line: 21,
              column: 18
            }
          }, {
            start: {
              line: 21,
              column: 22
            },
            end: {
              line: 21,
              column: 23
            }
          }],
          line: 21
        },
        '4': {
          loc: {
            start: {
              line: 22,
              column: 15
            },
            end: {
              line: 22,
              column: 24
            }
          },
          type: 'binary-expr',
          locations: [{
            start: {
              line: 22,
              column: 15
            },
            end: {
              line: 22,
              column: 19
            }
          }, {
            start: {
              line: 22,
              column: 23
            },
            end: {
              line: 22,
              column: 24
            }
          }],
          line: 22
        },
        '5': {
          loc: {
            start: {
              line: 23,
              column: 15
            },
            end: {
              line: 23,
              column: 26
            }
          },
          type: 'binary-expr',
          locations: [{
            start: {
              line: 23,
              column: 15
            },
            end: {
              line: 23,
              column: 21
            }
          }, {
            start: {
              line: 23,
              column: 25
            },
            end: {
              line: 23,
              column: 26
            }
          }],
          line: 23
        },
        '6': {
          loc: {
            start: {
              line: 24,
              column: 15
            },
            end: {
              line: 24,
              column: 26
            }
          },
          type: 'binary-expr',
          locations: [{
            start: {
              line: 24,
              column: 15
            },
            end: {
              line: 24,
              column: 21
            }
          }, {
            start: {
              line: 24,
              column: 25
            },
            end: {
              line: 24,
              column: 26
            }
          }],
          line: 24
        },
        '7': {
          loc: {
            start: {
              line: 34,
              column: 2
            },
            end: {
              line: 36,
              column: 3
            }
          },
          type: 'if',
          locations: [{
            start: {
              line: 34,
              column: 2
            },
            end: {
              line: 36,
              column: 3
            }
          }, {
            start: {
              line: 34,
              column: 2
            },
            end: {
              line: 36,
              column: 3
            }
          }],
          line: 34
        }
      },
      s: {
        '0': 0,
        '1': 0,
        '2': 0,
        '3': 0,
        '4': 0,
        '5': 0,
        '6': 0,
        '7': 0,
        '8': 0,
        '9': 0,
        '10': 0,
        '11': 0,
        '12': 0,
        '13': 0,
        '14': 0,
        '15': 0,
        '16': 0
      },
      f: {
        '0': 0,
        '1': 0
      },
      b: {
        '0': [0, 0],
        '1': [0, 0],
        '2': [0, 0],
        '3': [0, 0],
        '4': [0, 0],
        '5': [0, 0],
        '6': [0, 0],
        '7': [0, 0]
      },
      _coverageSchema: '332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'
    },
        coverage = global[gcv] || (global[gcv] = {});

    if (coverage[path] && coverage[path].hash === hash) {
      return coverage[path];
    }

    coverageData.hash = hash;
    return coverage[path] = coverageData;
  }();

  cov_2nynyr80vk.s[0]++;
  var parseDuration = function parseDuration(str) {
    cov_2nynyr80vk.f[0]++;
    var SECONDS_IN_YEAR = (cov_2nynyr80vk.s[1]++, 365 * 24 * 60 * 60);
    var SECONDS_IN_MONTH = (cov_2nynyr80vk.s[2]++, 30 * 24 * 60 * 60);
    var SECONDS_IN_DAY = (cov_2nynyr80vk.s[3]++, 24 * 60 * 60);
    var SECONDS_IN_HOUR = (cov_2nynyr80vk.s[4]++, 60 * 60);
    var SECONDS_IN_MIN = (cov_2nynyr80vk.s[5]++, 60);
    var durationRegex = (cov_2nynyr80vk.s[6]++, /P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/);
    var match = (cov_2nynyr80vk.s[7]++, durationRegex.exec(str));
    cov_2nynyr80vk.s[8]++;

    if (!match) {
      cov_2nynyr80vk.b[0][0]++;
      cov_2nynyr80vk.s[9]++;
      return 0;
    } else {
      cov_2nynyr80vk.b[0][1]++;
    }

    var _ref = (cov_2nynyr80vk.s[10]++, match.slice(1)),
        year = _ref[0],
        month = _ref[1],
        day = _ref[2],
        hour = _ref[3],
        minute = _ref[4],
        second = _ref[5];

    cov_2nynyr80vk.s[11]++;
    return parseFloat((cov_2nynyr80vk.b[1][0]++, year) || (cov_2nynyr80vk.b[1][1]++, 0)) * SECONDS_IN_YEAR + parseFloat((cov_2nynyr80vk.b[2][0]++, month) || (cov_2nynyr80vk.b[2][1]++, 0)) * SECONDS_IN_MONTH + parseFloat((cov_2nynyr80vk.b[3][0]++, day) || (cov_2nynyr80vk.b[3][1]++, 0)) * SECONDS_IN_DAY + parseFloat((cov_2nynyr80vk.b[4][0]++, hour) || (cov_2nynyr80vk.b[4][1]++, 0)) * SECONDS_IN_HOUR + parseFloat((cov_2nynyr80vk.b[5][0]++, minute) || (cov_2nynyr80vk.b[5][1]++, 0)) * SECONDS_IN_MIN + parseFloat((cov_2nynyr80vk.b[6][0]++, second) || (cov_2nynyr80vk.b[6][1]++, 0));
  };
  cov_2nynyr80vk.s[12]++;
  var parseDate = function parseDate(str) {
    cov_2nynyr80vk.f[1]++;
    var dateRegex = (cov_2nynyr80vk.s[13]++, /^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/);
    cov_2nynyr80vk.s[14]++;

    if (dateRegex.test(str)) {
      cov_2nynyr80vk.b[7][0]++;
      cov_2nynyr80vk.s[15]++;
      str += 'Z';
    } else {
      cov_2nynyr80vk.b[7][1]++;
    }

    cov_2nynyr80vk.s[16]++;
    return Date.parse(str);
  };

  var cov_1zzx0asslc = function () {
    var path = '/Users/gkatsevman/p/mpd-parser/src/parseAttributes.js',
        hash = '770585ae7e7fc5a515a60a656d2a33e36a64b73a',
        Function = function () {}.constructor,
        global = new Function('return this')(),
        gcv = '__coverage__',
        coverageData = {
      path: '/Users/gkatsevman/p/mpd-parser/src/parseAttributes.js',
      statementMap: {
        '0': {
          start: {
            line: 5,
            column: 23
          },
          end: {
            line: 204,
            column: 1
          }
        },
        '1': {
          start: {
            line: 16,
            column: 4
          },
          end: {
            line: 16,
            column: 32
          }
        },
        '2': {
          start: {
            line: 30,
            column: 4
          },
          end: {
            line: 30,
            column: 35
          }
        },
        '3': {
          start: {
            line: 43,
            column: 4
          },
          end: {
            line: 43,
            column: 32
          }
        },
        '4': {
          start: {
            line: 56,
            column: 4
          },
          end: {
            line: 56,
            column: 32
          }
        },
        '5': {
          start: {
            line: 69,
            column: 4
          },
          end: {
            line: 69,
            column: 32
          }
        },
        '6': {
          start: {
            line: 81,
            column: 4
          },
          end: {
            line: 81,
            column: 31
          }
        },
        '7': {
          start: {
            line: 93,
            column: 4
          },
          end: {
            line: 93,
            column: 31
          }
        },
        '8': {
          start: {
            line: 105,
            column: 4
          },
          end: {
            line: 105,
            column: 31
          }
        },
        '9': {
          start: {
            line: 117,
            column: 4
          },
          end: {
            line: 117,
            column: 31
          }
        },
        '10': {
          start: {
            line: 129,
            column: 4
          },
          end: {
            line: 129,
            column: 31
          }
        },
        '11': {
          start: {
            line: 145,
            column: 24
          },
          end: {
            line: 145,
            column: 43
          }
        },
        '12': {
          start: {
            line: 147,
            column: 4
          },
          end: {
            line: 149,
            column: 5
          }
        },
        '13': {
          start: {
            line: 148,
            column: 6
          },
          end: {
            line: 148,
            column: 34
          }
        },
        '14': {
          start: {
            line: 151,
            column: 4
          },
          end: {
            line: 151,
            column: 23
          }
        },
        '15': {
          start: {
            line: 163,
            column: 4
          },
          end: {
            line: 163,
            column: 31
          }
        },
        '16': {
          start: {
            line: 176,
            column: 4
          },
          end: {
            line: 176,
            column: 31
          }
        },
        '17': {
          start: {
            line: 189,
            column: 4
          },
          end: {
            line: 189,
            column: 31
          }
        },
        '18': {
          start: {
            line: 202,
            column: 4
          },
          end: {
            line: 202,
            column: 17
          }
        },
        '19': {
          start: {
            line: 215,
            column: 31
          },
          end: {
            line: 228,
            column: 1
          }
        },
        '20': {
          start: {
            line: 216,
            column: 2
          },
          end: {
            line: 218,
            column: 3
          }
        },
        '21': {
          start: {
            line: 217,
            column: 4
          },
          end: {
            line: 217,
            column: 14
          }
        },
        '22': {
          start: {
            line: 220,
            column: 2
          },
          end: {
            line: 227,
            column: 11
          }
        },
        '23': {
          start: {
            line: 222,
            column: 22
          },
          end: {
            line: 222,
            column: 56
          }
        },
        '24': {
          start: {
            line: 224,
            column: 6
          },
          end: {
            line: 224,
            column: 35
          }
        },
        '25': {
          start: {
            line: 226,
            column: 6
          },
          end: {
            line: 226,
            column: 15
          }
        }
      },
      fnMap: {
        '0': {
          name: '(anonymous_0)',
          decl: {
            start: {
              line: 215,
              column: 31
            },
            end: {
              line: 215,
              column: 32
            }
          },
          loc: {
            start: {
              line: 215,
              column: 39
            },
            end: {
              line: 228,
              column: 1
            }
          },
          line: 215
        },
        '1': {
          name: '(anonymous_1)',
          decl: {
            start: {
              line: 221,
              column: 12
            },
            end: {
              line: 221,
              column: 13
            }
          },
          loc: {
            start: {
              line: 221,
              column: 22
            },
            end: {
              line: 227,
              column: 5
            }
          },
          line: 221
        }
      },
      branchMap: {
        '0': {
          loc: {
            start: {
              line: 147,
              column: 4
            },
            end: {
              line: 149,
              column: 5
            }
          },
          type: 'if',
          locations: [{
            start: {
              line: 147,
              column: 4
            },
            end: {
              line: 149,
              column: 5
            }
          }, {
            start: {
              line: 147,
              column: 4
            },
            end: {
              line: 149,
              column: 5
            }
          }],
          line: 147
        },
        '1': {
          loc: {
            start: {
              line: 216,
              column: 2
            },
            end: {
              line: 218,
              column: 3
            }
          },
          type: 'if',
          locations: [{
            start: {
              line: 216,
              column: 2
            },
            end: {
              line: 218,
              column: 3
            }
          }, {
            start: {
              line: 216,
              column: 2
            },
            end: {
              line: 218,
              column: 3
            }
          }],
          line: 216
        },
        '2': {
          loc: {
            start: {
              line: 216,
              column: 8
            },
            end: {
              line: 216,
              column: 27
            }
          },
          type: 'binary-expr',
          locations: [{
            start: {
              line: 216,
              column: 8
            },
            end: {
              line: 216,
              column: 10
            }
          }, {
            start: {
              line: 216,
              column: 14
            },
            end: {
              line: 216,
              column: 27
            }
          }],
          line: 216
        },
        '3': {
          loc: {
            start: {
              line: 222,
              column: 22
            },
            end: {
              line: 222,
              column: 56
            }
          },
          type: 'binary-expr',
          locations: [{
            start: {
              line: 222,
              column: 22
            },
            end: {
              line: 222,
              column: 37
            }
          }, {
            start: {
              line: 222,
              column: 41
            },
            end: {
              line: 222,
              column: 56
            }
          }],
          line: 222
        }
      },
      s: {
        '0': 0,
        '1': 0,
        '2': 0,
        '3': 0,
        '4': 0,
        '5': 0,
        '6': 0,
        '7': 0,
        '8': 0,
        '9': 0,
        '10': 0,
        '11': 0,
        '12': 0,
        '13': 0,
        '14': 0,
        '15': 0,
        '16': 0,
        '17': 0,
        '18': 0,
        '19': 0,
        '20': 0,
        '21': 0,
        '22': 0,
        '23': 0,
        '24': 0,
        '25': 0
      },
      f: {
        '0': 0,
        '1': 0
      },
      b: {
        '0': [0, 0],
        '1': [0, 0],
        '2': [0, 0],
        '3': [0, 0]
      },
      _coverageSchema: '332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'
    },
        coverage = global[gcv] || (global[gcv] = {});

    if (coverage[path] && coverage[path].hash === hash) {
      return coverage[path];
    }

    coverageData.hash = hash;
    return coverage[path] = coverageData;
  }();
  var parsers = (cov_1zzx0asslc.s[0]++, {
    mediaPresentationDuration: function mediaPresentationDuration(value) {
      cov_1zzx0asslc.s[1]++;
      return parseDuration(value);
    },
    availabilityStartTime: function availabilityStartTime(value) {
      cov_1zzx0asslc.s[2]++;
      return parseDate(value) / 1000;
    },
    minimumUpdatePeriod: function minimumUpdatePeriod(value) {
      cov_1zzx0asslc.s[3]++;
      return parseDuration(value);
    },
    timeShiftBufferDepth: function timeShiftBufferDepth(value) {
      cov_1zzx0asslc.s[4]++;
      return parseDuration(value);
    },
    start: function start(value) {
      cov_1zzx0asslc.s[5]++;
      return parseDuration(value);
    },
    width: function width(value) {
      cov_1zzx0asslc.s[6]++;
      return parseInt(value, 10);
    },
    height: function height(value) {
      cov_1zzx0asslc.s[7]++;
      return parseInt(value, 10);
    },
    bandwidth: function bandwidth(value) {
      cov_1zzx0asslc.s[8]++;
      return parseInt(value, 10);
    },
    startNumber: function startNumber(value) {
      cov_1zzx0asslc.s[9]++;
      return parseInt(value, 10);
    },
    timescale: function timescale(value) {
      cov_1zzx0asslc.s[10]++;
      return parseInt(value, 10);
    },
    duration: function duration(value) {
      var parsedValue = (cov_1zzx0asslc.s[11]++, parseInt(value, 10));
      cov_1zzx0asslc.s[12]++;

      if (isNaN(parsedValue)) {
        cov_1zzx0asslc.b[0][0]++;
        cov_1zzx0asslc.s[13]++;
        return parseDuration(value);
      } else {
        cov_1zzx0asslc.b[0][1]++;
      }

      cov_1zzx0asslc.s[14]++;
      return parsedValue;
    },
    d: function d(value) {
      cov_1zzx0asslc.s[15]++;
      return parseInt(value, 10);
    },
    t: function t(value) {
      cov_1zzx0asslc.s[16]++;
      return parseInt(value, 10);
    },
    r: function r(value) {
      cov_1zzx0asslc.s[17]++;
      return parseInt(value, 10);
    },
    DEFAULT: function DEFAULT(value) {
      cov_1zzx0asslc.s[18]++;
      return value;
    }
  });
  cov_1zzx0asslc.s[19]++;
  var parseAttributes = function parseAttributes(el) {
    cov_1zzx0asslc.f[0]++;
    cov_1zzx0asslc.s[20]++;

    if (!((cov_1zzx0asslc.b[2][0]++, el) && (cov_1zzx0asslc.b[2][1]++, el.attributes))) {
      cov_1zzx0asslc.b[1][0]++;
      cov_1zzx0asslc.s[21]++;
      return {};
    } else {
      cov_1zzx0asslc.b[1][1]++;
    }

    cov_1zzx0asslc.s[22]++;
    return from(el.attributes).reduce(function (a, e) {
      cov_1zzx0asslc.f[1]++;
      var parseFn = (cov_1zzx0asslc.s[23]++, (cov_1zzx0asslc.b[3][0]++, parsers[e.name]) || (cov_1zzx0asslc.b[3][1]++, parsers.DEFAULT));
      cov_1zzx0asslc.s[24]++;
      a[e.name] = parseFn(e.value);
      cov_1zzx0asslc.s[25]++;
      return a;
    }, {});
  };

  var cov_emq8514al = function () {
    var path = '/Users/gkatsevman/p/mpd-parser/src/utils/decodeB64ToUint8Array.js',
        hash = 'b535cfa2204f1800bf2297997544fe91d97932e2',
        Function = function () {}.constructor,
        global = new Function('return this')(),
        gcv = '__coverage__',
        coverageData = {
      path: '/Users/gkatsevman/p/mpd-parser/src/utils/decodeB64ToUint8Array.js',
      statementMap: {
        '0': {
          start: {
            line: 4,
            column: 24
          },
          end: {
            line: 4,
            column: 44
          }
        },
        '1': {
          start: {
            line: 5,
            column: 16
          },
          end: {
            line: 5,
            column: 52
          }
        },
        '2': {
          start: {
            line: 7,
            column: 2
          },
          end: {
            line: 9,
            column: 3
          }
        },
        '3': {
          start: {
            line: 8,
            column: 4
          },
          end: {
            line: 8,
            column: 43
          }
        },
        '4': {
          start: {
            line: 10,
            column: 2
          },
          end: {
            line: 10,
            column: 15
          }
        }
      },
      fnMap: {
        '0': {
          name: 'decodeB64ToUint8Array',
          decl: {
            start: {
              line: 3,
              column: 24
            },
            end: {
              line: 3,
              column: 45
            }
          },
          loc: {
            start: {
              line: 3,
              column: 55
            },
            end: {
              line: 11,
              column: 1
            }
          },
          line: 3
        }
      },
      branchMap: {},
      s: {
        '0': 0,
        '1': 0,
        '2': 0,
        '3': 0,
        '4': 0
      },
      f: {
        '0': 0
      },
      b: {},
      _coverageSchema: '332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'
    },
        coverage = global[gcv] || (global[gcv] = {});

    if (coverage[path] && coverage[path].hash === hash) {
      return coverage[path];
    }

    coverageData.hash = hash;
    return coverage[path] = coverageData;
  }();
  function decodeB64ToUint8Array(b64Text) {
    cov_emq8514al.f[0]++;
    var decodedString = (cov_emq8514al.s[0]++, window_1.atob(b64Text));
    var array = (cov_emq8514al.s[1]++, new Uint8Array(decodedString.length));
    cov_emq8514al.s[2]++;

    for (var i = 0; i < decodedString.length; i++) {
      cov_emq8514al.s[3]++;
      array[i] = decodedString.charCodeAt(i);
    }

    cov_emq8514al.s[4]++;
    return array;
  }

  var cov_bs2o3iyhg = function () {
    var path = '/Users/gkatsevman/p/mpd-parser/src/inheritAttributes.js',
        hash = 'ea23a903cabfad1b9b895e88d280af2483a53f41',
        Function = function () {}.constructor,
        global = new Function('return this')(),
        gcv = '__coverage__',
        coverageData = {
      path: '/Users/gkatsevman/p/mpd-parser/src/inheritAttributes.js',
      statementMap: {
        '0': {
          start: {
            line: 10,
            column: 22
          },
          end: {
            line: 15,
            column: 1
          }
        },
        '1': {
          start: {
            line: 27,
            column: 29
          },
          end: {
            line: 36,
            column: 1
          }
        },
        '2': {
          start: {
            line: 28,
            column: 2
          },
          end: {
            line: 30,
            column: 3
          }
        },
        '3': {
          start: {
            line: 29,
            column: 4
          },
          end: {
            line: 29,
            column: 25
          }
        },
        '4': {
          start: {
            line: 32,
            column: 2
          },
          end: {
            line: 35,
            column: 79
          }
        },
        '5': {
          start: {
            line: 34,
            column: 19
          },
          end: {
            line: 35,
            column: 76
          }
        },
        '6': {
          start: {
            line: 35,
            column: 26
          },
          end: {
            line: 35,
            column: 75
          }
        },
        '7': {
          start: {
            line: 60,
            column: 37
          },
          end: {
            line: 113,
            column: 1
          }
        },
        '8': {
          start: {
            line: 61,
            column: 26
          },
          end: {
            line: 61,
            column: 75
          }
        },
        '9': {
          start: {
            line: 62,
            column: 22
          },
          end: {
            line: 62,
            column: 67
          }
        },
        '10': {
          start: {
            line: 63,
            column: 22
          },
          end: {
            line: 64,
            column: 63
          }
        },
        '11': {
          start: {
            line: 64,
            column: 14
          },
          end: {
            line: 64,
            column: 62
          }
        },
        '12': {
          start: {
            line: 65,
            column: 22
          },
          end: {
            line: 65,
            column: 67
          }
        },
        '13': {
          start: {
            line: 66,
            column: 36
          },
          end: {
            line: 66,
            column: 66
          }
        },
        '14': {
          start: {
            line: 67,
            column: 26
          },
          end: {
            line: 68,
            column: 65
          }
        },
        '15': {
          start: {
            line: 69,
            column: 42
          },
          end: {
            line: 69,
            column: 87
          }
        },
        '16': {
          start: {
            line: 70,
            column: 32
          },
          end: {
            line: 71,
            column: 70
          }
        },
        '17': {
          start: {
            line: 78,
            column: 19
          },
          end: {
            line: 78,
            column: 70
          }
        },
        '18': {
          start: {
            line: 80,
            column: 2
          },
          end: {
            line: 88,
            column: 3
          }
        },
        '19': {
          start: {
            line: 81,
            column: 4
          },
          end: {
            line: 82,
            column: 72
          }
        },
        '20': {
          start: {
            line: 83,
            column: 9
          },
          end: {
            line: 88,
            column: 3
          }
        },
        '21': {
          start: {
            line: 87,
            column: 4
          },
          end: {
            line: 87,
            column: 69
          }
        },
        '22': {
          start: {
            line: 90,
            column: 22
          },
          end: {
            line: 104,
            column: 3
          }
        },
        '23': {
          start: {
            line: 93,
            column: 50
          },
          end: {
            line: 93,
            column: 68
          }
        },
        '24': {
          start: {
            line: 106,
            column: 2
          },
          end: {
            line: 110,
            column: 5
          }
        },
        '25': {
          start: {
            line: 107,
            column: 4
          },
          end: {
            line: 109,
            column: 5
          }
        },
        '26': {
          start: {
            line: 108,
            column: 6
          },
          end: {
            line: 108,
            column: 30
          }
        },
        '27': {
          start: {
            line: 112,
            column: 2
          },
          end: {
            line: 112,
            column: 21
          }
        },
        '28': {
          start: {
            line: 151,
            column: 0
          },
          end: {
            line: 164,
            column: 3
          }
        },
        '29': {
          start: {
            line: 152,
            column: 2
          },
          end: {
            line: 164,
            column: 3
          }
        },
        '30': {
          start: {
            line: 153,
            column: 31
          },
          end: {
            line: 153,
            column: 70
          }
        },
        '31': {
          start: {
            line: 154,
            column: 24
          },
          end: {
            line: 154,
            column: 80
          }
        },
        '32': {
          start: {
            line: 155,
            column: 23
          },
          end: {
            line: 155,
            column: 86
          }
        },
        '33': {
          start: {
            line: 156,
            column: 38
          },
          end: {
            line: 156,
            column: 75
          }
        },
        '34': {
          start: {
            line: 158,
            column: 4
          },
          end: {
            line: 163,
            column: 7
          }
        },
        '35': {
          start: {
            line: 159,
            column: 6
          },
          end: {
            line: 162,
            column: 8
          }
        },
        '36': {
          start: {
            line: 175,
            column: 37
          },
          end: {
            line: 195,
            column: 1
          }
        },
        '37': {
          start: {
            line: 176,
            column: 2
          },
          end: {
            line: 194,
            column: 9
          }
        },
        '38': {
          start: {
            line: 177,
            column: 23
          },
          end: {
            line: 177,
            column: 44
          }
        },
        '39': {
          start: {
            line: 178,
            column: 22
          },
          end: {
            line: 178,
            column: 59
          }
        },
        '40': {
          start: {
            line: 180,
            column: 4
          },
          end: {
            line: 191,
            column: 5
          }
        },
        '41': {
          start: {
            line: 181,
            column: 6
          },
          end: {
            line: 181,
            column: 38
          }
        },
        '42': {
          start: {
            line: 183,
            column: 23
          },
          end: {
            line: 183,
            column: 57
          }
        },
        '43': {
          start: {
            line: 185,
            column: 6
          },
          end: {
            line: 190,
            column: 7
          }
        },
        '44': {
          start: {
            line: 186,
            column: 21
          },
          end: {
            line: 186,
            column: 41
          }
        },
        '45': {
          start: {
            line: 187,
            column: 27
          },
          end: {
            line: 187,
            column: 62
          }
        },
        '46': {
          start: {
            line: 189,
            column: 8
          },
          end: {
            line: 189,
            column: 41
          }
        },
        '47': {
          start: {
            line: 193,
            column: 4
          },
          end: {
            line: 193,
            column: 15
          }
        },
        '48': {
          start: {
            line: 222,
            column: 0
          },
          end: {
            line: 246,
            column: 1
          }
        },
        '49': {
          start: {
            line: 222,
            column: 57
          },
          end: {
            line: 246,
            column: 1
          }
        },
        '50': {
          start: {
            line: 223,
            column: 34
          },
          end: {
            line: 223,
            column: 64
          }
        },
        '51': {
          start: {
            line: 224,
            column: 32
          },
          end: {
            line: 225,
            column: 43
          }
        },
        '52': {
          start: {
            line: 226,
            column: 15
          },
          end: {
            line: 226,
            column: 53
          }
        },
        '53': {
          start: {
            line: 227,
            column: 25
          },
          end: {
            line: 227,
            column: 56
          }
        },
        '54': {
          start: {
            line: 229,
            column: 14
          },
          end: {
            line: 231,
            column: 19
          }
        },
        '55': {
          start: {
            line: 233,
            column: 28
          },
          end: {
            line: 234,
            column: 53
          }
        },
        '56': {
          start: {
            line: 236,
            column: 2
          },
          end: {
            line: 238,
            column: 3
          }
        },
        '57': {
          start: {
            line: 237,
            column: 4
          },
          end: {
            line: 237,
            column: 48
          }
        },
        '58': {
          start: {
            line: 240,
            column: 22
          },
          end: {
            line: 240,
            column: 58
          }
        },
        '59': {
          start: {
            line: 241,
            column: 26
          },
          end: {
            line: 241,
            column: 71
          }
        },
        '60': {
          start: {
            line: 242,
            column: 35
          },
          end: {
            line: 242,
            column: 72
          }
        },
        '61': {
          start: {
            line: 244,
            column: 2
          },
          end: {
            line: 245,
            column: 78
          }
        },
        '62': {
          start: {
            line: 273,
            column: 32
          },
          end: {
            line: 285,
            column: 1
          }
        },
        '63': {
          start: {
            line: 273,
            column: 64
          },
          end: {
            line: 285,
            column: 1
          }
        },
        '64': {
          start: {
            line: 274,
            column: 25
          },
          end: {
            line: 274,
            column: 84
          }
        },
        '65': {
          start: {
            line: 275,
            column: 20
          },
          end: {
            line: 275,
            column: 43
          }
        },
        '66': {
          start: {
            line: 276,
            column: 25
          },
          end: {
            line: 276,
            column: 51
          }
        },
        '67': {
          start: {
            line: 278,
            column: 22
          },
          end: {
            line: 278,
            column: 75
          }
        },
        '68': {
          start: {
            line: 279,
            column: 27
          },
          end: {
            line: 279,
            column: 64
          }
        },
        '69': {
          start: {
            line: 280,
            column: 25
          },
          end: {
            line: 280,
            column: 62
          }
        },
        '70': {
          start: {
            line: 281,
            column: 28
          },
          end: {
            line: 281,
            column: 57
          }
        },
        '71': {
          start: {
            line: 283,
            column: 2
          },
          end: {
            line: 284,
            column: 77
          }
        },
        '72': {
          start: {
            line: 304,
            column: 33
          },
          end: {
            line: 324,
            column: 1
          }
        },
        '73': {
          start: {
            line: 309,
            column: 6
          },
          end: {
            line: 309,
            column: 13
          }
        },
        '74': {
          start: {
            line: 310,
            column: 18
          },
          end: {
            line: 310,
            column: 45
          }
        },
        '75': {
          start: {
            line: 312,
            column: 2
          },
          end: {
            line: 314,
            column: 3
          }
        },
        '76': {
          start: {
            line: 313,
            column: 4
          },
          end: {
            line: 313,
            column: 53
          }
        },
        '77': {
          start: {
            line: 316,
            column: 24
          },
          end: {
            line: 316,
            column: 44
          }
        },
        '78': {
          start: {
            line: 317,
            column: 22
          },
          end: {
            line: 317,
            column: 82
          }
        },
        '79': {
          start: {
            line: 319,
            column: 2
          },
          end: {
            line: 319,
            column: 78
          }
        },
        '80': {
          start: {
            line: 320,
            column: 2
          },
          end: {
            line: 320,
            column: 26
          }
        },
        '81': {
          start: {
            line: 321,
            column: 2
          },
          end: {
            line: 321,
            column: 44
          }
        },
        '82': {
          start: {
            line: 323,
            column: 2
          },
          end: {
            line: 323,
            column: 76
          }
        }
      },
      fnMap: {
        '0': {
          name: '(anonymous_0)',
          decl: {
            start: {
              line: 27,
              column: 29
            },
            end: {
              line: 27,
              column: 30
            }
          },
          loc: {
            start: {
              line: 27,
              column: 65
            },
            end: {
              line: 36,
              column: 1
            }
          },
          line: 27
        },
        '1': {
          name: '(anonymous_1)',
          decl: {
            start: {
              line: 34,
              column: 6
            },
            end: {
              line: 34,
              column: 7
            }
          },
          loc: {
            start: {
              line: 34,
              column: 19
            },
            end: {
              line: 35,
              column: 76
            }
          },
          line: 34
        },
        '2': {
          name: '(anonymous_2)',
          decl: {
            start: {
              line: 35,
              column: 8
            },
            end: {
              line: 35,
              column: 9
            }
          },
          loc: {
            start: {
              line: 35,
              column: 26
            },
            end: {
              line: 35,
              column: 75
            }
          },
          line: 35
        },
        '3': {
          name: '(anonymous_3)',
          decl: {
            start: {
              line: 60,
              column: 37
            },
            end: {
              line: 60,
              column: 38
            }
          },
          loc: {
            start: {
              line: 60,
              column: 56
            },
            end: {
              line: 113,
              column: 1
            }
          },
          line: 60
        },
        '4': {
          name: '(anonymous_4)',
          decl: {
            start: {
              line: 64,
              column: 9
            },
            end: {
              line: 64,
              column: 10
            }
          },
          loc: {
            start: {
              line: 64,
              column: 14
            },
            end: {
              line: 64,
              column: 62
            }
          },
          line: 64
        },
        '5': {
          name: '(anonymous_5)',
          decl: {
            start: {
              line: 93,
              column: 45
            },
            end: {
              line: 93,
              column: 46
            }
          },
          loc: {
            start: {
              line: 93,
              column: 50
            },
            end: {
              line: 93,
              column: 68
            }
          },
          line: 93
        },
        '6': {
          name: '(anonymous_6)',
          decl: {
            start: {
              line: 106,
              column: 35
            },
            end: {
              line: 106,
              column: 36
            }
          },
          loc: {
            start: {
              line: 106,
              column: 42
            },
            end: {
              line: 110,
              column: 3
            }
          },
          line: 106
        },
        '7': {
          name: '(anonymous_7)',
          decl: {
            start: {
              line: 151,
              column: 0
            },
            end: {
              line: 151,
              column: 1
            }
          },
          loc: {
            start: {
              line: 152,
              column: 2
            },
            end: {
              line: 164,
              column: 3
            }
          },
          line: 152
        },
        '8': {
          name: '(anonymous_8)',
          decl: {
            start: {
              line: 152,
              column: 2
            },
            end: {
              line: 152,
              column: 3
            }
          },
          loc: {
            start: {
              line: 152,
              column: 22
            },
            end: {
              line: 164,
              column: 3
            }
          },
          line: 152
        },
        '9': {
          name: '(anonymous_9)',
          decl: {
            start: {
              line: 158,
              column: 27
            },
            end: {
              line: 158,
              column: 28
            }
          },
          loc: {
            start: {
              line: 158,
              column: 38
            },
            end: {
              line: 163,
              column: 5
            }
          },
          line: 158
        },
        '10': {
          name: '(anonymous_10)',
          decl: {
            start: {
              line: 175,
              column: 37
            },
            end: {
              line: 175,
              column: 38
            }
          },
          loc: {
            start: {
              line: 175,
              column: 65
            },
            end: {
              line: 195,
              column: 1
            }
          },
          line: 175
        },
        '11': {
          name: '(anonymous_11)',
          decl: {
            start: {
              line: 176,
              column: 39
            },
            end: {
              line: 176,
              column: 40
            }
          },
          loc: {
            start: {
              line: 176,
              column: 54
            },
            end: {
              line: 194,
              column: 3
            }
          },
          line: 176
        },
        '12': {
          name: '(anonymous_12)',
          decl: {
            start: {
              line: 222,
              column: 0
            },
            end: {
              line: 222,
              column: 1
            }
          },
          loc: {
            start: {
              line: 222,
              column: 57
            },
            end: {
              line: 246,
              column: 1
            }
          },
          line: 222
        },
        '13': {
          name: '(anonymous_13)',
          decl: {
            start: {
              line: 222,
              column: 57
            },
            end: {
              line: 222,
              column: 58
            }
          },
          loc: {
            start: {
              line: 222,
              column: 76
            },
            end: {
              line: 246,
              column: 1
            }
          },
          line: 222
        },
        '14': {
          name: '(anonymous_14)',
          decl: {
            start: {
              line: 273,
              column: 32
            },
            end: {
              line: 273,
              column: 33
            }
          },
          loc: {
            start: {
              line: 273,
              column: 64
            },
            end: {
              line: 285,
              column: 1
            }
          },
          line: 273
        },
        '15': {
          name: '(anonymous_15)',
          decl: {
            start: {
              line: 273,
              column: 64
            },
            end: {
              line: 273,
              column: 65
            }
          },
          loc: {
            start: {
              line: 273,
              column: 83
            },
            end: {
              line: 285,
              column: 1
            }
          },
          line: 273
        },
        '16': {
          name: '(anonymous_16)',
          decl: {
            start: {
              line: 304,
              column: 33
            },
            end: {
              line: 304,
              column: 34
            }
          },
          loc: {
            start: {
              line: 304,
              column: 56
            },
            end: {
              line: 324,
              column: 1
            }
          },
          line: 304
        }
      },
      branchMap: {
        '0': {
          loc: {
            start: {
              line: 28,
              column: 2
            },
            end: {
              line: 30,
              column: 3
            }
          },
          type: 'if',
          locations: [{
            start: {
              line: 28,
              column: 2
            },
            end: {
              line: 30,
              column: 3
            }
          }, {
            start: {
              line: 28,
              column: 2
            },
            end: {
              line: 30,
              column: 3
            }
          }],
          line: 28
        },
        '1': {
          loc: {
            start: {
              line: 63,
              column: 22
            },
            end: {
              line: 64,
              column: 63
            }
          },
          type: 'binary-expr',
          locations: [{
            start: {
              line: 63,
              column: 22
            },
            end: {
              line: 63,
              column: 33
            }
          }, {
            start: {
              line: 63,
              column: 37
            },
            end: {
              line: 64,
              column: 63
            }
          }],
          line: 63
        },
        '2': {
          loc: {
            start: {
              line: 66,
              column: 36
            },
            end: {
              line: 66,
              column: 66
            }
          },
          type: 'binary-expr',
          locations: [{
            start: {
              line: 66,
              column: 36
            },
            end: {
              line: 66,
              column: 47
            }
          }, {
            start: {
              line: 66,
              column: 51
            },
            end: {
              line: 66,
              column: 66
            }
          }],
          line: 66
        },
        '3': {
          loc: {
            start: {
              line: 67,
              column: 26
            },
            end: {
              line: 68,
              column: 65
            }
          },
          type: 'binary-expr',
          locations: [{
            start: {
              line: 67,
              column: 26
            },
            end: {
              line: 67,
              column: 51
            }
          }, {
            start: {
              line: 68,
              column: 4
            },
            end: {
              line: 68,
              column: 65
            }
          }],
          line: 67
        },
        '4': {
          loc: {
            start: {
              line: 69,
              column: 42
            },
            end: {
              line: 69,
              column: 87
            }
          },
          type: 'binary-expr',
          locations: [{
            start: {
              line: 69,
              column: 42
            },
            end: {
              line: 69,
              column: 53
            }
          }, {
            start: {
              line: 69,
              column: 57
            },
            end: {
              line: 69,
              column: 68
            }
          }, {
            start: {
              line: 69,
              column: 72
            },
            end: {
              line: 69,
              column: 87
            }
          }],
          line: 69
        },
        '5': {
          loc: {
            start: {
              line: 70,
              column: 32
            },
            end: {
              line: 71,
              column: 70
            }
          },
          type: 'binary-expr',
          locations: [{
            start: {
              line: 70,
              column: 32
            },
            end: {
              line: 70,
              column: 63
            }
          }, {
            start: {
              line: 71,
              column: 4
            },
            end: {
              line: 71,
              column: 70
            }
          }],
          line: 70
        },
        '6': {
          loc: {
            start: {
              line: 78,
              column: 19
            },
            end: {
              line: 78,
              column: 70
            }
          },
          type: 'binary-expr',
          locations: [{
            start: {
              line: 78,
              column: 19
            },
            end: {
              line: 78,
              column: 34
            }
          }, {
            start: {
              line: 78,
              column: 38
            },
            end: {
              line: 78,
              column: 70
            }
          }],
          line: 78
        },
        '7': {
          loc: {
            start: {
              line: 80,
              column: 2
            },
            end: {
              line: 88,
              column: 3
            }
          },
          type: 'if',
          locations: [{
            start: {
              line: 80,
              column: 2
            },
            end: {
              line: 88,
              column: 3
            }
          }, {
            start: {
              line: 80,
              column: 2
            },
            end: {
              line: 88,
              column: 3
            }
          }],
          line: 80
        },
        '8': {
          loc: {
            start: {
              line: 80,
              column: 6
            },
            end: {
              line: 80,
              column: 39
            }
          },
          type: 'binary-expr',
          locations: [{
            start: {
              line: 80,
              column: 6
            },
            end: {
              line: 80,
              column: 14
            }
          }, {
            start: {
              line: 80,
              column: 18
            },
            end: {
              line: 80,
              column: 39
            }
          }],
          line: 80
        },
        '9': {
          loc: {
            start: {
              line: 82,
              column: 7
            },
            end: {
              line: 82,
              column: 70
            }
          },
          type: 'binary-expr',
          locations: [{
            start: {
              line: 82,
              column: 7
            },
            end: {
              line: 82,
              column: 28
            }
          }, {
            start: {
              line: 82,
              column: 32
            },
            end: {
              line: 82,
              column: 70
            }
          }],
          line: 82
        },
        '10': {
          loc: {
            start: {
              line: 83,
              column: 9
            },
            end: {
              line: 88,
              column: 3
            }
          },
          type: 'if',
          locations: [{
            start: {
              line: 83,
              column: 9
            },
            end: {
              line: 88,
              column: 3
            }
          }, {
            start: {
              line: 83,
              column: 9
            },
            end: {
              line: 88,
              column: 3
            }
          }],
          line: 83
        },
        '11': {
          loc: {
            start: {
              line: 83,
              column: 13
            },
            end: {
              line: 83,
              column: 48
            }
          },
          type: 'binary-expr',
          locations: [{
            start: {
              line: 83,
              column: 13
            },
            end: {
              line: 83,
              column: 21
            }
          }, {
            start: {
              line: 83,
              column: 25
            },
            end: {
              line: 83,
              column: 48
            }
          }],
          line: 83
        },
        '12': {
          loc: {
            start: {
              line: 92,
              column: 14
            },
            end: {
              line: 93,
              column: 69
            }
          },
          type: 'binary-expr',
          locations: [{
            start: {
              line: 92,
              column: 14
            },
            end: {
              line: 92,
              column: 29
            }
          }, {
            start: {
              line: 93,
              column: 6
            },
            end: {
              line: 93,
              column: 69
            }
          }],
          line: 92
        },
        '13': {
          loc: {
            start: {
              line: 94,
              column: 10
            },
            end: {
              line: 99,
              column: 8
            }
          },
          type: 'binary-expr',
          locations: [{
            start: {
              line: 94,
              column: 10
            },
            end: {
              line: 94,
              column: 21
            }
          }, {
            start: {
              line: 94,
              column: 25
            },
            end: {
              line: 99,
              column: 8
            }
          }],
          line: 94
        },
        '14': {
          loc: {
            start: {
              line: 100,
              column: 10
            },
            end: {
              line: 103,
              column: 8
            }
          },
          type: 'binary-expr',
          locations: [{
            start: {
              line: 100,
              column: 10
            },
            end: {
              line: 100,
              column: 21
            }
          }, {
            start: {
              line: 100,
              column: 25
            },
            end: {
              line: 103,
              column: 8
            }
          }],
          line: 100
        },
        '15': {
          loc: {
            start: {
              line: 107,
              column: 4
            },
            end: {
              line: 109,
              column: 5
            }
          },
          type: 'if',
          locations: [{
            start: {
              line: 107,
              column: 4
            },
            end: {
              line: 109,
              column: 5
            }
          }, {
            start: {
              line: 107,
              column: 4
            },
            end: {
              line: 109,
              column: 5
            }
          }],
          line: 107
        },
        '16': {
          loc: {
            start: {
              line: 180,
              column: 4
            },
            end: {
              line: 191,
              column: 5
            }
          },
          type: 'if',
          locations: [{
            start: {
              line: 180,
              column: 4
            },
            end: {
              line: 191,
              column: 5
            }
          }, {
            start: {
              line: 180,
              column: 4
            },
            end: {
              line: 191,
              column: 5
            }
          }],
          line: 180
        },
        '17': {
          loc: {
            start: {
              line: 185,
              column: 6
            },
            end: {
              line: 190,
              column: 7
            }
          },
          type: 'if',
          locations: [{
            start: {
              line: 185,
              column: 6
            },
            end: {
              line: 190,
              column: 7
            }
          }, {
            start: {
              line: 185,
              column: 6
            },
            end: {
              line: 190,
              column: 7
            }
          }],
          line: 185
        },
        '18': {
          loc: {
            start: {
              line: 187,
              column: 27
            },
            end: {
              line: 187,
              column: 62
            }
          },
          type: 'binary-expr',
          locations: [{
            start: {
              line: 187,
              column: 27
            },
            end: {
              line: 187,
              column: 31
            }
          }, {
            start: {
              line: 187,
              column: 35
            },
            end: {
              line: 187,
              column: 62
            }
          }],
          line: 187
        },
        '19': {
          loc: {
            start: {
              line: 236,
              column: 2
            },
            end: {
              line: 238,
              column: 3
            }
          },
          type: 'if',
          locations: [{
            start: {
              line: 236,
              column: 2
            },
            end: {
              line: 238,
              column: 3
            }
          }, {
            start: {
              line: 236,
              column: 2
            },
            end: {
              line: 238,
              column: 3
            }
          }],
          line: 236
        },
        '20': {
          loc: {
            start: {
              line: 278,
              column: 22
            },
            end: {
              line: 278,
              column: 75
            }
          },
          type: 'cond-expr',
          locations: [{
            start: {
              line: 278,
              column: 53
            },
            end: {
              line: 278,
              column: 58
            }
          }, {
            start: {
              line: 278,
              column: 61
            },
            end: {
              line: 278,
              column: 75
            }
          }],
          line: 278
        },
        '21': {
          loc: {
            start: {
              line: 304,
              column: 39
            },
            end: {
              line: 304,
              column: 51
            }
          },
          type: 'default-arg',
          locations: [{
            start: {
              line: 304,
              column: 49
            },
            end: {
              line: 304,
              column: 51
            }
          }],
          line: 304
        },
        '22': {
          loc: {
            start: {
              line: 306,
              column: 4
            },
            end: {
              line: 306,
              column: 20
            }
          },
          type: 'default-arg',
          locations: [{
            start: {
              line: 306,
              column: 18
            },
            end: {
              line: 306,
              column: 20
            }
          }],
          line: 306
        },
        '23': {
          loc: {
            start: {
              line: 307,
              column: 4
            },
            end: {
              line: 307,
              column: 20
            }
          },
          type: 'default-arg',
          locations: [{
            start: {
              line: 307,
              column: 10
            },
            end: {
              line: 307,
              column: 20
            }
          }],
          line: 307
        },
        '24': {
          loc: {
            start: {
              line: 308,
              column: 4
            },
            end: {
              line: 308,
              column: 20
            }
          },
          type: 'default-arg',
          locations: [{
            start: {
              line: 308,
              column: 19
            },
            end: {
              line: 308,
              column: 20
            }
          }],
          line: 308
        },
        '25': {
          loc: {
            start: {
              line: 312,
              column: 2
            },
            end: {
              line: 314,
              column: 3
            }
          },
          type: 'if',
          locations: [{
            start: {
              line: 312,
              column: 2
            },
            end: {
              line: 314,
              column: 3
            }
          }, {
            start: {
              line: 312,
              column: 2
            },
            end: {
              line: 314,
              column: 3
            }
          }],
          line: 312
        },
        '26': {
          loc: {
            start: {
              line: 319,
              column: 33
            },
            end: {
              line: 319,
              column: 77
            }
          },
          type: 'binary-expr',
          locations: [{
            start: {
              line: 319,
              column: 33
            },
            end: {
              line: 319,
              column: 72
            }
          }, {
            start: {
              line: 319,
              column: 76
            },
            end: {
              line: 319,
              column: 77
            }
          }],
          line: 319
        }
      },
      s: {
        '0': 0,
        '1': 0,
        '2': 0,
        '3': 0,
        '4': 0,
        '5': 0,
        '6': 0,
        '7': 0,
        '8': 0,
        '9': 0,
        '10': 0,
        '11': 0,
        '12': 0,
        '13': 0,
        '14': 0,
        '15': 0,
        '16': 0,
        '17': 0,
        '18': 0,
        '19': 0,
        '20': 0,
        '21': 0,
        '22': 0,
        '23': 0,
        '24': 0,
        '25': 0,
        '26': 0,
        '27': 0,
        '28': 0,
        '29': 0,
        '30': 0,
        '31': 0,
        '32': 0,
        '33': 0,
        '34': 0,
        '35': 0,
        '36': 0,
        '37': 0,
        '38': 0,
        '39': 0,
        '40': 0,
        '41': 0,
        '42': 0,
        '43': 0,
        '44': 0,
        '45': 0,
        '46': 0,
        '47': 0,
        '48': 0,
        '49': 0,
        '50': 0,
        '51': 0,
        '52': 0,
        '53': 0,
        '54': 0,
        '55': 0,
        '56': 0,
        '57': 0,
        '58': 0,
        '59': 0,
        '60': 0,
        '61': 0,
        '62': 0,
        '63': 0,
        '64': 0,
        '65': 0,
        '66': 0,
        '67': 0,
        '68': 0,
        '69': 0,
        '70': 0,
        '71': 0,
        '72': 0,
        '73': 0,
        '74': 0,
        '75': 0,
        '76': 0,
        '77': 0,
        '78': 0,
        '79': 0,
        '80': 0,
        '81': 0,
        '82': 0
      },
      f: {
        '0': 0,
        '1': 0,
        '2': 0,
        '3': 0,
        '4': 0,
        '5': 0,
        '6': 0,
        '7': 0,
        '8': 0,
        '9': 0,
        '10': 0,
        '11': 0,
        '12': 0,
        '13': 0,
        '14': 0,
        '15': 0,
        '16': 0
      },
      b: {
        '0': [0, 0],
        '1': [0, 0],
        '2': [0, 0],
        '3': [0, 0],
        '4': [0, 0, 0],
        '5': [0, 0],
        '6': [0, 0],
        '7': [0, 0],
        '8': [0, 0],
        '9': [0, 0],
        '10': [0, 0],
        '11': [0, 0],
        '12': [0, 0],
        '13': [0, 0],
        '14': [0, 0],
        '15': [0, 0],
        '16': [0, 0],
        '17': [0, 0],
        '18': [0, 0],
        '19': [0, 0],
        '20': [0, 0],
        '21': [0],
        '22': [0],
        '23': [0],
        '24': [0],
        '25': [0, 0],
        '26': [0, 0]
      },
      _coverageSchema: '332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'
    },
        coverage = global[gcv] || (global[gcv] = {});

    if (coverage[path] && coverage[path].hash === hash) {
      return coverage[path];
    }

    coverageData.hash = hash;
    return coverage[path] = coverageData;
  }();
  var keySystemsMap = (cov_bs2o3iyhg.s[0]++, {
    'urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b': 'org.w3.clearkey',
    'urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed': 'com.widevine.alpha',
    'urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95': 'com.microsoft.playready',
    'urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb': 'com.adobe.primetime'
  });
  cov_bs2o3iyhg.s[1]++;
  var buildBaseUrls = function buildBaseUrls(referenceUrls, baseUrlElements) {
    cov_bs2o3iyhg.f[0]++;
    cov_bs2o3iyhg.s[2]++;

    if (!baseUrlElements.length) {
      cov_bs2o3iyhg.b[0][0]++;
      cov_bs2o3iyhg.s[3]++;
      return referenceUrls;
    } else {
      cov_bs2o3iyhg.b[0][1]++;
    }

    cov_bs2o3iyhg.s[4]++;
    return flatten(referenceUrls.map(function (reference) {
      cov_bs2o3iyhg.f[1]++;
      cov_bs2o3iyhg.s[5]++;
      return baseUrlElements.map(function (baseUrlElement) {
        cov_bs2o3iyhg.f[2]++;
        cov_bs2o3iyhg.s[6]++;
        return resolveUrl(reference, getContent(baseUrlElement));
      });
    }));
  };
  cov_bs2o3iyhg.s[7]++;
  var getSegmentInformation = function getSegmentInformation(adaptationSet) {
    cov_bs2o3iyhg.f[3]++;
    var segmentTemplate = (cov_bs2o3iyhg.s[8]++, findChildren(adaptationSet, 'SegmentTemplate')[0]);
    var segmentList = (cov_bs2o3iyhg.s[9]++, findChildren(adaptationSet, 'SegmentList')[0]);
    var segmentUrls = (cov_bs2o3iyhg.s[10]++, (cov_bs2o3iyhg.b[1][0]++, segmentList) && (cov_bs2o3iyhg.b[1][1]++, findChildren(segmentList, 'SegmentURL').map(function (s) {
      cov_bs2o3iyhg.f[4]++;
      cov_bs2o3iyhg.s[11]++;
      return merge({
        tag: 'SegmentURL'
      }, parseAttributes(s));
    })));
    var segmentBase = (cov_bs2o3iyhg.s[12]++, findChildren(adaptationSet, 'SegmentBase')[0]);
    var segmentTimelineParentNode = (cov_bs2o3iyhg.s[13]++, (cov_bs2o3iyhg.b[2][0]++, segmentList) || (cov_bs2o3iyhg.b[2][1]++, segmentTemplate));
    var segmentTimeline = (cov_bs2o3iyhg.s[14]++, (cov_bs2o3iyhg.b[3][0]++, segmentTimelineParentNode) && (cov_bs2o3iyhg.b[3][1]++, findChildren(segmentTimelineParentNode, 'SegmentTimeline')[0]));
    var segmentInitializationParentNode = (cov_bs2o3iyhg.s[15]++, (cov_bs2o3iyhg.b[4][0]++, segmentList) || (cov_bs2o3iyhg.b[4][1]++, segmentBase) || (cov_bs2o3iyhg.b[4][2]++, segmentTemplate));
    var segmentInitialization = (cov_bs2o3iyhg.s[16]++, (cov_bs2o3iyhg.b[5][0]++, segmentInitializationParentNode) && (cov_bs2o3iyhg.b[5][1]++, findChildren(segmentInitializationParentNode, 'Initialization')[0]));
    var template = (cov_bs2o3iyhg.s[17]++, (cov_bs2o3iyhg.b[6][0]++, segmentTemplate) && (cov_bs2o3iyhg.b[6][1]++, parseAttributes(segmentTemplate)));
    cov_bs2o3iyhg.s[18]++;

    if ((cov_bs2o3iyhg.b[8][0]++, template) && (cov_bs2o3iyhg.b[8][1]++, segmentInitialization)) {
      cov_bs2o3iyhg.b[7][0]++;
      cov_bs2o3iyhg.s[19]++;
      template.initialization = (cov_bs2o3iyhg.b[9][0]++, segmentInitialization) && (cov_bs2o3iyhg.b[9][1]++, parseAttributes(segmentInitialization));
    } else {
      cov_bs2o3iyhg.b[7][1]++;
      cov_bs2o3iyhg.s[20]++;

      if ((cov_bs2o3iyhg.b[11][0]++, template) && (cov_bs2o3iyhg.b[11][1]++, template.initialization)) {
        cov_bs2o3iyhg.b[10][0]++;
        cov_bs2o3iyhg.s[21]++;
        template.initialization = {
          sourceURL: template.initialization
        };
      } else {
        cov_bs2o3iyhg.b[10][1]++;
      }
    }

    var segmentInfo = (cov_bs2o3iyhg.s[22]++, {
      template: template,
      timeline: (cov_bs2o3iyhg.b[12][0]++, segmentTimeline) && (cov_bs2o3iyhg.b[12][1]++, findChildren(segmentTimeline, 'S').map(function (s) {
        cov_bs2o3iyhg.f[5]++;
        cov_bs2o3iyhg.s[23]++;
        return parseAttributes(s);
      })),
      list: (cov_bs2o3iyhg.b[13][0]++, segmentList) && (cov_bs2o3iyhg.b[13][1]++, merge(parseAttributes(segmentList), {
        segmentUrls: segmentUrls,
        initialization: parseAttributes(segmentInitialization)
      })),
      base: (cov_bs2o3iyhg.b[14][0]++, segmentBase) && (cov_bs2o3iyhg.b[14][1]++, merge(parseAttributes(segmentBase), {
        initialization: parseAttributes(segmentInitialization)
      }))
    });
    cov_bs2o3iyhg.s[24]++;
    Object.keys(segmentInfo).forEach(function (key) {
      cov_bs2o3iyhg.f[6]++;
      cov_bs2o3iyhg.s[25]++;

      if (!segmentInfo[key]) {
        cov_bs2o3iyhg.b[15][0]++;
        cov_bs2o3iyhg.s[26]++;
        delete segmentInfo[key];
      } else {
        cov_bs2o3iyhg.b[15][1]++;
      }
    });
    cov_bs2o3iyhg.s[27]++;
    return segmentInfo;
  };
  cov_bs2o3iyhg.s[28]++;
  var inheritBaseUrls = function inheritBaseUrls(adaptationSetAttributes, adaptationSetBaseUrls, adaptationSetSegmentInfo) {
    cov_bs2o3iyhg.f[7]++;
    cov_bs2o3iyhg.s[29]++;
    return function (representation) {
      cov_bs2o3iyhg.f[8]++;
      var repBaseUrlElements = (cov_bs2o3iyhg.s[30]++, findChildren(representation, 'BaseURL'));
      var repBaseUrls = (cov_bs2o3iyhg.s[31]++, buildBaseUrls(adaptationSetBaseUrls, repBaseUrlElements));
      var attributes = (cov_bs2o3iyhg.s[32]++, merge(adaptationSetAttributes, parseAttributes(representation)));
      var representationSegmentInfo = (cov_bs2o3iyhg.s[33]++, getSegmentInformation(representation));
      cov_bs2o3iyhg.s[34]++;
      return repBaseUrls.map(function (baseUrl) {
        cov_bs2o3iyhg.f[9]++;
        cov_bs2o3iyhg.s[35]++;
        return {
          segmentInfo: merge(adaptationSetSegmentInfo, representationSegmentInfo),
          attributes: merge(attributes, {
            baseUrl: baseUrl
          })
        };
      });
    };
  };
  cov_bs2o3iyhg.s[36]++;

  var generateKeySystemInformation = function generateKeySystemInformation(contentProtectionNodes) {
    cov_bs2o3iyhg.f[10]++;
    cov_bs2o3iyhg.s[37]++;
    return contentProtectionNodes.reduce(function (acc, node) {
      cov_bs2o3iyhg.f[11]++;
      var attributes = (cov_bs2o3iyhg.s[38]++, parseAttributes(node));
      var keySystem = (cov_bs2o3iyhg.s[39]++, keySystemsMap[attributes.schemeIdUri]);
      cov_bs2o3iyhg.s[40]++;

      if (keySystem) {
        cov_bs2o3iyhg.b[16][0]++;
        cov_bs2o3iyhg.s[41]++;
        acc[keySystem] = {
          attributes: attributes
        };
        var psshNode = (cov_bs2o3iyhg.s[42]++, findChildren(node, 'cenc:pssh')[0]);
        cov_bs2o3iyhg.s[43]++;

        if (psshNode) {
          cov_bs2o3iyhg.b[17][0]++;
          var pssh = (cov_bs2o3iyhg.s[44]++, getContent(psshNode));
          var psshBuffer = (cov_bs2o3iyhg.s[45]++, (cov_bs2o3iyhg.b[18][0]++, pssh) && (cov_bs2o3iyhg.b[18][1]++, decodeB64ToUint8Array(pssh)));
          cov_bs2o3iyhg.s[46]++;
          acc[keySystem].pssh = psshBuffer;
        } else {
          cov_bs2o3iyhg.b[17][1]++;
        }
      } else {
        cov_bs2o3iyhg.b[16][1]++;
      }

      cov_bs2o3iyhg.s[47]++;
      return acc;
    }, {});
  };

  cov_bs2o3iyhg.s[48]++;
  var toRepresentations = function toRepresentations(periodAttributes, periodBaseUrls, periodSegmentInfo) {
    cov_bs2o3iyhg.f[12]++;
    cov_bs2o3iyhg.s[49]++;
    return function (adaptationSet) {
      cov_bs2o3iyhg.f[13]++;
      var adaptationSetAttributes = (cov_bs2o3iyhg.s[50]++, parseAttributes(adaptationSet));
      var adaptationSetBaseUrls = (cov_bs2o3iyhg.s[51]++, buildBaseUrls(periodBaseUrls, findChildren(adaptationSet, 'BaseURL')));
      var role = (cov_bs2o3iyhg.s[52]++, findChildren(adaptationSet, 'Role')[0]);
      var roleAttributes = (cov_bs2o3iyhg.s[53]++, {
        role: parseAttributes(role)
      });
      var attrs = (cov_bs2o3iyhg.s[54]++, merge(periodAttributes, adaptationSetAttributes, roleAttributes));
      var contentProtection = (cov_bs2o3iyhg.s[55]++, generateKeySystemInformation(findChildren(adaptationSet, 'ContentProtection')));
      cov_bs2o3iyhg.s[56]++;

      if (Object.keys(contentProtection).length) {
        cov_bs2o3iyhg.b[19][0]++;
        cov_bs2o3iyhg.s[57]++;
        attrs = merge(attrs, {
          contentProtection: contentProtection
        });
      } else {
        cov_bs2o3iyhg.b[19][1]++;
      }

      var segmentInfo = (cov_bs2o3iyhg.s[58]++, getSegmentInformation(adaptationSet));
      var representations = (cov_bs2o3iyhg.s[59]++, findChildren(adaptationSet, 'Representation'));
      var adaptationSetSegmentInfo = (cov_bs2o3iyhg.s[60]++, merge(periodSegmentInfo, segmentInfo));
      cov_bs2o3iyhg.s[61]++;
      return flatten(representations.map(inheritBaseUrls(attrs, adaptationSetBaseUrls, adaptationSetSegmentInfo)));
    };
  };
  cov_bs2o3iyhg.s[62]++;
  var toAdaptationSets = function toAdaptationSets(mpdAttributes, mpdBaseUrls) {
    cov_bs2o3iyhg.f[14]++;
    cov_bs2o3iyhg.s[63]++;
    return function (period, index) {
      cov_bs2o3iyhg.f[15]++;
      var periodBaseUrls = (cov_bs2o3iyhg.s[64]++, buildBaseUrls(mpdBaseUrls, findChildren(period, 'BaseURL')));
      var periodAtt = (cov_bs2o3iyhg.s[65]++, parseAttributes(period));
      var parsedPeriodId = (cov_bs2o3iyhg.s[66]++, parseInt(periodAtt.id, 10));
      var periodIndex = (cov_bs2o3iyhg.s[67]++, window_1.isNaN(parsedPeriodId) ? (cov_bs2o3iyhg.b[20][0]++, index) : (cov_bs2o3iyhg.b[20][1]++, parsedPeriodId));
      var periodAttributes = (cov_bs2o3iyhg.s[68]++, merge(mpdAttributes, {
        periodIndex: periodIndex
      }));
      var adaptationSets = (cov_bs2o3iyhg.s[69]++, findChildren(period, 'AdaptationSet'));
      var periodSegmentInfo = (cov_bs2o3iyhg.s[70]++, getSegmentInformation(period));
      cov_bs2o3iyhg.s[71]++;
      return flatten(adaptationSets.map(toRepresentations(periodAttributes, periodBaseUrls, periodSegmentInfo)));
    };
  };
  cov_bs2o3iyhg.s[72]++;
  var inheritAttributes = function inheritAttributes(mpd, options) {
    if (options === void 0) {
      options = (cov_bs2o3iyhg.b[21][0]++, {});
    }

    cov_bs2o3iyhg.f[16]++;

    var _ref = (cov_bs2o3iyhg.s[73]++, options),
        _ref$manifestUri = _ref.manifestUri,
        manifestUri = _ref$manifestUri === void 0 ? (cov_bs2o3iyhg.b[22][0]++, '') : _ref$manifestUri,
        _ref$NOW = _ref.NOW,
        NOW = _ref$NOW === void 0 ? (cov_bs2o3iyhg.b[23][0]++, Date.now()) : _ref$NOW,
        _ref$clientOffset = _ref.clientOffset,
        clientOffset = _ref$clientOffset === void 0 ? (cov_bs2o3iyhg.b[24][0]++, 0) : _ref$clientOffset;

    var periods = (cov_bs2o3iyhg.s[74]++, findChildren(mpd, 'Period'));
    cov_bs2o3iyhg.s[75]++;

    if (!periods.length) {
      cov_bs2o3iyhg.b[25][0]++;
      cov_bs2o3iyhg.s[76]++;
      throw new Error(errors.INVALID_NUMBER_OF_PERIOD);
    } else {
      cov_bs2o3iyhg.b[25][1]++;
    }

    var mpdAttributes = (cov_bs2o3iyhg.s[77]++, parseAttributes(mpd));
    var mpdBaseUrls = (cov_bs2o3iyhg.s[78]++, buildBaseUrls([manifestUri], findChildren(mpd, 'BaseURL')));
    cov_bs2o3iyhg.s[79]++;
    mpdAttributes.sourceDuration = (cov_bs2o3iyhg.b[26][0]++, mpdAttributes.mediaPresentationDuration) || (cov_bs2o3iyhg.b[26][1]++, 0);
    cov_bs2o3iyhg.s[80]++;
    mpdAttributes.NOW = NOW;
    cov_bs2o3iyhg.s[81]++;
    mpdAttributes.clientOffset = clientOffset;
    cov_bs2o3iyhg.s[82]++;
    return flatten(periods.map(toAdaptationSets(mpdAttributes, mpdBaseUrls)));
  };

  var cov_288k9u7tg4 = function () {
    var path = '/Users/gkatsevman/p/mpd-parser/src/stringToMpdXml.js',
        hash = 'abfbedf26ef90b872eeedf7ed2c2ca36ee829ea1',
        Function = function () {}.constructor,
        global = new Function('return this')(),
        gcv = '__coverage__',
        coverageData = {
      path: '/Users/gkatsevman/p/mpd-parser/src/stringToMpdXml.js',
      statementMap: {
        '0': {
          start: {
            line: 4,
            column: 30
          },
          end: {
            line: 20,
            column: 1
          }
        },
        '1': {
          start: {
            line: 5,
            column: 2
          },
          end: {
            line: 7,
            column: 3
          }
        },
        '2': {
          start: {
            line: 6,
            column: 4
          },
          end: {
            line: 6,
            column: 48
          }
        },
        '3': {
          start: {
            line: 9,
            column: 17
          },
          end: {
            line: 9,
            column: 39
          }
        },
        '4': {
          start: {
            line: 10,
            column: 14
          },
          end: {
            line: 10,
            column: 71
          }
        },
        '5': {
          start: {
            line: 11,
            column: 14
          },
          end: {
            line: 12,
            column: 30
          }
        },
        '6': {
          start: {
            line: 14,
            column: 2
          },
          end: {
            line: 17,
            column: 3
          }
        },
        '7': {
          start: {
            line: 16,
            column: 4
          },
          end: {
            line: 16,
            column: 45
          }
        },
        '8': {
          start: {
            line: 19,
            column: 2
          },
          end: {
            line: 19,
            column: 13
          }
        }
      },
      fnMap: {
        '0': {
          name: '(anonymous_0)',
          decl: {
            start: {
              line: 4,
              column: 30
            },
            end: {
              line: 4,
              column: 31
            }
          },
          loc: {
            start: {
              line: 4,
              column: 50
            },
            end: {
              line: 20,
              column: 1
            }
          },
          line: 4
        }
      },
      branchMap: {
        '0': {
          loc: {
            start: {
              line: 5,
              column: 2
            },
            end: {
              line: 7,
              column: 3
            }
          },
          type: 'if',
          locations: [{
            start: {
              line: 5,
              column: 2
            },
            end: {
              line: 7,
              column: 3
            }
          }, {
            start: {
              line: 5,
              column: 2
            },
            end: {
              line: 7,
              column: 3
            }
          }],
          line: 5
        },
        '1': {
          loc: {
            start: {
              line: 11,
              column: 14
            },
            end: {
              line: 12,
              column: 30
            }
          },
          type: 'cond-expr',
          locations: [{
            start: {
              line: 12,
              column: 4
            },
            end: {
              line: 12,
              column: 23
            }
          }, {
            start: {
              line: 12,
              column: 26
            },
            end: {
              line: 12,
              column: 30
            }
          }],
          line: 11
        },
        '2': {
          loc: {
            start: {
              line: 11,
              column: 14
            },
            end: {
              line: 11,
              column: 58
            }
          },
          type: 'binary-expr',
          locations: [{
            start: {
              line: 11,
              column: 14
            },
            end: {
              line: 11,
              column: 17
            }
          }, {
            start: {
              line: 11,
              column: 21
            },
            end: {
              line: 11,
              column: 58
            }
          }],
          line: 11
        },
        '3': {
          loc: {
            start: {
              line: 14,
              column: 2
            },
            end: {
              line: 17,
              column: 3
            }
          },
          type: 'if',
          locations: [{
            start: {
              line: 14,
              column: 2
            },
            end: {
              line: 17,
              column: 3
            }
          }, {
            start: {
              line: 14,
              column: 2
            },
            end: {
              line: 17,
              column: 3
            }
          }],
          line: 14
        },
        '4': {
          loc: {
            start: {
              line: 14,
              column: 6
            },
            end: {
              line: 15,
              column: 56
            }
          },
          type: 'binary-expr',
          locations: [{
            start: {
              line: 14,
              column: 6
            },
            end: {
              line: 14,
              column: 10
            }
          }, {
            start: {
              line: 14,
              column: 14
            },
            end: {
              line: 14,
              column: 17
            }
          }, {
            start: {
              line: 15,
              column: 6
            },
            end: {
              line: 15,
              column: 56
            }
          }],
          line: 14
        }
      },
      s: {
        '0': 0,
        '1': 0,
        '2': 0,
        '3': 0,
        '4': 0,
        '5': 0,
        '6': 0,
        '7': 0,
        '8': 0
      },
      f: {
        '0': 0
      },
      b: {
        '0': [0, 0],
        '1': [0, 0],
        '2': [0, 0],
        '3': [0, 0],
        '4': [0, 0, 0]
      },
      _coverageSchema: '332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'
    },
        coverage = global[gcv] || (global[gcv] = {});

    if (coverage[path] && coverage[path].hash === hash) {
      return coverage[path];
    }

    coverageData.hash = hash;
    return coverage[path] = coverageData;
  }();
  cov_288k9u7tg4.s[0]++;
  var stringToMpdXml = function stringToMpdXml(manifestString) {
    cov_288k9u7tg4.f[0]++;
    cov_288k9u7tg4.s[1]++;

    if (manifestString === '') {
      cov_288k9u7tg4.b[0][0]++;
      cov_288k9u7tg4.s[2]++;
      throw new Error(errors.DASH_EMPTY_MANIFEST);
    } else {
      cov_288k9u7tg4.b[0][1]++;
    }

    var parser = (cov_288k9u7tg4.s[3]++, new window_1.DOMParser());
    var xml = (cov_288k9u7tg4.s[4]++, parser.parseFromString(manifestString, 'application/xml'));
    var mpd = (cov_288k9u7tg4.s[5]++, (cov_288k9u7tg4.b[2][0]++, xml) && (cov_288k9u7tg4.b[2][1]++, xml.documentElement.tagName === 'MPD') ? (cov_288k9u7tg4.b[1][0]++, xml.documentElement) : (cov_288k9u7tg4.b[1][1]++, null));
    cov_288k9u7tg4.s[6]++;

    if ((cov_288k9u7tg4.b[4][0]++, !mpd) || (cov_288k9u7tg4.b[4][1]++, mpd) && (cov_288k9u7tg4.b[4][2]++, mpd.getElementsByTagName('parsererror').length > 0)) {
      cov_288k9u7tg4.b[3][0]++;
      cov_288k9u7tg4.s[7]++;
      throw new Error(errors.DASH_INVALID_XML);
    } else {
      cov_288k9u7tg4.b[3][1]++;
    }

    cov_288k9u7tg4.s[8]++;
    return mpd;
  };

  var cov_ajtf4fka4 = function () {
    var path = '/Users/gkatsevman/p/mpd-parser/src/parseUTCTimingScheme.js',
        hash = 'c97fa56067c71f190392f51a4d1d5bb4e6b6bd17',
        Function = function () {}.constructor,
        global = new Function('return this')(),
        gcv = '__coverage__',
        coverageData = {
      path: '/Users/gkatsevman/p/mpd-parser/src/parseUTCTimingScheme.js',
      statementMap: {
        '0': {
          start: {
            line: 13,
            column: 36
          },
          end: {
            line: 46,
            column: 1
          }
        },
        '1': {
          start: {
            line: 14,
            column: 24
          },
          end: {
            line: 14,
            column: 57
          }
        },
        '2': {
          start: {
            line: 16,
            column: 2
          },
          end: {
            line: 18,
            column: 3
          }
        },
        '3': {
          start: {
            line: 17,
            column: 4
          },
          end: {
            line: 17,
            column: 16
          }
        },
        '4': {
          start: {
            line: 20,
            column: 21
          },
          end: {
            line: 20,
            column: 51
          }
        },
        '5': {
          start: {
            line: 22,
            column: 2
          },
          end: {
            line: 43,
            column: 3
          }
        },
        '6': {
          start: {
            line: 25,
            column: 4
          },
          end: {
            line: 25,
            column: 31
          }
        },
        '7': {
          start: {
            line: 26,
            column: 4
          },
          end: {
            line: 26,
            column: 10
          }
        },
        '8': {
          start: {
            line: 31,
            column: 4
          },
          end: {
            line: 31,
            column: 30
          }
        },
        '9': {
          start: {
            line: 32,
            column: 4
          },
          end: {
            line: 32,
            column: 10
          }
        },
        '10': {
          start: {
            line: 35,
            column: 4
          },
          end: {
            line: 35,
            column: 33
          }
        },
        '11': {
          start: {
            line: 36,
            column: 4
          },
          end: {
            line: 36,
            column: 52
          }
        },
        '12': {
          start: {
            line: 37,
            column: 4
          },
          end: {
            line: 37,
            column: 10
          }
        },
        '13': {
          start: {
            line: 42,
            column: 4
          },
          end: {
            line: 42,
            column: 58
          }
        },
        '14': {
          start: {
            line: 45,
            column: 2
          },
          end: {
            line: 45,
            column: 20
          }
        }
      },
      fnMap: {
        '0': {
          name: '(anonymous_0)',
          decl: {
            start: {
              line: 13,
              column: 36
            },
            end: {
              line: 13,
              column: 37
            }
          },
          loc: {
            start: {
              line: 13,
              column: 45
            },
            end: {
              line: 46,
              column: 1
            }
          },
          line: 13
        }
      },
      branchMap: {
        '0': {
          loc: {
            start: {
              line: 16,
              column: 2
            },
            end: {
              line: 18,
              column: 3
            }
          },
          type: 'if',
          locations: [{
            start: {
              line: 16,
              column: 2
            },
            end: {
              line: 18,
              column: 3
            }
          }, {
            start: {
              line: 16,
              column: 2
            },
            end: {
              line: 18,
              column: 3
            }
          }],
          line: 16
        },
        '1': {
          loc: {
            start: {
              line: 22,
              column: 2
            },
            end: {
              line: 43,
              column: 3
            }
          },
          type: 'switch',
          locations: [{
            start: {
              line: 23,
              column: 2
            },
            end: {
              line: 23,
              column: 42
            }
          }, {
            start: {
              line: 24,
              column: 2
            },
            end: {
              line: 26,
              column: 10
            }
          }, {
            start: {
              line: 27,
              column: 2
            },
            end: {
              line: 27,
              column: 44
            }
          }, {
            start: {
              line: 28,
              column: 2
            },
            end: {
              line: 28,
              column: 41
            }
          }, {
            start: {
              line: 29,
              column: 2
            },
            end: {
              line: 29,
              column: 44
            }
          }, {
            start: {
              line: 30,
              column: 2
            },
            end: {
              line: 32,
              column: 10
            }
          }, {
            start: {
              line: 33,
              column: 2
            },
            end: {
              line: 33,
              column: 39
            }
          }, {
            start: {
              line: 34,
              column: 2
            },
            end: {
              line: 37,
              column: 10
            }
          }, {
            start: {
              line: 38,
              column: 2
            },
            end: {
              line: 38,
              column: 41
            }
          }, {
            start: {
              line: 39,
              column: 2
            },
            end: {
              line: 39,
              column: 36
            }
          }, {
            start: {
              line: 40,
              column: 2
            },
            end: {
              line: 40,
              column: 37
            }
          }, {
            start: {
              line: 41,
              column: 2
            },
            end: {
              line: 42,
              column: 58
            }
          }],
          line: 22
        }
      },
      s: {
        '0': 0,
        '1': 0,
        '2': 0,
        '3': 0,
        '4': 0,
        '5': 0,
        '6': 0,
        '7': 0,
        '8': 0,
        '9': 0,
        '10': 0,
        '11': 0,
        '12': 0,
        '13': 0,
        '14': 0
      },
      f: {
        '0': 0
      },
      b: {
        '0': [0, 0],
        '1': [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
      },
      _coverageSchema: '332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'
    },
        coverage = global[gcv] || (global[gcv] = {});

    if (coverage[path] && coverage[path].hash === hash) {
      return coverage[path];
    }

    coverageData.hash = hash;
    return coverage[path] = coverageData;
  }();
  cov_ajtf4fka4.s[0]++;

  var cov_2rgyxv1v55 = function () {
    var path = '/Users/gkatsevman/p/mpd-parser/src/index.js',
        hash = '2b273693315c8bb99663ad5103491e57cbc59410',
        Function = function () {}.constructor,
        global = new Function('return this')(),
        gcv = '__coverage__',
        coverageData = {
      path: '/Users/gkatsevman/p/mpd-parser/src/index.js',
      statementMap: {
        '0': {
          start: {
            line: 8,
            column: 23
          },
          end: {
            line: 8,
            column: 30
          }
        },
        '1': {
          start: {
            line: 10,
            column: 21
          },
          end: {
            line: 11,
            column: 102
          }
        },
        '2': {
          start: {
            line: 11,
            column: 2
          },
          end: {
            line: 11,
            column: 102
          }
        },
        '3': {
          start: {
            line: 21,
            column: 30
          },
          end: {
            line: 22,
            column: 54
          }
        },
        '4': {
          start: {
            line: 22,
            column: 2
          },
          end: {
            line: 22,
            column: 54
          }
        }
      },
      fnMap: {
        '0': {
          name: '(anonymous_0)',
          decl: {
            start: {
              line: 10,
              column: 21
            },
            end: {
              line: 10,
              column: 22
            }
          },
          loc: {
            start: {
              line: 11,
              column: 2
            },
            end: {
              line: 11,
              column: 102
            }
          },
          line: 11
        },
        '1': {
          name: '(anonymous_1)',
          decl: {
            start: {
              line: 21,
              column: 30
            },
            end: {
              line: 21,
              column: 31
            }
          },
          loc: {
            start: {
              line: 22,
              column: 2
            },
            end: {
              line: 22,
              column: 54
            }
          },
          line: 22
        }
      },
      branchMap: {
        '0': {
          loc: {
            start: {
              line: 10,
              column: 38
            },
            end: {
              line: 10,
              column: 50
            }
          },
          type: 'default-arg',
          locations: [{
            start: {
              line: 10,
              column: 48
            },
            end: {
              line: 10,
              column: 50
            }
          }],
          line: 10
        }
      },
      s: {
        '0': 0,
        '1': 0,
        '2': 0,
        '3': 0,
        '4': 0
      },
      f: {
        '0': 0,
        '1': 0
      },
      b: {
        '0': [0]
      },
      _coverageSchema: '332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'
    },
        coverage = global[gcv] || (global[gcv] = {});

    if (coverage[path] && coverage[path].hash === hash) {
      return coverage[path];
    }

    coverageData.hash = hash;
    return coverage[path] = coverageData;
  }();
  var VERSION = (cov_2rgyxv1v55.s[0]++, version);
  cov_2rgyxv1v55.s[1]++;
  var parse = function parse(manifestString, options) {
    if (options === void 0) {
      options = (cov_2rgyxv1v55.b[0][0]++, {});
    }

    cov_2rgyxv1v55.f[0]++;
    cov_2rgyxv1v55.s[2]++;
    return toM3u8(toPlaylists(inheritAttributes(stringToMpdXml(manifestString), options)), options.sidxMapping);
  };
  cov_2rgyxv1v55.s[3]++;

  var maatVttSegmentTemplate = "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<MPD xmlns=\"urn:mpeg:dash:schema:mpd:2011\" xmlns:cenc=\"urn:mpeg:cenc:2013\" profiles=\"urn:mpeg:dash:profile:isoff-live:2011\" type=\"static\" mediaPresentationDuration=\"PT6S\" minBufferTime=\"PT2.000S\">\n  <BaseURL>https://www.example.com/base</BaseURL>\n  <Period>\n\n    <AdaptationSet mimeType=\"audio/mp4\" segmentAlignment=\"true\" startWithSAP=\"1\" lang=\"en\">\n      <ContentProtection value=\"cenc\" schemeIdUri=\"urn:mpeg:dash:mp4protection:2011\" cenc:default_KID=\"aaa\"/>\n      <ContentProtection schemeIdUri=\"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed\">\n        <cenc:pssh>test</cenc:pssh>\n      </ContentProtection>\n\n      <Role schemeIdUri=\"urn:mpeg:dash:role:2011\" value=\"main\"></Role>\n      <SegmentTemplate duration=\"95232\" initialization=\"$RepresentationID$/init.m4f\" media=\"$RepresentationID$/$Number$.m4f\" startNumber=\"0\" timescale=\"48000\"></SegmentTemplate>\n      <Representation audioSamplingRate=\"48000\" bandwidth=\"63000\" codecs=\"mp4a.40.2\" id=\"63000\">\n      </Representation>\n      <Representation audioSamplingRate=\"48000\" bandwidth=\"125000\" codecs=\"mp4a.40.2\" id=\"125000\">\n      </Representation>\n    </AdaptationSet>\n\n    <AdaptationSet mimeType=\"audio/mp4\" segmentAlignment=\"true\" startWithSAP=\"1\" lang=\"es\">\n      <ContentProtection value=\"cenc\" schemeIdUri=\"urn:mpeg:dash:mp4protection:2011\" cenc:default_KID=\"aaa\"/>\n      <ContentProtection schemeIdUri=\"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed\">\n        <cenc:pssh>test</cenc:pssh>\n      </ContentProtection>\n\n      <Role schemeIdUri=\"urn:mpeg:dash:role:2011\"></Role>\n      <SegmentTemplate duration=\"95232\" initialization=\"$RepresentationID$/es/init.m4f\" media=\"$RepresentationID$/es/$Number$.m4f\" startNumber=\"0\" timescale=\"48000\"></SegmentTemplate>\n      <Representation audioSamplingRate=\"48000\" bandwidth=\"63000\" codecs=\"mp4a.40.2\" id=\"63000\">\n      </Representation>\n      <Representation audioSamplingRate=\"48000\" bandwidth=\"125000\" codecs=\"mp4a.40.2\" id=\"125000\">\n      </Representation>\n    </AdaptationSet>\n\n    <AdaptationSet mimeType=\"video/mp4\" scanType=\"progressive\" segmentAlignment=\"true\" startWithSAP=\"1\">\n      <ContentProtection value=\"cenc\" schemeIdUri=\"urn:mpeg:dash:mp4protection:2011\" cenc:default_KID=\"aaa\"/>\n      <ContentProtection schemeIdUri=\"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed\">\n        <cenc:pssh>test</cenc:pssh>\n      </ContentProtection>\n\n      <Role schemeIdUri=\"urn:mpeg:dash:role:2011\" value=\"main\"></Role>\n      <SegmentTemplate duration=\"46046\" initialization=\"$RepresentationID$/init.m4f\" media=\"$RepresentationID$/$Number$.m4f\" startNumber=\"0\" timescale=\"24000\"></SegmentTemplate>\n      <Representation bandwidth=\"449000\" codecs=\"avc1.420015\" frameRate=\"2997/125\" height=\"270\" id=\"482\" width=\"482\">\n      </Representation>\n      <Representation bandwidth=\"3971000\" codecs=\"avc1.64001e\" frameRate=\"2997/125\" height=\"404\" id=\"720\" width=\"720\">\n      </Representation>\n    </AdaptationSet>\n\n    <AdaptationSet mimeType=\"text/vtt\" lang=\"en\">\n      <Representation bandwidth=\"256\" id=\"en\">\n        <BaseURL>https://example.com/en.vtt</BaseURL>\n      </Representation>\n    </AdaptationSet>\n    <AdaptationSet mimeType=\"text/vtt\" lang=\"es\">\n      <Representation bandwidth=\"256\" id=\"es\">\n        <BaseURL>https://example.com/es.vtt</BaseURL>\n      </Representation>\n    </AdaptationSet>\n\n  </Period>\n</MPD>\n";

  var segmentBaseTemplate = "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<MPD xmlns=\"urn:mpeg:dash:schema:mpd:2011\" profiles=\"urn:mpeg:dash:profile:isoff-live:2011\" type=\"static\" mediaPresentationDuration=\"PT6S\" minBufferTime=\"PT2.000S\">\n  <BaseURL>https://www.example.com/base</BaseURL>\n  <Period>\n    <AdaptationSet mimeType=\"video/mp4\" scanType=\"progressive\" segmentAlignment=\"true\" startWithSAP=\"1\">\n      <Role schemeIdUri=\"urn:mpeg:dash:role:2011\" value=\"main\"></Role>\n      <Representation bandwidth=\"449000\" codecs=\"avc1.420015\" frameRate=\"2997/125\" height=\"270\" id=\"482\" width=\"482\" >\n        <SegmentBase></SegmentBase>\n      </Representation>  \n      <BaseURL>1080p.ts</BaseURL>\n      <SegmentBase>\n        <RepresentationIndex sourceURL=\"1080p.sidx\"/>\n      </SegmentBase>\n    </AdaptationSet>\n  </Period>\n</MPD>\n";

  var segmentListTemplate = "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<MPD xmlns=\"urn:mpeg:dash:schema:mpd:2011\" profiles=\"urn:mpeg:dash:profile:isoff-live:2011\" type=\"static\" mediaPresentationDuration=\"PT6S\" minBufferTime=\"PT2.000S\">\n  <BaseURL>https://www.example.com/base</BaseURL>\n  <Period>\n    <AdaptationSet mimeType=\"video/mp4\" scanType=\"progressive\" segmentAlignment=\"true\" startWithSAP=\"1\">\n      <Role schemeIdUri=\"urn:mpeg:dash:role:2011\" value=\"main\"></Role>\n      <Representation bandwidth=\"449000\" codecs=\"avc1.420015\" frameRate=\"2997/125\" height=\"270\" id=\"482\" width=\"482\" >\n      </Representation>\n      <SegmentList timescale=\"1000\" duration=\"1000\">\n        <RepresentationIndex sourceURL=\"representation-index-low\"/>\n        <SegmentURL media=\"low/segment-1.ts\"/>\n        <SegmentURL media=\"low/segment-2.ts\"/>\n        <SegmentURL media=\"low/segment-3.ts\"/>\n        <SegmentURL media=\"low/segment-4.ts\"/>\n        <SegmentURL media=\"low/segment-5.ts\"/>\n        <SegmentURL media=\"low/segment-6.ts\"/>\n        <SegmentURL media=\"low/segment-7.ts\"/>\n        <SegmentURL media=\"low/segment-8.ts\"/>\n        <SegmentURL media=\"low/segment-9.ts\"/>\n        <SegmentURL media=\"low/segment-10.ts\"/>\n      </SegmentList>\n    </AdaptationSet>\n\n    <AdaptationSet mimeType=\"video/mp4\" scanType=\"progressive\" segmentAlignment=\"true\" startWithSAP=\"1\">\n      <Role schemeIdUri=\"urn:mpeg:dash:role:2011\" value=\"main\"></Role>\n      <Representation bandwidth=\"3971000\" codecs=\"avc1.420015\" frameRate=\"2997/125\" height=\"404\" id=\"720\" width=\"720\" >\n        <SegmentList timescale=\"90000\">\n          <RepresentationIndex sourceURL=\"representation-index-high\"/>\n          <SegmentTimeline>\n            <S t=\"0\" r=\"9\" d=\"5400000\"/>\n          </SegmentTimeline>\n          <SegmentURL media=\"high/segment-1.ts\"/>\n          <SegmentURL media=\"high/segment-2.ts\"/>\n          <SegmentURL media=\"high/segment-3.ts\"/>\n          <SegmentURL media=\"high/segment-4.ts\"/>\n          <SegmentURL media=\"high/segment-5.ts\"/>\n          <SegmentURL media=\"high/segment-6.ts\"/>\n          <SegmentURL media=\"high/segment-7.ts\"/>\n          <SegmentURL media=\"high/segment-8.ts\"/>\n          <SegmentURL media=\"high/segment-9.ts\"/>\n          <SegmentURL media=\"high/segment-10.ts\"/>\n        </SegmentList>\n      </Representation>\n    </AdaptationSet>\n\n  </Period>\n</MPD>\n";

  var multiperiod = "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<MPD xmlns=\"urn:mpeg:dash:schema:mpd:2011\" xmlns:cenc=\"urn:mpeg:cenc:2013\" profiles=\"urn:mpeg:dash:profile:isoff-live:2011\" type=\"static\" mediaPresentationDuration=\"PT36.269S\" minBufferTime=\"PT2.000S\">\n  <Period id=\"0\" duration=\"PT5.972633333S\">\n    <AdaptationSet mimeType=\"audio/mp4\" segmentAlignment=\"true\" startWithSAP=\"1\" lang=\"en\">\n      <Role schemeIdUri=\"urn:mpeg:dash:role:2011\" value=\"main\"></Role>\n      <SegmentTemplate initialization=\"https://example.com/$RepresentationID$/init0.m4f\" media=\"https://example.com/$RepresentationID$/segment$Number$.m4f\" startNumber=\"0\" timescale=\"44100\">\n        <SegmentTimeline>\n          <S d=\"88064\" r=\"2\"></S>\n        </SegmentTimeline>\n      </SegmentTemplate>\n      <Representation audioSamplingRate=\"44100\" bandwidth=\"123000\" codecs=\"mp4a.40.2\" id=\"default_audio128_2\"></Representation>\n      <Representation audioSamplingRate=\"44100\" bandwidth=\"93000\" codecs=\"mp4a.40.2\" id=\"default_audio96_2\"></Representation>\n    </AdaptationSet>\n    <AdaptationSet mimeType=\"video/mp4\" scanType=\"progressive\" segmentAlignment=\"true\" startWithSAP=\"1\">\n      <Role schemeIdUri=\"urn:mpeg:dash:role:2011\" value=\"main\"></Role>\n      <SegmentTemplate initialization=\"https://example.com/$RepresentationID$/init0.m4f\" media=\"https://example.com/$RepresentationID$/segment$Number$.m4f\" startNumber=\"0\" timescale=\"30000\">\n        <SegmentTimeline>\n          <S d=\"60060\" r=\"1\"></S>\n          <S d=\"59059\"></S>\n        </SegmentTimeline>\n      </SegmentTemplate>\n      <Representation bandwidth=\"2008000\" codecs=\"avc1.4d001f\" frameRate=\"2997/100\" height=\"720\" id=\"default_video2000_0_1280x720\" width=\"1280\"></Representation>\n      <Representation bandwidth=\"1195000\" codecs=\"avc1.4d001f\" frameRate=\"2997/100\" height=\"540\" id=\"default_video1200_1_960x540\" width=\"960\"></Representation>\n      <Representation bandwidth=\"884000\" codecs=\"avc1.4d001e\" frameRate=\"2997/100\" height=\"360\" id=\"default_video900_1_640x360\" width=\"640\"></Representation>\n    </AdaptationSet>\n  </Period>\n  <Period id=\"1\" duration=\"PT4.838166665S\">\n    <AdaptationSet mimeType=\"audio/mp4\" segmentAlignment=\"true\" startWithSAP=\"1\" lang=\"en\">\n      <ContentProtection value=\"cenc\" schemeIdUri=\"urn:mpeg:dash:mp4protection:2011\" cenc:default_KID=\"aaa\"/>\n      <ContentProtection schemeIdUri=\"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed\">\n        <cenc:pssh>test</cenc:pssh>\n      </ContentProtection>\n      <Role schemeIdUri=\"urn:mpeg:dash:role:2011\" value=\"main\"></Role>\n      <SegmentTemplate initialization=\"https://example.com/$RepresentationID$/init1.m4f\" media=\"https://example.com/$RepresentationID$/segment$Number$.m4f\" startNumber=\"3\" timescale=\"44100\">\n        <SegmentTimeline>\n          <S d=\"88064\" r=\"1\"></S>\n          <S d=\"37888\"></S>\n        </SegmentTimeline>\n      </SegmentTemplate>\n      <Representation audioSamplingRate=\"44100\" bandwidth=\"123000\" codecs=\"mp4a.40.2\" id=\"default_audio128_2\"></Representation>\n      <Representation audioSamplingRate=\"44100\" bandwidth=\"93000\" codecs=\"mp4a.40.2\" id=\"default_audio96_2\"></Representation>\n    </AdaptationSet>\n    <AdaptationSet mimeType=\"video/mp4\" scanType=\"progressive\" segmentAlignment=\"true\" startWithSAP=\"1\">\n      <ContentProtection value=\"cenc\" schemeIdUri=\"urn:mpeg:dash:mp4protection:2011\" cenc:default_KID=\"aaa\"/>\n      <ContentProtection schemeIdUri=\"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed\">\n        <cenc:pssh>test</cenc:pssh>\n      </ContentProtection>\n      <Role schemeIdUri=\"urn:mpeg:dash:role:2011\" value=\"main\"></Role>\n      <SegmentTemplate initialization=\"https://example.com/$RepresentationID$/init1.m4f\" media=\"https://example.com/$RepresentationID$/segment$Number$.m4f\" startNumber=\"3\" timescale=\"30000\">\n        <SegmentTimeline>\n          <S d=\"58058\" r=\"1\"></S>\n          <S d=\"29029\"></S>\n        </SegmentTimeline>\n      </SegmentTemplate>\n      <Representation bandwidth=\"2008000\" codecs=\"avc1.4d001f\" frameRate=\"2997/100\" height=\"720\" id=\"default_video2000_0_1280x720\" width=\"1280\"></Representation>\n      <Representation bandwidth=\"1195000\" codecs=\"avc1.4d001f\" frameRate=\"2997/100\" height=\"540\" id=\"default_video1200_1_960x540\" width=\"960\"></Representation>\n      <Representation bandwidth=\"884000\" codecs=\"avc1.4d001e\" frameRate=\"2997/100\" height=\"360\" id=\"default_video900_1_640x360\" width=\"640\"></Representation>\n    </AdaptationSet>\n  </Period>\n  <Period id=\"2\" duration=\"PT13.980633333S\">\n    <AdaptationSet mimeType=\"audio/mp4\" segmentAlignment=\"true\" startWithSAP=\"1\" lang=\"en\">\n      <Role schemeIdUri=\"urn:mpeg:dash:role:2011\" value=\"main\"></Role>\n      <SegmentTemplate initialization=\"https://example.com/$RepresentationID$/init2.m4f\" media=\"https://example.com/$RepresentationID$/segment$Number$.m4f\" startNumber=\"6\" timescale=\"44100\">\n        <SegmentTimeline>\n          <S d=\"88064\" r=\"6\"></S>\n          <S d=\"1024\"></S>\n        </SegmentTimeline>\n      </SegmentTemplate>\n      <Representation audioSamplingRate=\"44100\" bandwidth=\"123000\" codecs=\"mp4a.40.2\" id=\"default_audio128_2\"></Representation>\n      <Representation audioSamplingRate=\"44100\" bandwidth=\"93000\" codecs=\"mp4a.40.2\" id=\"default_audio96_2\"></Representation>\n    </AdaptationSet>\n    <AdaptationSet mimeType=\"video/mp4\" scanType=\"progressive\" segmentAlignment=\"true\" startWithSAP=\"1\">\n      <Role schemeIdUri=\"urn:mpeg:dash:role:2011\" value=\"main\"></Role>\n      <SegmentTemplate initialization=\"https://example.com/$RepresentationID$/init2.m4f\" media=\"https://example.com/$RepresentationID$/segment$Number$.m4f\" startNumber=\"6\" timescale=\"30000\">\n        <SegmentTimeline>\n          <S d=\"60060\" r=\"5\"></S>\n          <S d=\"59059\"></S>\n        </SegmentTimeline>\n      </SegmentTemplate>\n      <Representation bandwidth=\"2008000\" codecs=\"avc1.4d001f\" frameRate=\"2997/100\" height=\"720\" id=\"default_video2000_0_1280x720\" width=\"1280\"></Representation>\n      <Representation bandwidth=\"1195000\" codecs=\"avc1.4d001f\" frameRate=\"2997/100\" height=\"540\" id=\"default_video1200_1_960x540\" width=\"960\"></Representation>\n      <Representation bandwidth=\"884000\" codecs=\"avc1.4d001e\" frameRate=\"2997/100\" height=\"360\" id=\"default_video900_1_640x360\" width=\"640\"></Representation>\n    </AdaptationSet>\n  </Period>\n  <Period id=\"3\" duration=\"PT3.157913831S\">\n    <AdaptationSet mimeType=\"audio/mp4\" segmentAlignment=\"true\" startWithSAP=\"1\" lang=\"en\">\n      <ContentProtection value=\"cenc\" schemeIdUri=\"urn:mpeg:dash:mp4protection:2011\" cenc:default_KID=\"aaa\"/>\n      <ContentProtection schemeIdUri=\"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed\">\n        <cenc:pssh>test</cenc:pssh>\n      </ContentProtection>\n      <Role schemeIdUri=\"urn:mpeg:dash:role:2011\" value=\"main\"></Role>\n      <SegmentTemplate presentationTimeOffset=\"214016\" initialization=\"https://example.com/$RepresentationID$/init3.m4f\" media=\"https://example.com/$RepresentationID$/segment$Number$.m4f\" startNumber=\"14\" timescale=\"44100\">\n        <SegmentTimeline>\n          <S d=\"51200\"></S>\n          <S d=\"88064\"></S>\n        </SegmentTimeline>\n      </SegmentTemplate>\n      <Representation audioSamplingRate=\"44100\" bandwidth=\"123000\" codecs=\"mp4a.40.2\" id=\"default_audio128_2\"></Representation>\n      <Representation audioSamplingRate=\"44100\" bandwidth=\"93000\" codecs=\"mp4a.40.2\" id=\"default_audio96_2\"></Representation>\n    </AdaptationSet>\n    <AdaptationSet mimeType=\"video/mp4\" scanType=\"progressive\" segmentAlignment=\"true\" startWithSAP=\"1\">\n      <ContentProtection value=\"cenc\" schemeIdUri=\"urn:mpeg:dash:mp4protection:2011\" cenc:default_KID=\"aaa\"/>\n      <ContentProtection schemeIdUri=\"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed\">\n        <cenc:pssh>test</cenc:pssh>\n      </ContentProtection>\n      <Role schemeIdUri=\"urn:mpeg:dash:role:2011\" value=\"main\"></Role>\n      <SegmentTemplate presentationTimeOffset=\"145145\" initialization=\"https://example.com/$RepresentationID$/init3.m4f\" media=\"https://example.com/$RepresentationID$/segment$Number$.m4f\" startNumber=\"13\" timescale=\"30000\">\n        <SegmentTimeline>\n          <S d=\"29029\"></S>\n          <S d=\"58058\"></S>\n          <S d=\"8008\"></S>\n        </SegmentTimeline>\n      </SegmentTemplate>\n      <Representation bandwidth=\"2008000\" codecs=\"avc1.4d001f\" frameRate=\"2997/100\" height=\"720\" id=\"default_video2000_0_1280x720\" width=\"1280\"></Representation>\n      <Representation bandwidth=\"1195000\" codecs=\"avc1.4d001f\" frameRate=\"2997/100\" height=\"540\" id=\"default_video1200_1_960x540\" width=\"960\"></Representation>\n      <Representation bandwidth=\"884000\" codecs=\"avc1.4d001e\" frameRate=\"2997/100\" height=\"360\" id=\"default_video900_1_640x360\" width=\"640\"></Representation>\n    </AdaptationSet>\n  </Period>\n  <Period id=\"4\" duration=\"PT7.987664396S\">\n    <AdaptationSet mimeType=\"audio/mp4\" segmentAlignment=\"true\" startWithSAP=\"1\" lang=\"en\">\n      <Role schemeIdUri=\"urn:mpeg:dash:role:2011\" value=\"main\"></Role>\n      <SegmentTemplate initialization=\"https://example.com/$RepresentationID$/segment$Number$.m4f\" media=\"https://example.com/$RepresentationID$/segment$Number$.m4f\" startNumber=\"16\" timescale=\"44100\">\n        <SegmentTimeline>\n          <S d=\"88064\" r=\"3\"></S>\n        </SegmentTimeline>\n      </SegmentTemplate>\n      <Representation audioSamplingRate=\"44100\" bandwidth=\"123000\" codecs=\"mp4a.40.2\" id=\"default_audio128_2\"></Representation>\n      <Representation audioSamplingRate=\"44100\" bandwidth=\"93000\" codecs=\"mp4a.40.2\" id=\"default_audio96_2\"></Representation>\n    </AdaptationSet>\n    <AdaptationSet mimeType=\"video/mp4\" scanType=\"progressive\" segmentAlignment=\"true\" startWithSAP=\"1\">\n      <Role schemeIdUri=\"urn:mpeg:dash:role:2011\" value=\"main\"></Role>\n      <SegmentTemplate initialization=\"https://example.com/$RepresentationID$/segment$Number$.m4f\" media=\"https://example.com/$RepresentationID$/segment$Number$.m4f\" startNumber=\"16\" timescale=\"30000\">\n        <SegmentTimeline>\n          <S d=\"60060\" r=\"2\"></S>\n          <S d=\"59059\"></S>\n        </SegmentTimeline>\n      </SegmentTemplate>\n      <Representation bandwidth=\"2008000\" codecs=\"avc1.4d001f\" frameRate=\"2997/100\" height=\"720\" id=\"default_video2000_0_1280x720\" width=\"1280\"></Representation>\n      <Representation bandwidth=\"1195000\" codecs=\"avc1.4d001f\" frameRate=\"2997/100\" height=\"540\" id=\"default_video1200_1_960x540\" width=\"960\"></Representation>\n      <Representation bandwidth=\"884000\" codecs=\"avc1.4d001e\" frameRate=\"2997/100\" height=\"360\" id=\"default_video900_1_640x360\" width=\"640\"></Representation>\n    </AdaptationSet>\n  </Period>\n</MPD>\n";

  var _attributes, _attributes2, _audio, _attributes3, _attributes4, _mediaGroups, _attributes5, _attributes6;

  var parsedManifest = {
    allowCache: true,
    discontinuityStarts: [],
    duration: 6,
    endList: true,
    minimumUpdatePeriod: 0,
    mediaGroups: (_mediaGroups = {
      AUDIO: {
        audio: (_audio = {}, _audio['en (main)'] = {
          autoselect: true,
          default: true,
          language: 'en',
          playlists: [{
            attributes: (_attributes = {
              BANDWIDTH: 125000,
              CODECS: 'mp4a.40.2',
              NAME: '125000'
            }, _attributes['PROGRAM-ID'] = 1, _attributes),
            contentProtection: {
              'com.widevine.alpha': {
                attributes: {
                  schemeIdUri: 'urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed'
                },
                pssh: new Uint8Array([181, 235, 45])
              }
            },
            endList: true,
            mediaSequence: 0,
            targetDuration: 1.984,
            resolvedUri: '',
            segments: [{
              duration: 1.984,
              map: {
                resolvedUri: 'https://www.example.com/125000/init.m4f',
                uri: '125000/init.m4f'
              },
              resolvedUri: 'https://www.example.com/125000/0.m4f',
              timeline: 0,
              uri: '125000/0.m4f',
              number: 0
            }, {
              duration: 1.984,
              map: {
                resolvedUri: 'https://www.example.com/125000/init.m4f',
                uri: '125000/init.m4f'
              },
              resolvedUri: 'https://www.example.com/125000/1.m4f',
              timeline: 0,
              uri: '125000/1.m4f',
              number: 1
            }, {
              duration: 1.984,
              map: {
                resolvedUri: 'https://www.example.com/125000/init.m4f',
                uri: '125000/init.m4f'
              },
              resolvedUri: 'https://www.example.com/125000/2.m4f',
              timeline: 0,
              uri: '125000/2.m4f',
              number: 2
            }, {
              duration: 0.04800000000000004,
              map: {
                resolvedUri: 'https://www.example.com/125000/init.m4f',
                uri: '125000/init.m4f'
              },
              resolvedUri: 'https://www.example.com/125000/3.m4f',
              timeline: 0,
              uri: '125000/3.m4f',
              number: 3
            }],
            timeline: 0,
            uri: ''
          }],
          uri: ''
        }, _audio['es'] = {
          autoselect: true,
          default: false,
          language: 'es',
          playlists: [{
            attributes: (_attributes2 = {
              BANDWIDTH: 125000,
              CODECS: 'mp4a.40.2',
              NAME: '125000'
            }, _attributes2['PROGRAM-ID'] = 1, _attributes2),
            contentProtection: {
              'com.widevine.alpha': {
                attributes: {
                  schemeIdUri: 'urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed'
                },
                pssh: new Uint8Array([181, 235, 45])
              }
            },
            endList: true,
            targetDuration: 1.984,
            mediaSequence: 0,
            resolvedUri: '',
            segments: [{
              duration: 1.984,
              map: {
                resolvedUri: 'https://www.example.com/125000/es/init.m4f',
                uri: '125000/es/init.m4f'
              },
              resolvedUri: 'https://www.example.com/125000/es/0.m4f',
              timeline: 0,
              uri: '125000/es/0.m4f',
              number: 0
            }, {
              duration: 1.984,
              map: {
                resolvedUri: 'https://www.example.com/125000/es/init.m4f',
                uri: '125000/es/init.m4f'
              },
              resolvedUri: 'https://www.example.com/125000/es/1.m4f',
              timeline: 0,
              uri: '125000/es/1.m4f',
              number: 1
            }, {
              duration: 1.984,
              map: {
                resolvedUri: 'https://www.example.com/125000/es/init.m4f',
                uri: '125000/es/init.m4f'
              },
              resolvedUri: 'https://www.example.com/125000/es/2.m4f',
              timeline: 0,
              uri: '125000/es/2.m4f',
              number: 2
            }, {
              duration: 0.04800000000000004,
              map: {
                resolvedUri: 'https://www.example.com/125000/es/init.m4f',
                uri: '125000/es/init.m4f'
              },
              resolvedUri: 'https://www.example.com/125000/es/3.m4f',
              timeline: 0,
              uri: '125000/es/3.m4f',
              number: 3
            }],
            timeline: 0,
            uri: ''
          }],
          uri: ''
        }, _audio)
      }
    }, _mediaGroups['CLOSED-CAPTIONS'] = {}, _mediaGroups.SUBTITLES = {
      subs: {
        en: {
          autoselect: false,
          default: false,
          language: 'en',
          playlists: [{
            attributes: (_attributes3 = {
              BANDWIDTH: 256,
              NAME: 'en'
            }, _attributes3['PROGRAM-ID'] = 1, _attributes3),
            mediaSequence: 0,
            endList: true,
            targetDuration: 6,
            resolvedUri: 'https://example.com/en.vtt',
            segments: [{
              duration: 6,
              resolvedUri: 'https://example.com/en.vtt',
              timeline: 0,
              uri: 'https://example.com/en.vtt',
              number: 0
            }],
            timeline: 0,
            uri: ''
          }],
          uri: ''
        },
        es: {
          autoselect: false,
          default: false,
          language: 'es',
          playlists: [{
            attributes: (_attributes4 = {
              BANDWIDTH: 256,
              NAME: 'es'
            }, _attributes4['PROGRAM-ID'] = 1, _attributes4),
            endList: true,
            targetDuration: 6,
            mediaSequence: 0,
            resolvedUri: 'https://example.com/es.vtt',
            segments: [{
              duration: 6,
              resolvedUri: 'https://example.com/es.vtt',
              timeline: 0,
              uri: 'https://example.com/es.vtt',
              number: 0
            }],
            timeline: 0,
            uri: ''
          }],
          uri: ''
        }
      }
    }, _mediaGroups.VIDEO = {}, _mediaGroups),
    playlists: [{
      attributes: (_attributes5 = {
        AUDIO: 'audio',
        SUBTITLES: 'subs',
        BANDWIDTH: 449000,
        CODECS: 'avc1.420015',
        NAME: '482'
      }, _attributes5['PROGRAM-ID'] = 1, _attributes5.RESOLUTION = {
        height: 270,
        width: 482
      }, _attributes5),
      contentProtection: {
        'com.widevine.alpha': {
          attributes: {
            schemeIdUri: 'urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed'
          },
          pssh: new Uint8Array([181, 235, 45])
        }
      },
      endList: true,
      targetDuration: 1.9185833333333333,
      mediaSequence: 0,
      resolvedUri: '',
      segments: [{
        duration: 1.9185833333333333,
        map: {
          resolvedUri: 'https://www.example.com/482/init.m4f',
          uri: '482/init.m4f'
        },
        resolvedUri: 'https://www.example.com/482/0.m4f',
        timeline: 0,
        uri: '482/0.m4f',
        number: 0
      }, {
        duration: 1.9185833333333333,
        map: {
          resolvedUri: 'https://www.example.com/482/init.m4f',
          uri: '482/init.m4f'
        },
        resolvedUri: 'https://www.example.com/482/1.m4f',
        timeline: 0,
        uri: '482/1.m4f',
        number: 1
      }, {
        duration: 1.9185833333333333,
        map: {
          resolvedUri: 'https://www.example.com/482/init.m4f',
          uri: '482/init.m4f'
        },
        resolvedUri: 'https://www.example.com/482/2.m4f',
        timeline: 0,
        uri: '482/2.m4f',
        number: 2
      }, {
        duration: 0.24425000000000008,
        map: {
          resolvedUri: 'https://www.example.com/482/init.m4f',
          uri: '482/init.m4f'
        },
        resolvedUri: 'https://www.example.com/482/3.m4f',
        timeline: 0,
        uri: '482/3.m4f',
        number: 3
      }],
      timeline: 0,
      uri: ''
    }, {
      attributes: (_attributes6 = {
        AUDIO: 'audio',
        SUBTITLES: 'subs',
        BANDWIDTH: 3971000,
        CODECS: 'avc1.64001e',
        NAME: '720'
      }, _attributes6['PROGRAM-ID'] = 1, _attributes6.RESOLUTION = {
        height: 404,
        width: 720
      }, _attributes6),
      contentProtection: {
        'com.widevine.alpha': {
          attributes: {
            schemeIdUri: 'urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed'
          },
          pssh: new Uint8Array([181, 235, 45])
        }
      },
      endList: true,
      targetDuration: 1.9185833333333333,
      mediaSequence: 0,
      resolvedUri: '',
      segments: [{
        duration: 1.9185833333333333,
        map: {
          resolvedUri: 'https://www.example.com/720/init.m4f',
          uri: '720/init.m4f'
        },
        resolvedUri: 'https://www.example.com/720/0.m4f',
        timeline: 0,
        uri: '720/0.m4f',
        number: 0
      }, {
        duration: 1.9185833333333333,
        map: {
          resolvedUri: 'https://www.example.com/720/init.m4f',
          uri: '720/init.m4f'
        },
        resolvedUri: 'https://www.example.com/720/1.m4f',
        timeline: 0,
        uri: '720/1.m4f',
        number: 1
      }, {
        duration: 1.9185833333333333,
        map: {
          resolvedUri: 'https://www.example.com/720/init.m4f',
          uri: '720/init.m4f'
        },
        resolvedUri: 'https://www.example.com/720/2.m4f',
        timeline: 0,
        uri: '720/2.m4f',
        number: 2
      }, {
        duration: 0.24425000000000008,
        map: {
          resolvedUri: 'https://www.example.com/720/init.m4f',
          uri: '720/init.m4f'
        },
        resolvedUri: 'https://www.example.com/720/3.m4f',
        timeline: 0,
        uri: '720/3.m4f',
        number: 3
      }],
      timeline: 0,
      uri: ''
    }],
    segments: [],
    uri: ''
  };

  var parsedManifest$1 = {
    allowCache: true,
    discontinuityStarts: [],
    duration: 6,
    endList: true,
    minimumUpdatePeriod: 0,
    mediaGroups: {
      'AUDIO': {},
      'CLOSED-CAPTIONS': {},
      'SUBTITLES': {},
      'VIDEO': {}
    },
    playlists: [{
      attributes: {
        'AUDIO': 'audio',
        'BANDWIDTH': 449000,
        'CODECS': 'avc1.420015',
        'NAME': '482',
        'PROGRAM-ID': 1,
        'RESOLUTION': {
          height: 270,
          width: 482
        },
        'SUBTITLES': 'subs'
      },
      endList: true,
      resolvedUri: '',
      targetDuration: 6,
      mediaSequence: 0,
      segments: [{
        duration: 6,
        timeline: 0,
        number: 0,
        map: {
          uri: '',
          resolvedUri: 'https://www.example.com/1080p.ts'
        },
        resolvedUri: 'https://www.example.com/1080p.ts',
        uri: 'https://www.example.com/1080p.ts'
      }],
      timeline: 0,
      uri: ''
    }],
    segments: [],
    uri: ''
  };

  var parsedManifest$2 = {
    allowCache: true,
    discontinuityStarts: [],
    duration: 6,
    endList: true,
    minimumUpdatePeriod: 0,
    mediaGroups: {
      'AUDIO': {},
      'CLOSED-CAPTIONS': {},
      'SUBTITLES': {},
      'VIDEO': {}
    },
    playlists: [{
      attributes: {
        'AUDIO': 'audio',
        'BANDWIDTH': 449000,
        'CODECS': 'avc1.420015',
        'NAME': '482',
        'PROGRAM-ID': 1,
        'RESOLUTION': {
          height: 270,
          width: 482
        },
        'SUBTITLES': 'subs'
      },
      endList: true,
      mediaSequence: 1,
      targetDuration: 1,
      resolvedUri: '',
      segments: [{
        duration: 1,
        map: {
          uri: '',
          resolvedUri: 'https://www.example.com/base'
        },
        resolvedUri: 'https://www.example.com/low/segment-1.ts',
        timeline: 0,
        uri: 'low/segment-1.ts',
        number: 1
      }, {
        duration: 1,
        map: {
          uri: '',
          resolvedUri: 'https://www.example.com/base'
        },
        resolvedUri: 'https://www.example.com/low/segment-2.ts',
        timeline: 0,
        uri: 'low/segment-2.ts',
        number: 2
      }, {
        duration: 1,
        map: {
          uri: '',
          resolvedUri: 'https://www.example.com/base'
        },
        resolvedUri: 'https://www.example.com/low/segment-3.ts',
        timeline: 0,
        uri: 'low/segment-3.ts',
        number: 3
      }, {
        duration: 1,
        map: {
          uri: '',
          resolvedUri: 'https://www.example.com/base'
        },
        resolvedUri: 'https://www.example.com/low/segment-4.ts',
        timeline: 0,
        uri: 'low/segment-4.ts',
        number: 4
      }, {
        duration: 1,
        map: {
          uri: '',
          resolvedUri: 'https://www.example.com/base'
        },
        resolvedUri: 'https://www.example.com/low/segment-5.ts',
        timeline: 0,
        uri: 'low/segment-5.ts',
        number: 5
      }, {
        duration: 1,
        map: {
          uri: '',
          resolvedUri: 'https://www.example.com/base'
        },
        resolvedUri: 'https://www.example.com/low/segment-6.ts',
        timeline: 0,
        uri: 'low/segment-6.ts',
        number: 6
      }],
      timeline: 0,
      uri: ''
    }, {
      attributes: {
        'AUDIO': 'audio',
        'BANDWIDTH': 3971000,
        'CODECS': 'avc1.420015',
        'NAME': '720',
        'PROGRAM-ID': 1,
        'RESOLUTION': {
          height: 404,
          width: 720
        },
        'SUBTITLES': 'subs'
      },
      endList: true,
      resolvedUri: '',
      mediaSequence: 1,
      targetDuration: 60,
      segments: [{
        duration: 60,
        map: {
          uri: '',
          resolvedUri: 'https://www.example.com/base'
        },
        resolvedUri: 'https://www.example.com/high/segment-1.ts',
        timeline: 0,
        uri: 'high/segment-1.ts',
        number: 1
      }, {
        duration: 60,
        map: {
          uri: '',
          resolvedUri: 'https://www.example.com/base'
        },
        resolvedUri: 'https://www.example.com/high/segment-2.ts',
        timeline: 0,
        uri: 'high/segment-2.ts',
        number: 2
      }, {
        duration: 60,
        map: {
          uri: '',
          resolvedUri: 'https://www.example.com/base'
        },
        resolvedUri: 'https://www.example.com/high/segment-3.ts',
        timeline: 0,
        uri: 'high/segment-3.ts',
        number: 3
      }, {
        duration: 60,
        map: {
          uri: '',
          resolvedUri: 'https://www.example.com/base'
        },
        resolvedUri: 'https://www.example.com/high/segment-4.ts',
        timeline: 0,
        uri: 'high/segment-4.ts',
        number: 4
      }, {
        duration: 60,
        map: {
          uri: '',
          resolvedUri: 'https://www.example.com/base'
        },
        resolvedUri: 'https://www.example.com/high/segment-5.ts',
        timeline: 0,
        uri: 'high/segment-5.ts',
        number: 5
      }, {
        duration: 60,
        map: {
          uri: '',
          resolvedUri: 'https://www.example.com/base'
        },
        resolvedUri: 'https://www.example.com/high/segment-6.ts',
        timeline: 0,
        uri: 'high/segment-6.ts',
        number: 6
      }, {
        duration: 60,
        map: {
          uri: '',
          resolvedUri: 'https://www.example.com/base'
        },
        resolvedUri: 'https://www.example.com/high/segment-7.ts',
        timeline: 0,
        uri: 'high/segment-7.ts',
        number: 7
      }, {
        duration: 60,
        map: {
          uri: '',
          resolvedUri: 'https://www.example.com/base'
        },
        resolvedUri: 'https://www.example.com/high/segment-8.ts',
        timeline: 0,
        uri: 'high/segment-8.ts',
        number: 8
      }, {
        duration: 60,
        map: {
          uri: '',
          resolvedUri: 'https://www.example.com/base'
        },
        resolvedUri: 'https://www.example.com/high/segment-9.ts',
        timeline: 0,
        uri: 'high/segment-9.ts',
        number: 9
      }, {
        duration: 60,
        map: {
          uri: '',
          resolvedUri: 'https://www.example.com/base'
        },
        resolvedUri: 'https://www.example.com/high/segment-10.ts',
        timeline: 0,
        uri: 'high/segment-10.ts',
        number: 10
      }],
      timeline: 0,
      uri: ''
    }],
    segments: [],
    uri: ''
  };

  var parsedManifest$3 = {
    allowCache: true,
    discontinuityStarts: [],
    segments: [],
    endList: true,
    mediaGroups: {
      'AUDIO': {
        audio: {
          'en (main)': {
            language: 'en',
            autoselect: true,
            default: true,
            playlists: [{
              attributes: {
                'NAME': 'default_audio128_2',
                'BANDWIDTH': 123000,
                'CODECS': 'mp4a.40.2',
                'PROGRAM-ID': 1
              },
              uri: '',
              endList: true,
              timeline: 0,
              resolvedUri: '',
              targetDuration: 2,
              segments: [{
                uri: 'https://example.com/default_audio128_2/segment0.m4f',
                timeline: 0,
                duration: 1.9969160997732427,
                resolvedUri: 'https://example.com/default_audio128_2/segment0.m4f',
                map: {
                  uri: 'https://example.com/default_audio128_2/init0.m4f',
                  resolvedUri: 'https://example.com/default_audio128_2/init0.m4f'
                },
                number: 0
              }, {
                uri: 'https://example.com/default_audio128_2/segment1.m4f',
                timeline: 0,
                duration: 1.9969160997732427,
                resolvedUri: 'https://example.com/default_audio128_2/segment1.m4f',
                map: {
                  uri: 'https://example.com/default_audio128_2/init0.m4f',
                  resolvedUri: 'https://example.com/default_audio128_2/init0.m4f'
                },
                number: 1
              }, {
                uri: 'https://example.com/default_audio128_2/segment2.m4f',
                timeline: 0,
                duration: 1.9969160997732427,
                resolvedUri: 'https://example.com/default_audio128_2/segment2.m4f',
                map: {
                  uri: 'https://example.com/default_audio128_2/init0.m4f',
                  resolvedUri: 'https://example.com/default_audio128_2/init0.m4f'
                },
                number: 2
              }, {
                uri: 'https://example.com/default_audio128_2/segment3.m4f',
                timeline: 1,
                duration: 1.9969160997732427,
                resolvedUri: 'https://example.com/default_audio128_2/segment3.m4f',
                map: {
                  uri: 'https://example.com/default_audio128_2/init1.m4f',
                  resolvedUri: 'https://example.com/default_audio128_2/init1.m4f'
                },
                number: 3,
                discontinuity: true
              }, {
                uri: 'https://example.com/default_audio128_2/segment4.m4f',
                timeline: 1,
                duration: 1.9969160997732427,
                resolvedUri: 'https://example.com/default_audio128_2/segment4.m4f',
                map: {
                  uri: 'https://example.com/default_audio128_2/init1.m4f',
                  resolvedUri: 'https://example.com/default_audio128_2/init1.m4f'
                },
                number: 4
              }, {
                uri: 'https://example.com/default_audio128_2/segment5.m4f',
                timeline: 1,
                duration: 0.8591383219954648,
                resolvedUri: 'https://example.com/default_audio128_2/segment5.m4f',
                map: {
                  uri: 'https://example.com/default_audio128_2/init1.m4f',
                  resolvedUri: 'https://example.com/default_audio128_2/init1.m4f'
                },
                number: 5
              }, {
                uri: 'https://example.com/default_audio128_2/segment6.m4f',
                timeline: 2,
                duration: 1.9969160997732427,
                resolvedUri: 'https://example.com/default_audio128_2/segment6.m4f',
                map: {
                  uri: 'https://example.com/default_audio128_2/init2.m4f',
                  resolvedUri: 'https://example.com/default_audio128_2/init2.m4f'
                },
                number: 6,
                discontinuity: true
              }, {
                uri: 'https://example.com/default_audio128_2/segment7.m4f',
                timeline: 2,
                duration: 1.9969160997732427,
                resolvedUri: 'https://example.com/default_audio128_2/segment7.m4f',
                map: {
                  uri: 'https://example.com/default_audio128_2/init2.m4f',
                  resolvedUri: 'https://example.com/default_audio128_2/init2.m4f'
                },
                number: 7
              }, {
                uri: 'https://example.com/default_audio128_2/segment8.m4f',
                timeline: 2,
                duration: 1.9969160997732427,
                resolvedUri: 'https://example.com/default_audio128_2/segment8.m4f',
                map: {
                  uri: 'https://example.com/default_audio128_2/init2.m4f',
                  resolvedUri: 'https://example.com/default_audio128_2/init2.m4f'
                },
                number: 8
              }, {
                uri: 'https://example.com/default_audio128_2/segment9.m4f',
                timeline: 2,
                duration: 1.9969160997732427,
                resolvedUri: 'https://example.com/default_audio128_2/segment9.m4f',
                map: {
                  uri: 'https://example.com/default_audio128_2/init2.m4f',
                  resolvedUri: 'https://example.com/default_audio128_2/init2.m4f'
                },
                number: 9
              }, {
                uri: 'https://example.com/default_audio128_2/segment10.m4f',
                timeline: 2,
                duration: 1.9969160997732427,
                resolvedUri: 'https://example.com/default_audio128_2/segment10.m4f',
                map: {
                  uri: 'https://example.com/default_audio128_2/init2.m4f',
                  resolvedUri: 'https://example.com/default_audio128_2/init2.m4f'
                },
                number: 10
              }, {
                uri: 'https://example.com/default_audio128_2/segment11.m4f',
                timeline: 2,
                duration: 1.9969160997732427,
                resolvedUri: 'https://example.com/default_audio128_2/segment11.m4f',
                map: {
                  uri: 'https://example.com/default_audio128_2/init2.m4f',
                  resolvedUri: 'https://example.com/default_audio128_2/init2.m4f'
                },
                number: 11
              }, {
                uri: 'https://example.com/default_audio128_2/segment12.m4f',
                timeline: 2,
                duration: 1.9969160997732427,
                resolvedUri: 'https://example.com/default_audio128_2/segment12.m4f',
                map: {
                  uri: 'https://example.com/default_audio128_2/init2.m4f',
                  resolvedUri: 'https://example.com/default_audio128_2/init2.m4f'
                },
                number: 12
              }, {
                uri: 'https://example.com/default_audio128_2/segment13.m4f',
                timeline: 2,
                duration: 0.023219954648526078,
                resolvedUri: 'https://example.com/default_audio128_2/segment13.m4f',
                map: {
                  uri: 'https://example.com/default_audio128_2/init2.m4f',
                  resolvedUri: 'https://example.com/default_audio128_2/init2.m4f'
                },
                number: 13
              }, {
                uri: 'https://example.com/default_audio128_2/segment14.m4f',
                timeline: 3,
                duration: 1.1609977324263039,
                resolvedUri: 'https://example.com/default_audio128_2/segment14.m4f',
                map: {
                  uri: 'https://example.com/default_audio128_2/init3.m4f',
                  resolvedUri: 'https://example.com/default_audio128_2/init3.m4f'
                },
                number: 14,
                discontinuity: true
              }, {
                uri: 'https://example.com/default_audio128_2/segment15.m4f',
                timeline: 3,
                duration: 1.9969160997732427,
                resolvedUri: 'https://example.com/default_audio128_2/segment15.m4f',
                map: {
                  uri: 'https://example.com/default_audio128_2/init3.m4f',
                  resolvedUri: 'https://example.com/default_audio128_2/init3.m4f'
                },
                number: 15
              }, {
                uri: 'https://example.com/default_audio128_2/segment16.m4f',
                timeline: 4,
                duration: 1.9969160997732427,
                resolvedUri: 'https://example.com/default_audio128_2/segment16.m4f',
                map: {
                  uri: 'https://example.com/default_audio128_2/segment$Number$.m4f',
                  resolvedUri: 'https://example.com/default_audio128_2/segment$Number$.m4f'
                },
                number: 16,
                discontinuity: true
              }, {
                uri: 'https://example.com/default_audio128_2/segment17.m4f',
                timeline: 4,
                duration: 1.9969160997732427,
                resolvedUri: 'https://example.com/default_audio128_2/segment17.m4f',
                map: {
                  uri: 'https://example.com/default_audio128_2/segment$Number$.m4f',
                  resolvedUri: 'https://example.com/default_audio128_2/segment$Number$.m4f'
                },
                number: 17
              }, {
                uri: 'https://example.com/default_audio128_2/segment18.m4f',
                timeline: 4,
                duration: 1.9969160997732427,
                resolvedUri: 'https://example.com/default_audio128_2/segment18.m4f',
                map: {
                  uri: 'https://example.com/default_audio128_2/segment$Number$.m4f',
                  resolvedUri: 'https://example.com/default_audio128_2/segment$Number$.m4f'
                },
                number: 18
              }, {
                uri: 'https://example.com/default_audio128_2/segment19.m4f',
                timeline: 4,
                duration: 1.9969160997732427,
                resolvedUri: 'https://example.com/default_audio128_2/segment19.m4f',
                map: {
                  uri: 'https://example.com/default_audio128_2/segment$Number$.m4f',
                  resolvedUri: 'https://example.com/default_audio128_2/segment$Number$.m4f'
                },
                number: 19
              }],
              mediaSequence: 0,
              contentProtection: {
                'com.widevine.alpha': {
                  attributes: {
                    schemeIdUri: 'urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed'
                  },
                  pssh: new Uint8Array([181, 235, 45])
                }
              }
            }],
            uri: ''
          }
        }
      },
      'VIDEO': {},
      'CLOSED-CAPTIONS': {},
      'SUBTITLES': {}
    },
    uri: '',
    duration: 36.269,
    playlists: [{
      attributes: {
        'NAME': 'default_video2000_0_1280x720',
        'AUDIO': 'audio',
        'SUBTITLES': 'subs',
        'RESOLUTION': {
          width: 1280,
          height: 720
        },
        'CODECS': 'avc1.4d001f',
        'BANDWIDTH': 2008E3,
        'PROGRAM-ID': 1
      },
      uri: '',
      endList: true,
      timeline: 0,
      resolvedUri: '',
      targetDuration: 3,
      segments: [{
        uri: 'https://example.com/default_video2000_0_1280x720/segment0.m4f',
        timeline: 0,
        duration: 2.002,
        resolvedUri: 'https://example.com/default_video2000_0_1280x720/segment0.m4f',
        map: {
          uri: 'https://example.com/default_video2000_0_1280x720/init0.m4f',
          resolvedUri: 'https://example.com/default_video2000_0_1280x720/init0.m4f'
        },
        number: 0
      }, {
        uri: 'https://example.com/default_video2000_0_1280x720/segment1.m4f',
        timeline: 0,
        duration: 2.002,
        resolvedUri: 'https://example.com/default_video2000_0_1280x720/segment1.m4f',
        map: {
          uri: 'https://example.com/default_video2000_0_1280x720/init0.m4f',
          resolvedUri: 'https://example.com/default_video2000_0_1280x720/init0.m4f'
        },
        number: 1
      }, {
        uri: 'https://example.com/default_video2000_0_1280x720/segment2.m4f',
        timeline: 0,
        duration: 1.9686333333333332,
        resolvedUri: 'https://example.com/default_video2000_0_1280x720/segment2.m4f',
        map: {
          uri: 'https://example.com/default_video2000_0_1280x720/init0.m4f',
          resolvedUri: 'https://example.com/default_video2000_0_1280x720/init0.m4f'
        },
        number: 2
      }, {
        uri: 'https://example.com/default_video2000_0_1280x720/segment3.m4f',
        timeline: 1,
        duration: 1.9352666666666667,
        resolvedUri: 'https://example.com/default_video2000_0_1280x720/segment3.m4f',
        map: {
          uri: 'https://example.com/default_video2000_0_1280x720/init1.m4f',
          resolvedUri: 'https://example.com/default_video2000_0_1280x720/init1.m4f'
        },
        number: 3,
        discontinuity: true
      }, {
        uri: 'https://example.com/default_video2000_0_1280x720/segment4.m4f',
        timeline: 1,
        duration: 1.9352666666666667,
        resolvedUri: 'https://example.com/default_video2000_0_1280x720/segment4.m4f',
        map: {
          uri: 'https://example.com/default_video2000_0_1280x720/init1.m4f',
          resolvedUri: 'https://example.com/default_video2000_0_1280x720/init1.m4f'
        },
        number: 4
      }, {
        uri: 'https://example.com/default_video2000_0_1280x720/segment5.m4f',
        timeline: 1,
        duration: 0.9676333333333333,
        resolvedUri: 'https://example.com/default_video2000_0_1280x720/segment5.m4f',
        map: {
          uri: 'https://example.com/default_video2000_0_1280x720/init1.m4f',
          resolvedUri: 'https://example.com/default_video2000_0_1280x720/init1.m4f'
        },
        number: 5
      }, {
        uri: 'https://example.com/default_video2000_0_1280x720/segment6.m4f',
        timeline: 2,
        duration: 2.002,
        resolvedUri: 'https://example.com/default_video2000_0_1280x720/segment6.m4f',
        map: {
          uri: 'https://example.com/default_video2000_0_1280x720/init2.m4f',
          resolvedUri: 'https://example.com/default_video2000_0_1280x720/init2.m4f'
        },
        number: 6,
        discontinuity: true
      }, {
        uri: 'https://example.com/default_video2000_0_1280x720/segment7.m4f',
        timeline: 2,
        duration: 2.002,
        resolvedUri: 'https://example.com/default_video2000_0_1280x720/segment7.m4f',
        map: {
          uri: 'https://example.com/default_video2000_0_1280x720/init2.m4f',
          resolvedUri: 'https://example.com/default_video2000_0_1280x720/init2.m4f'
        },
        number: 7
      }, {
        uri: 'https://example.com/default_video2000_0_1280x720/segment8.m4f',
        timeline: 2,
        duration: 2.002,
        resolvedUri: 'https://example.com/default_video2000_0_1280x720/segment8.m4f',
        map: {
          uri: 'https://example.com/default_video2000_0_1280x720/init2.m4f',
          resolvedUri: 'https://example.com/default_video2000_0_1280x720/init2.m4f'
        },
        number: 8
      }, {
        uri: 'https://example.com/default_video2000_0_1280x720/segment9.m4f',
        timeline: 2,
        duration: 2.002,
        resolvedUri: 'https://example.com/default_video2000_0_1280x720/segment9.m4f',
        map: {
          uri: 'https://example.com/default_video2000_0_1280x720/init2.m4f',
          resolvedUri: 'https://example.com/default_video2000_0_1280x720/init2.m4f'
        },
        number: 9
      }, {
        uri: 'https://example.com/default_video2000_0_1280x720/segment10.m4f',
        timeline: 2,
        duration: 2.002,
        resolvedUri: 'https://example.com/default_video2000_0_1280x720/segment10.m4f',
        map: {
          uri: 'https://example.com/default_video2000_0_1280x720/init2.m4f',
          resolvedUri: 'https://example.com/default_video2000_0_1280x720/init2.m4f'
        },
        number: 10
      }, {
        uri: 'https://example.com/default_video2000_0_1280x720/segment11.m4f',
        timeline: 2,
        duration: 2.002,
        resolvedUri: 'https://example.com/default_video2000_0_1280x720/segment11.m4f',
        map: {
          uri: 'https://example.com/default_video2000_0_1280x720/init2.m4f',
          resolvedUri: 'https://example.com/default_video2000_0_1280x720/init2.m4f'
        },
        number: 11
      }, {
        uri: 'https://example.com/default_video2000_0_1280x720/segment12.m4f',
        timeline: 2,
        duration: 1.9686333333333332,
        resolvedUri: 'https://example.com/default_video2000_0_1280x720/segment12.m4f',
        map: {
          uri: 'https://example.com/default_video2000_0_1280x720/init2.m4f',
          resolvedUri: 'https://example.com/default_video2000_0_1280x720/init2.m4f'
        },
        number: 12
      }, {
        uri: 'https://example.com/default_video2000_0_1280x720/segment13.m4f',
        timeline: 3,
        duration: 0.9676333333333333,
        resolvedUri: 'https://example.com/default_video2000_0_1280x720/segment13.m4f',
        map: {
          uri: 'https://example.com/default_video2000_0_1280x720/init3.m4f',
          resolvedUri: 'https://example.com/default_video2000_0_1280x720/init3.m4f'
        },
        number: 13,
        discontinuity: true
      }, {
        uri: 'https://example.com/default_video2000_0_1280x720/segment14.m4f',
        timeline: 3,
        duration: 1.9352666666666667,
        resolvedUri: 'https://example.com/default_video2000_0_1280x720/segment14.m4f',
        map: {
          uri: 'https://example.com/default_video2000_0_1280x720/init3.m4f',
          resolvedUri: 'https://example.com/default_video2000_0_1280x720/init3.m4f'
        },
        number: 14
      }, {
        uri: 'https://example.com/default_video2000_0_1280x720/segment15.m4f',
        timeline: 3,
        duration: 0.26693333333333336,
        resolvedUri: 'https://example.com/default_video2000_0_1280x720/segment15.m4f',
        map: {
          uri: 'https://example.com/default_video2000_0_1280x720/init3.m4f',
          resolvedUri: 'https://example.com/default_video2000_0_1280x720/init3.m4f'
        },
        number: 15
      }, {
        uri: 'https://example.com/default_video2000_0_1280x720/segment16.m4f',
        timeline: 4,
        duration: 2.002,
        resolvedUri: 'https://example.com/default_video2000_0_1280x720/segment16.m4f',
        map: {
          uri: 'https://example.com/default_video2000_0_1280x720/segment$Number$.m4f',
          resolvedUri: 'https://example.com/default_video2000_0_1280x720/segment$Number$.m4f'
        },
        number: 16,
        discontinuity: true
      }, {
        uri: 'https://example.com/default_video2000_0_1280x720/segment17.m4f',
        timeline: 4,
        duration: 2.002,
        resolvedUri: 'https://example.com/default_video2000_0_1280x720/segment17.m4f',
        map: {
          uri: 'https://example.com/default_video2000_0_1280x720/segment$Number$.m4f',
          resolvedUri: 'https://example.com/default_video2000_0_1280x720/segment$Number$.m4f'
        },
        number: 17
      }, {
        uri: 'https://example.com/default_video2000_0_1280x720/segment18.m4f',
        timeline: 4,
        duration: 2.002,
        resolvedUri: 'https://example.com/default_video2000_0_1280x720/segment18.m4f',
        map: {
          uri: 'https://example.com/default_video2000_0_1280x720/segment$Number$.m4f',
          resolvedUri: 'https://example.com/default_video2000_0_1280x720/segment$Number$.m4f'
        },
        number: 18
      }, {
        uri: 'https://example.com/default_video2000_0_1280x720/segment19.m4f',
        timeline: 4,
        duration: 1.9686333333333332,
        resolvedUri: 'https://example.com/default_video2000_0_1280x720/segment19.m4f',
        map: {
          uri: 'https://example.com/default_video2000_0_1280x720/segment$Number$.m4f',
          resolvedUri: 'https://example.com/default_video2000_0_1280x720/segment$Number$.m4f'
        },
        number: 19
      }],
      mediaSequence: 0,
      contentProtection: {
        'com.widevine.alpha': {
          attributes: {
            schemeIdUri: 'urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed'
          },
          pssh: new Uint8Array([181, 235, 45])
        }
      }
    }, {
      attributes: {
        'NAME': 'default_video1200_1_960x540',
        'AUDIO': 'audio',
        'SUBTITLES': 'subs',
        'RESOLUTION': {
          width: 960,
          height: 540
        },
        'CODECS': 'avc1.4d001f',
        'BANDWIDTH': 1195E3,
        'PROGRAM-ID': 1
      },
      uri: '',
      endList: true,
      timeline: 0,
      resolvedUri: '',
      targetDuration: 3,
      segments: [{
        uri: 'https://example.com/default_video1200_1_960x540/segment0.m4f',
        timeline: 0,
        duration: 2.002,
        resolvedUri: 'https://example.com/default_video1200_1_960x540/segment0.m4f',
        map: {
          uri: 'https://example.com/default_video1200_1_960x540/init0.m4f',
          resolvedUri: 'https://example.com/default_video1200_1_960x540/init0.m4f'
        },
        number: 0
      }, {
        uri: 'https://example.com/default_video1200_1_960x540/segment1.m4f',
        timeline: 0,
        duration: 2.002,
        resolvedUri: 'https://example.com/default_video1200_1_960x540/segment1.m4f',
        map: {
          uri: 'https://example.com/default_video1200_1_960x540/init0.m4f',
          resolvedUri: 'https://example.com/default_video1200_1_960x540/init0.m4f'
        },
        number: 1
      }, {
        uri: 'https://example.com/default_video1200_1_960x540/segment2.m4f',
        timeline: 0,
        duration: 1.9686333333333332,
        resolvedUri: 'https://example.com/default_video1200_1_960x540/segment2.m4f',
        map: {
          uri: 'https://example.com/default_video1200_1_960x540/init0.m4f',
          resolvedUri: 'https://example.com/default_video1200_1_960x540/init0.m4f'
        },
        number: 2
      }, {
        uri: 'https://example.com/default_video1200_1_960x540/segment3.m4f',
        timeline: 1,
        duration: 1.9352666666666667,
        resolvedUri: 'https://example.com/default_video1200_1_960x540/segment3.m4f',
        map: {
          uri: 'https://example.com/default_video1200_1_960x540/init1.m4f',
          resolvedUri: 'https://example.com/default_video1200_1_960x540/init1.m4f'
        },
        number: 3,
        discontinuity: true
      }, {
        uri: 'https://example.com/default_video1200_1_960x540/segment4.m4f',
        timeline: 1,
        duration: 1.9352666666666667,
        resolvedUri: 'https://example.com/default_video1200_1_960x540/segment4.m4f',
        map: {
          uri: 'https://example.com/default_video1200_1_960x540/init1.m4f',
          resolvedUri: 'https://example.com/default_video1200_1_960x540/init1.m4f'
        },
        number: 4
      }, {
        uri: 'https://example.com/default_video1200_1_960x540/segment5.m4f',
        timeline: 1,
        duration: 0.9676333333333333,
        resolvedUri: 'https://example.com/default_video1200_1_960x540/segment5.m4f',
        map: {
          uri: 'https://example.com/default_video1200_1_960x540/init1.m4f',
          resolvedUri: 'https://example.com/default_video1200_1_960x540/init1.m4f'
        },
        number: 5
      }, {
        uri: 'https://example.com/default_video1200_1_960x540/segment6.m4f',
        timeline: 2,
        duration: 2.002,
        resolvedUri: 'https://example.com/default_video1200_1_960x540/segment6.m4f',
        map: {
          uri: 'https://example.com/default_video1200_1_960x540/init2.m4f',
          resolvedUri: 'https://example.com/default_video1200_1_960x540/init2.m4f'
        },
        number: 6,
        discontinuity: true
      }, {
        uri: 'https://example.com/default_video1200_1_960x540/segment7.m4f',
        timeline: 2,
        duration: 2.002,
        resolvedUri: 'https://example.com/default_video1200_1_960x540/segment7.m4f',
        map: {
          uri: 'https://example.com/default_video1200_1_960x540/init2.m4f',
          resolvedUri: 'https://example.com/default_video1200_1_960x540/init2.m4f'
        },
        number: 7
      }, {
        uri: 'https://example.com/default_video1200_1_960x540/segment8.m4f',
        timeline: 2,
        duration: 2.002,
        resolvedUri: 'https://example.com/default_video1200_1_960x540/segment8.m4f',
        map: {
          uri: 'https://example.com/default_video1200_1_960x540/init2.m4f',
          resolvedUri: 'https://example.com/default_video1200_1_960x540/init2.m4f'
        },
        number: 8
      }, {
        uri: 'https://example.com/default_video1200_1_960x540/segment9.m4f',
        timeline: 2,
        duration: 2.002,
        resolvedUri: 'https://example.com/default_video1200_1_960x540/segment9.m4f',
        map: {
          uri: 'https://example.com/default_video1200_1_960x540/init2.m4f',
          resolvedUri: 'https://example.com/default_video1200_1_960x540/init2.m4f'
        },
        number: 9
      }, {
        uri: 'https://example.com/default_video1200_1_960x540/segment10.m4f',
        timeline: 2,
        duration: 2.002,
        resolvedUri: 'https://example.com/default_video1200_1_960x540/segment10.m4f',
        map: {
          uri: 'https://example.com/default_video1200_1_960x540/init2.m4f',
          resolvedUri: 'https://example.com/default_video1200_1_960x540/init2.m4f'
        },
        number: 10
      }, {
        uri: 'https://example.com/default_video1200_1_960x540/segment11.m4f',
        timeline: 2,
        duration: 2.002,
        resolvedUri: 'https://example.com/default_video1200_1_960x540/segment11.m4f',
        map: {
          uri: 'https://example.com/default_video1200_1_960x540/init2.m4f',
          resolvedUri: 'https://example.com/default_video1200_1_960x540/init2.m4f'
        },
        number: 11
      }, {
        uri: 'https://example.com/default_video1200_1_960x540/segment12.m4f',
        timeline: 2,
        duration: 1.9686333333333332,
        resolvedUri: 'https://example.com/default_video1200_1_960x540/segment12.m4f',
        map: {
          uri: 'https://example.com/default_video1200_1_960x540/init2.m4f',
          resolvedUri: 'https://example.com/default_video1200_1_960x540/init2.m4f'
        },
        number: 12
      }, {
        uri: 'https://example.com/default_video1200_1_960x540/segment13.m4f',
        timeline: 3,
        duration: 0.9676333333333333,
        resolvedUri: 'https://example.com/default_video1200_1_960x540/segment13.m4f',
        map: {
          uri: 'https://example.com/default_video1200_1_960x540/init3.m4f',
          resolvedUri: 'https://example.com/default_video1200_1_960x540/init3.m4f'
        },
        number: 13,
        discontinuity: true
      }, {
        uri: 'https://example.com/default_video1200_1_960x540/segment14.m4f',
        timeline: 3,
        duration: 1.9352666666666667,
        resolvedUri: 'https://example.com/default_video1200_1_960x540/segment14.m4f',
        map: {
          uri: 'https://example.com/default_video1200_1_960x540/init3.m4f',
          resolvedUri: 'https://example.com/default_video1200_1_960x540/init3.m4f'
        },
        number: 14
      }, {
        uri: 'https://example.com/default_video1200_1_960x540/segment15.m4f',
        timeline: 3,
        duration: 0.26693333333333336,
        resolvedUri: 'https://example.com/default_video1200_1_960x540/segment15.m4f',
        map: {
          uri: 'https://example.com/default_video1200_1_960x540/init3.m4f',
          resolvedUri: 'https://example.com/default_video1200_1_960x540/init3.m4f'
        },
        number: 15
      }, {
        uri: 'https://example.com/default_video1200_1_960x540/segment16.m4f',
        timeline: 4,
        duration: 2.002,
        resolvedUri: 'https://example.com/default_video1200_1_960x540/segment16.m4f',
        map: {
          uri: 'https://example.com/default_video1200_1_960x540/segment$Number$.m4f',
          resolvedUri: 'https://example.com/default_video1200_1_960x540/segment$Number$.m4f'
        },
        number: 16,
        discontinuity: true
      }, {
        uri: 'https://example.com/default_video1200_1_960x540/segment17.m4f',
        timeline: 4,
        duration: 2.002,
        resolvedUri: 'https://example.com/default_video1200_1_960x540/segment17.m4f',
        map: {
          uri: 'https://example.com/default_video1200_1_960x540/segment$Number$.m4f',
          resolvedUri: 'https://example.com/default_video1200_1_960x540/segment$Number$.m4f'
        },
        number: 17
      }, {
        uri: 'https://example.com/default_video1200_1_960x540/segment18.m4f',
        timeline: 4,
        duration: 2.002,
        resolvedUri: 'https://example.com/default_video1200_1_960x540/segment18.m4f',
        map: {
          uri: 'https://example.com/default_video1200_1_960x540/segment$Number$.m4f',
          resolvedUri: 'https://example.com/default_video1200_1_960x540/segment$Number$.m4f'
        },
        number: 18
      }, {
        uri: 'https://example.com/default_video1200_1_960x540/segment19.m4f',
        timeline: 4,
        duration: 1.9686333333333332,
        resolvedUri: 'https://example.com/default_video1200_1_960x540/segment19.m4f',
        map: {
          uri: 'https://example.com/default_video1200_1_960x540/segment$Number$.m4f',
          resolvedUri: 'https://example.com/default_video1200_1_960x540/segment$Number$.m4f'
        },
        number: 19
      }],
      mediaSequence: 0,
      contentProtection: {
        'com.widevine.alpha': {
          attributes: {
            schemeIdUri: 'urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed'
          },
          pssh: new Uint8Array([181, 235, 45])
        }
      }
    }, {
      attributes: {
        'NAME': 'default_video900_1_640x360',
        'AUDIO': 'audio',
        'SUBTITLES': 'subs',
        'RESOLUTION': {
          width: 640,
          height: 360
        },
        'CODECS': 'avc1.4d001e',
        'BANDWIDTH': 884E3,
        'PROGRAM-ID': 1
      },
      uri: '',
      endList: true,
      timeline: 0,
      resolvedUri: '',
      targetDuration: 3,
      segments: [{
        uri: 'https://example.com/default_video900_1_640x360/segment0.m4f',
        timeline: 0,
        duration: 2.002,
        resolvedUri: 'https://example.com/default_video900_1_640x360/segment0.m4f',
        map: {
          uri: 'https://example.com/default_video900_1_640x360/init0.m4f',
          resolvedUri: 'https://example.com/default_video900_1_640x360/init0.m4f'
        },
        number: 0
      }, {
        uri: 'https://example.com/default_video900_1_640x360/segment1.m4f',
        timeline: 0,
        duration: 2.002,
        resolvedUri: 'https://example.com/default_video900_1_640x360/segment1.m4f',
        map: {
          uri: 'https://example.com/default_video900_1_640x360/init0.m4f',
          resolvedUri: 'https://example.com/default_video900_1_640x360/init0.m4f'
        },
        number: 1
      }, {
        uri: 'https://example.com/default_video900_1_640x360/segment2.m4f',
        timeline: 0,
        duration: 1.9686333333333332,
        resolvedUri: 'https://example.com/default_video900_1_640x360/segment2.m4f',
        map: {
          uri: 'https://example.com/default_video900_1_640x360/init0.m4f',
          resolvedUri: 'https://example.com/default_video900_1_640x360/init0.m4f'
        },
        number: 2
      }, {
        uri: 'https://example.com/default_video900_1_640x360/segment3.m4f',
        timeline: 1,
        duration: 1.9352666666666667,
        resolvedUri: 'https://example.com/default_video900_1_640x360/segment3.m4f',
        map: {
          uri: 'https://example.com/default_video900_1_640x360/init1.m4f',
          resolvedUri: 'https://example.com/default_video900_1_640x360/init1.m4f'
        },
        number: 3,
        discontinuity: true
      }, {
        uri: 'https://example.com/default_video900_1_640x360/segment4.m4f',
        timeline: 1,
        duration: 1.9352666666666667,
        resolvedUri: 'https://example.com/default_video900_1_640x360/segment4.m4f',
        map: {
          uri: 'https://example.com/default_video900_1_640x360/init1.m4f',
          resolvedUri: 'https://example.com/default_video900_1_640x360/init1.m4f'
        },
        number: 4
      }, {
        uri: 'https://example.com/default_video900_1_640x360/segment5.m4f',
        timeline: 1,
        duration: 0.9676333333333333,
        resolvedUri: 'https://example.com/default_video900_1_640x360/segment5.m4f',
        map: {
          uri: 'https://example.com/default_video900_1_640x360/init1.m4f',
          resolvedUri: 'https://example.com/default_video900_1_640x360/init1.m4f'
        },
        number: 5
      }, {
        uri: 'https://example.com/default_video900_1_640x360/segment6.m4f',
        timeline: 2,
        duration: 2.002,
        resolvedUri: 'https://example.com/default_video900_1_640x360/segment6.m4f',
        map: {
          uri: 'https://example.com/default_video900_1_640x360/init2.m4f',
          resolvedUri: 'https://example.com/default_video900_1_640x360/init2.m4f'
        },
        number: 6,
        discontinuity: true
      }, {
        uri: 'https://example.com/default_video900_1_640x360/segment7.m4f',
        timeline: 2,
        duration: 2.002,
        resolvedUri: 'https://example.com/default_video900_1_640x360/segment7.m4f',
        map: {
          uri: 'https://example.com/default_video900_1_640x360/init2.m4f',
          resolvedUri: 'https://example.com/default_video900_1_640x360/init2.m4f'
        },
        number: 7
      }, {
        uri: 'https://example.com/default_video900_1_640x360/segment8.m4f',
        timeline: 2,
        duration: 2.002,
        resolvedUri: 'https://example.com/default_video900_1_640x360/segment8.m4f',
        map: {
          uri: 'https://example.com/default_video900_1_640x360/init2.m4f',
          resolvedUri: 'https://example.com/default_video900_1_640x360/init2.m4f'
        },
        number: 8
      }, {
        uri: 'https://example.com/default_video900_1_640x360/segment9.m4f',
        timeline: 2,
        duration: 2.002,
        resolvedUri: 'https://example.com/default_video900_1_640x360/segment9.m4f',
        map: {
          uri: 'https://example.com/default_video900_1_640x360/init2.m4f',
          resolvedUri: 'https://example.com/default_video900_1_640x360/init2.m4f'
        },
        number: 9
      }, {
        uri: 'https://example.com/default_video900_1_640x360/segment10.m4f',
        timeline: 2,
        duration: 2.002,
        resolvedUri: 'https://example.com/default_video900_1_640x360/segment10.m4f',
        map: {
          uri: 'https://example.com/default_video900_1_640x360/init2.m4f',
          resolvedUri: 'https://example.com/default_video900_1_640x360/init2.m4f'
        },
        number: 10
      }, {
        uri: 'https://example.com/default_video900_1_640x360/segment11.m4f',
        timeline: 2,
        duration: 2.002,
        resolvedUri: 'https://example.com/default_video900_1_640x360/segment11.m4f',
        map: {
          uri: 'https://example.com/default_video900_1_640x360/init2.m4f',
          resolvedUri: 'https://example.com/default_video900_1_640x360/init2.m4f'
        },
        number: 11
      }, {
        uri: 'https://example.com/default_video900_1_640x360/segment12.m4f',
        timeline: 2,
        duration: 1.9686333333333332,
        resolvedUri: 'https://example.com/default_video900_1_640x360/segment12.m4f',
        map: {
          uri: 'https://example.com/default_video900_1_640x360/init2.m4f',
          resolvedUri: 'https://example.com/default_video900_1_640x360/init2.m4f'
        },
        number: 12
      }, {
        uri: 'https://example.com/default_video900_1_640x360/segment13.m4f',
        timeline: 3,
        duration: 0.9676333333333333,
        resolvedUri: 'https://example.com/default_video900_1_640x360/segment13.m4f',
        map: {
          uri: 'https://example.com/default_video900_1_640x360/init3.m4f',
          resolvedUri: 'https://example.com/default_video900_1_640x360/init3.m4f'
        },
        number: 13,
        discontinuity: true
      }, {
        uri: 'https://example.com/default_video900_1_640x360/segment14.m4f',
        timeline: 3,
        duration: 1.9352666666666667,
        resolvedUri: 'https://example.com/default_video900_1_640x360/segment14.m4f',
        map: {
          uri: 'https://example.com/default_video900_1_640x360/init3.m4f',
          resolvedUri: 'https://example.com/default_video900_1_640x360/init3.m4f'
        },
        number: 14
      }, {
        uri: 'https://example.com/default_video900_1_640x360/segment15.m4f',
        timeline: 3,
        duration: 0.26693333333333336,
        resolvedUri: 'https://example.com/default_video900_1_640x360/segment15.m4f',
        map: {
          uri: 'https://example.com/default_video900_1_640x360/init3.m4f',
          resolvedUri: 'https://example.com/default_video900_1_640x360/init3.m4f'
        },
        number: 15
      }, {
        uri: 'https://example.com/default_video900_1_640x360/segment16.m4f',
        timeline: 4,
        duration: 2.002,
        resolvedUri: 'https://example.com/default_video900_1_640x360/segment16.m4f',
        map: {
          uri: 'https://example.com/default_video900_1_640x360/segment$Number$.m4f',
          resolvedUri: 'https://example.com/default_video900_1_640x360/segment$Number$.m4f'
        },
        number: 16,
        discontinuity: true
      }, {
        uri: 'https://example.com/default_video900_1_640x360/segment17.m4f',
        timeline: 4,
        duration: 2.002,
        resolvedUri: 'https://example.com/default_video900_1_640x360/segment17.m4f',
        map: {
          uri: 'https://example.com/default_video900_1_640x360/segment$Number$.m4f',
          resolvedUri: 'https://example.com/default_video900_1_640x360/segment$Number$.m4f'
        },
        number: 17
      }, {
        uri: 'https://example.com/default_video900_1_640x360/segment18.m4f',
        timeline: 4,
        duration: 2.002,
        resolvedUri: 'https://example.com/default_video900_1_640x360/segment18.m4f',
        map: {
          uri: 'https://example.com/default_video900_1_640x360/segment$Number$.m4f',
          resolvedUri: 'https://example.com/default_video900_1_640x360/segment$Number$.m4f'
        },
        number: 18
      }, {
        uri: 'https://example.com/default_video900_1_640x360/segment19.m4f',
        timeline: 4,
        duration: 1.9686333333333332,
        resolvedUri: 'https://example.com/default_video900_1_640x360/segment19.m4f',
        map: {
          uri: 'https://example.com/default_video900_1_640x360/segment$Number$.m4f',
          resolvedUri: 'https://example.com/default_video900_1_640x360/segment$Number$.m4f'
        },
        number: 19
      }],
      mediaSequence: 0,
      contentProtection: {
        'com.widevine.alpha': {
          attributes: {
            schemeIdUri: 'urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed'
          },
          pssh: new Uint8Array([181, 235, 45])
        }
      }
    }],
    minimumUpdatePeriod: 0
  };

  QUnit.module('mpd-parser');
  QUnit.test('has VERSION', function (assert) {
    assert.ok(VERSION);
  });
  QUnit.test('has parse', function (assert) {
    assert.ok(parse);
  });
  [{
    name: 'maat_vtt_segmentTemplate',
    input: maatVttSegmentTemplate,
    expected: parsedManifest
  }, {
    name: 'segmentBase',
    input: segmentBaseTemplate,
    expected: parsedManifest$1
  }, {
    name: 'segmentList',
    input: segmentListTemplate,
    expected: parsedManifest$2
  }, {
    name: 'multiperiod',
    input: multiperiod,
    expected: parsedManifest$3
  }].forEach(function (_ref) {
    var name = _ref.name,
        input = _ref.input,
        expected = _ref.expected;
    QUnit.test(name + " test manifest", function (assert) {
      var actual = parse(input);
      assert.deepEqual(actual, expected);
    });
  });

  QUnit.module('buildBaseUrls');
  QUnit.test('returns reference urls when no BaseURL nodes', function (assert) {
    var reference = ['https://example.com/', 'https://foo.com/'];
    assert.deepEqual(buildBaseUrls(reference, []), reference, 'returns reference urls');
  });
  QUnit.test('single reference url with single BaseURL node', function (assert) {
    var reference = ['https://example.com'];
    var node = [{
      textContent: 'bar/'
    }];
    var expected = ['https://example.com/bar/'];
    assert.deepEqual(buildBaseUrls(reference, node), expected, 'builds base url');
  });
  QUnit.test('multiple reference urls with single BaseURL node', function (assert) {
    var reference = ['https://example.com/', 'https://foo.com/'];
    var node = [{
      textContent: 'bar/'
    }];
    var expected = ['https://example.com/bar/', 'https://foo.com/bar/'];
    assert.deepEqual(buildBaseUrls(reference, node), expected, 'base url for each reference url');
  });
  QUnit.test('multiple BaseURL nodes with single reference url', function (assert) {
    var reference = ['https://example.com/'];
    var nodes = [{
      textContent: 'bar/'
    }, {
      textContent: 'baz/'
    }];
    var expected = ['https://example.com/bar/', 'https://example.com/baz/'];
    assert.deepEqual(buildBaseUrls(reference, nodes), expected, 'base url for each node');
  });
  QUnit.test('multiple reference urls with multiple BaseURL nodes', function (assert) {
    var reference = ['https://example.com/', 'https://foo.com/', 'http://example.com'];
    var nodes = [{
      textContent: 'bar/'
    }, {
      textContent: 'baz/'
    }, {
      textContent: 'buzz/'
    }];
    var expected = ['https://example.com/bar/', 'https://example.com/baz/', 'https://example.com/buzz/', 'https://foo.com/bar/', 'https://foo.com/baz/', 'https://foo.com/buzz/', 'http://example.com/bar/', 'http://example.com/baz/', 'http://example.com/buzz/'];
    assert.deepEqual(buildBaseUrls(reference, nodes), expected, 'creates all base urls');
  });
  QUnit.test('absolute BaseURL overwrites reference', function (assert) {
    var reference = ['https://example.com'];
    var node = [{
      textContent: 'https://foo.com/bar/'
    }];
    var expected = ['https://foo.com/bar/'];
    assert.deepEqual(buildBaseUrls(reference, node), expected, 'absolute url overwrites reference');
  });
  QUnit.module('getSegmentInformation');
  QUnit.test('undefined Segment information when no Segment nodes', function (assert) {
    var adaptationSet = {
      childNodes: []
    };
    var expected = {};
    assert.deepEqual(getSegmentInformation(adaptationSet), expected, 'undefined segment info');
  });
  QUnit.test('gets SegmentTemplate attributes', function (assert) {
    var adaptationSet = {
      childNodes: [{
        tagName: 'SegmentTemplate',
        attributes: [{
          name: 'media',
          value: 'video.mp4'
        }],
        childNodes: []
      }]
    };
    var expected = {
      template: {
        media: 'video.mp4'
      }
    };
    assert.deepEqual(getSegmentInformation(adaptationSet), expected, 'SegmentTemplate info');
  });
  QUnit.test('gets SegmentList attributes', function (assert) {
    var adaptationSet = {
      childNodes: [{
        tagName: 'SegmentList',
        attributes: [{
          name: 'duration',
          value: '10'
        }],
        childNodes: []
      }]
    };
    var expected = {
      list: {
        duration: 10,
        segmentUrls: [],
        initialization: {}
      }
    };
    assert.deepEqual(getSegmentInformation(adaptationSet), expected, 'SegmentList info');
  });
  QUnit.test('gets SegmentBase attributes', function (assert) {
    var adaptationSet = {
      childNodes: [{
        tagName: 'SegmentBase',
        attributes: [{
          name: 'duration',
          value: '10'
        }],
        childNodes: []
      }]
    };
    var expected = {
      base: {
        duration: 10,
        initialization: {}
      }
    };
    assert.deepEqual(getSegmentInformation(adaptationSet), expected, 'SegmentBase info');
  });
  QUnit.test('gets SegmentTemplate and SegmentTimeline attributes', function (assert) {
    var adaptationSet = {
      childNodes: [{
        tagName: 'SegmentTemplate',
        attributes: [{
          name: 'media',
          value: 'video.mp4'
        }],
        childNodes: [{
          tagName: 'SegmentTimeline',
          childNodes: [{
            tagName: 'S',
            attributes: [{
              name: 'd',
              value: '10'
            }]
          }, {
            tagName: 'S',
            attributes: [{
              name: 'd',
              value: '5'
            }]
          }, {
            tagName: 'S',
            attributes: [{
              name: 'd',
              value: '7'
            }]
          }]
        }]
      }]
    };
    var expected = {
      template: {
        media: 'video.mp4'
      },
      timeline: [{
        d: 10
      }, {
        d: 5
      }, {
        d: 7
      }]
    };
    assert.deepEqual(getSegmentInformation(adaptationSet), expected, 'SegmentTemplate and SegmentTimeline info');
  });
  QUnit.module('inheritAttributes');
  QUnit.test('needs at least one Period', function (assert) {
    assert.throws(function () {
      return inheritAttributes(stringToMpdXml('<MPD></MPD>'));
    }, new RegExp(errors.INVALID_NUMBER_OF_PERIOD));
  });
  QUnit.test('end to end - basic', function (assert) {
    var NOW = Date.now();
    var actual = inheritAttributes(stringToMpdXml("\n    <MPD mediaPresentationDuration=\"PT30S\" >\n      <BaseURL>https://www.example.com/base/</BaseURL>\n      <Period>\n        <AdaptationSet mimeType=\"video/mp4\" >\n          <Role value=\"main\"></Role>\n          <SegmentTemplate></SegmentTemplate>\n          <Representation\n            bandwidth=\"5000000\"\n            codecs=\"avc1.64001e\"\n            height=\"404\"\n            id=\"test\"\n            width=\"720\">\n          </Representation>\n        </AdaptationSet>\n        <AdaptationSet mimeType=\"text/vtt\" lang=\"en\">\n          <Representation bandwidth=\"256\" id=\"en\">\n            <BaseURL>https://example.com/en.vtt</BaseURL>\n          </Representation>\n        </AdaptationSet>\n      </Period>\n    </MPD>\n  "), {
      NOW: NOW
    });
    var expected = [{
      attributes: {
        bandwidth: 5000000,
        baseUrl: 'https://www.example.com/base/',
        codecs: 'avc1.64001e',
        height: 404,
        id: 'test',
        mediaPresentationDuration: 30,
        mimeType: 'video/mp4',
        periodIndex: 0,
        role: {
          value: 'main'
        },
        sourceDuration: 30,
        width: 720,
        NOW: NOW,
        clientOffset: 0
      },
      segmentInfo: {
        template: {}
      }
    }, {
      attributes: {
        bandwidth: 256,
        baseUrl: 'https://example.com/en.vtt',
        id: 'en',
        lang: 'en',
        mediaPresentationDuration: 30,
        mimeType: 'text/vtt',
        periodIndex: 0,
        role: {},
        sourceDuration: 30,
        NOW: NOW,
        clientOffset: 0
      },
      segmentInfo: {}
    }];
    assert.equal(actual.length, 2);
    assert.deepEqual(actual, expected);
  });
  QUnit.test('end to end - inherits BaseURL from all levels', function (assert) {
    var NOW = Date.now();
    var actual = inheritAttributes(stringToMpdXml("\n    <MPD mediaPresentationDuration=\"PT30S\" >\n      <BaseURL>https://www.example.com/base/</BaseURL>\n      <Period>\n        <BaseURL>foo/</BaseURL>\n        <AdaptationSet mimeType=\"video/mp4\" >\n          <BaseURL>bar/</BaseURL>\n          <Role value=\"main\"></Role>\n          <SegmentTemplate></SegmentTemplate>\n          <Representation\n            bandwidth=\"5000000\"\n            codecs=\"avc1.64001e\"\n            height=\"404\"\n            id=\"test\"\n            width=\"720\">\n            <BaseURL>buzz/</BaseURL>\n          </Representation>\n        </AdaptationSet>\n        <AdaptationSet mimeType=\"text/vtt\" lang=\"en\">\n          <Representation bandwidth=\"256\" id=\"en\">\n            <BaseURL>https://example.com/en.vtt</BaseURL>\n          </Representation>\n        </AdaptationSet>\n      </Period>\n    </MPD>\n  "), {
      NOW: NOW
    });
    var expected = [{
      attributes: {
        bandwidth: 5000000,
        baseUrl: 'https://www.example.com/base/foo/bar/buzz/',
        codecs: 'avc1.64001e',
        height: 404,
        id: 'test',
        mediaPresentationDuration: 30,
        mimeType: 'video/mp4',
        periodIndex: 0,
        role: {
          value: 'main'
        },
        sourceDuration: 30,
        width: 720,
        NOW: NOW,
        clientOffset: 0
      },
      segmentInfo: {
        template: {}
      }
    }, {
      attributes: {
        bandwidth: 256,
        baseUrl: 'https://example.com/en.vtt',
        id: 'en',
        lang: 'en',
        mediaPresentationDuration: 30,
        mimeType: 'text/vtt',
        periodIndex: 0,
        role: {},
        sourceDuration: 30,
        NOW: NOW,
        clientOffset: 0
      },
      segmentInfo: {}
    }];
    assert.equal(actual.length, 2);
    assert.deepEqual(actual, expected);
  });
  QUnit.test('end to end - alternate BaseURLs', function (assert) {
    var NOW = Date.now();
    var actual = inheritAttributes(stringToMpdXml("\n    <MPD mediaPresentationDuration= \"PT30S\"  >\n      <BaseURL>https://www.example.com/base/</BaseURL>\n      <BaseURL>https://www.test.com/base/</BaseURL>\n      <Period>\n        <AdaptationSet mimeType= \"video/mp4\"  >\n          <BaseURL>segments/</BaseURL>\n          <BaseURL>media/</BaseURL>\n          <Role value= \"main\" ></Role>\n          <SegmentTemplate></SegmentTemplate>\n          <Representation\n            bandwidth= \"5000000\"\n            codecs= \"avc1.64001e\"\n            height= \"404\"\n            id= \"test\"\n            width= \"720\" >\n          </Representation>\n        </AdaptationSet>\n        <AdaptationSet mimeType= \"text/vtt\"  lang= \"en\" >\n          <Representation bandwidth= \"256\"  id= \"en\" >\n            <BaseURL>https://example.com/en.vtt</BaseURL>\n          </Representation>\n        </AdaptationSet>\n      </Period>\n    </MPD>\n  "), {
      NOW: NOW
    });
    var expected = [{
      attributes: {
        bandwidth: 5000000,
        baseUrl: 'https://www.example.com/base/segments/',
        codecs: 'avc1.64001e',
        height: 404,
        id: 'test',
        mediaPresentationDuration: 30,
        mimeType: 'video/mp4',
        periodIndex: 0,
        role: {
          value: 'main'
        },
        sourceDuration: 30,
        width: 720,
        NOW: NOW,
        clientOffset: 0
      },
      segmentInfo: {
        template: {}
      }
    }, {
      attributes: {
        bandwidth: 5000000,
        baseUrl: 'https://www.example.com/base/media/',
        codecs: 'avc1.64001e',
        height: 404,
        id: 'test',
        mediaPresentationDuration: 30,
        mimeType: 'video/mp4',
        periodIndex: 0,
        role: {
          value: 'main'
        },
        sourceDuration: 30,
        width: 720,
        NOW: NOW,
        clientOffset: 0
      },
      segmentInfo: {
        template: {}
      }
    }, {
      attributes: {
        bandwidth: 5000000,
        baseUrl: 'https://www.test.com/base/segments/',
        codecs: 'avc1.64001e',
        height: 404,
        id: 'test',
        mediaPresentationDuration: 30,
        mimeType: 'video/mp4',
        periodIndex: 0,
        role: {
          value: 'main'
        },
        sourceDuration: 30,
        width: 720,
        NOW: NOW,
        clientOffset: 0
      },
      segmentInfo: {
        template: {}
      }
    }, {
      attributes: {
        bandwidth: 5000000,
        baseUrl: 'https://www.test.com/base/media/',
        codecs: 'avc1.64001e',
        height: 404,
        id: 'test',
        mediaPresentationDuration: 30,
        mimeType: 'video/mp4',
        periodIndex: 0,
        role: {
          value: 'main'
        },
        sourceDuration: 30,
        width: 720,
        NOW: NOW,
        clientOffset: 0
      },
      segmentInfo: {
        template: {}
      }
    }, {
      attributes: {
        bandwidth: 256,
        baseUrl: 'https://example.com/en.vtt',
        id: 'en',
        lang: 'en',
        mediaPresentationDuration: 30,
        mimeType: 'text/vtt',
        periodIndex: 0,
        role: {},
        sourceDuration: 30,
        NOW: NOW,
        clientOffset: 0
      },
      segmentInfo: {}
    }, {
      attributes: {
        bandwidth: 256,
        baseUrl: 'https://example.com/en.vtt',
        id: 'en',
        lang: 'en',
        mediaPresentationDuration: 30,
        mimeType: 'text/vtt',
        periodIndex: 0,
        role: {},
        sourceDuration: 30,
        NOW: NOW,
        clientOffset: 0
      },
      segmentInfo: {}
    }];
    assert.equal(actual.length, 6);
    assert.deepEqual(actual, expected);
  });
  QUnit.test(' End to End test for checking support of segments in representation', function (assert) {
    var NOW = Date.now();
    var actual = inheritAttributes(stringToMpdXml("\n    <MPD mediaPresentationDuration= \"PT30S\"  >\n      <BaseURL>https://www.example.com/base/</BaseURL>\n      <Period>\n        <AdaptationSet mimeType= \"video/mp4\"  >\n          <Role value= \"main\" ></Role>\n          <SegmentBase indexRangeExact= \"true\"  indexRange= \"820-2087\" >\n              <Initialization range= \"0-987\" />\n          </SegmentBase>\n\n          <Representation\n            mimeType= \"video/mp6\"\n            bandwidth= \"5000000\"\n            codecs= \"avc1.64001e\"\n            height= \"404\"\n            id= \"test\"\n            width= \"720\" >\n            <SegmentBase>\n              <Initialization range= \"0-567\" />\n            </SegmentBase>\n          </Representation>\n          <Representation\n            height= \"545\" >\n          </Representation>\n        </AdaptationSet>\n        <AdaptationSet mimeType= \"text/vtt\"  lang= \"en\" >\n          <Representation bandwidth= \"256\"  id= \"en\" >\n            <BaseURL>https://example.com/en.vtt</BaseURL>\n          </Representation>\n        </AdaptationSet>\n      </Period>\n    </MPD>\n  "), {
      NOW: NOW
    });
    var expected = [{
      attributes: {
        bandwidth: 5000000,
        baseUrl: 'https://www.example.com/base/',
        codecs: 'avc1.64001e',
        height: 404,
        id: 'test',
        mediaPresentationDuration: 30,
        mimeType: 'video/mp6',
        periodIndex: 0,
        role: {
          value: 'main'
        },
        sourceDuration: 30,
        width: 720,
        NOW: NOW,
        clientOffset: 0
      },
      segmentInfo: {
        base: {
          indexRange: '820-2087',
          indexRangeExact: 'true',
          initialization: {
            range: '0-567'
          }
        }
      }
    }, {
      attributes: {
        baseUrl: 'https://www.example.com/base/',
        mediaPresentationDuration: 30,
        mimeType: 'video/mp4',
        periodIndex: 0,
        height: 545,
        role: {
          value: 'main'
        },
        sourceDuration: 30,
        NOW: NOW,
        clientOffset: 0
      },
      segmentInfo: {
        base: {
          indexRange: '820-2087',
          indexRangeExact: 'true',
          initialization: {
            range: '0-987'
          }
        }
      }
    }, {
      attributes: {
        bandwidth: 256,
        baseUrl: 'https://example.com/en.vtt',
        id: 'en',
        lang: 'en',
        mediaPresentationDuration: 30,
        mimeType: 'text/vtt',
        periodIndex: 0,
        role: {},
        sourceDuration: 30,
        NOW: NOW,
        clientOffset: 0
      },
      segmentInfo: {}
    }];
    assert.equal(actual.length, 3);
    assert.deepEqual(actual, expected);
  });
  QUnit.test(' End to End test for checking support of segments in period ', function (assert) {
    var NOW = Date.now();
    var actual = inheritAttributes(stringToMpdXml("\n    <MPD mediaPresentationDuration= \"PT30S\"  >\n      <BaseURL>https://www.example.com/base/</BaseURL>\n      <Period duration= \"PT0H4M40.414S\" >\n        <SegmentBase indexRangeExact= \"false\"  indexRange= \"9999\" >\n           <Initialization range= \"0-1111\" />\n        </SegmentBase>\n        <AdaptationSet mimeType= \"video/mp4\"  >\n          <Role value= \"main\" ></Role>\n          <Representation\n            mimeType= \"video/mp6\"\n            bandwidth= \"5000000\"\n            codecs= \"avc1.64001e\"\n            height= \"404\"\n            id= \"test\"\n            width= \"720\" >\n          </Representation>\n          <Representation\n            height= \"545\" >\n          </Representation>\n        </AdaptationSet>\n        <AdaptationSet mimeType= \"text/vtt\"  lang= \"en\" >\n          <Representation bandwidth= \"256\"  id= \"en\" >\n            <BaseURL>https://example.com/en.vtt</BaseURL>\n          </Representation>\n        </AdaptationSet>\n      </Period>\n    </MPD>\n  "), {
      NOW: NOW
    });
    var expected = [{
      attributes: {
        bandwidth: 5000000,
        baseUrl: 'https://www.example.com/base/',
        codecs: 'avc1.64001e',
        height: 404,
        id: 'test',
        mediaPresentationDuration: 30,
        mimeType: 'video/mp6',
        periodIndex: 0,
        role: {
          value: 'main'
        },
        sourceDuration: 30,
        width: 720,
        NOW: NOW,
        clientOffset: 0
      },
      segmentInfo: {
        base: {
          indexRange: '9999',
          indexRangeExact: 'false',
          initialization: {
            range: '0-1111'
          }
        }
      }
    }, {
      attributes: {
        baseUrl: 'https://www.example.com/base/',
        mediaPresentationDuration: 30,
        mimeType: 'video/mp4',
        periodIndex: 0,
        height: 545,
        role: {
          value: 'main'
        },
        sourceDuration: 30,
        NOW: NOW,
        clientOffset: 0
      },
      segmentInfo: {
        base: {
          indexRange: '9999',
          indexRangeExact: 'false',
          initialization: {
            range: '0-1111'
          }
        }
      }
    }, {
      attributes: {
        bandwidth: 256,
        baseUrl: 'https://example.com/en.vtt',
        id: 'en',
        lang: 'en',
        mediaPresentationDuration: 30,
        mimeType: 'text/vtt',
        periodIndex: 0,
        role: {},
        sourceDuration: 30,
        NOW: NOW,
        clientOffset: 0
      },
      segmentInfo: {
        base: {
          indexRange: '9999',
          indexRangeExact: 'false',
          initialization: {
            range: '0-1111'
          }
        }
      }
    }];
    assert.equal(actual.length, 3);
    assert.deepEqual(actual, expected);
  });
  QUnit.test(' End to End test for checking support of Segments in Adaptation set', function (assert) {
    var NOW = Date.now();
    var actual = inheritAttributes(stringToMpdXml("\n    <MPD mediaPresentationDuration= \"PT30S\"  >\n      <BaseURL>https://www.example.com/base/</BaseURL>\n      <Period duration= \"PT0H4M40.414S\" >\n        <AdaptationSet mimeType= \"video/mp4\"  >\n          <Role value= \"main\" ></Role>\n          <SegmentBase indexRange= \"1212\"  indexRangeExact= \"true\" >\n           <Initialization range= \"0-8888\"  />\n          </SegmentBase>\n          <Representation\n            mimeType= \"video/mp6\"\n            bandwidth= \"5000000\"\n            codecs= \"avc1.64001e\"\n            height= \"404\"\n            id= \"test\"\n            width= \"720\" >\n          </Representation>\n          <Representation\n            height= \"545\" >\n          </Representation>\n        </AdaptationSet>\n        <AdaptationSet mimeType= \"text/vtt\"  lang= \"en\" >\n          <Representation bandwidth= \"256\"  id= \"en\" >\n            <BaseURL>https://example.com/en.vtt</BaseURL>\n          </Representation>\n        </AdaptationSet>\n      </Period>\n    </MPD>\n  "), {
      NOW: NOW
    });
    var expected = [{
      attributes: {
        bandwidth: 5000000,
        baseUrl: 'https://www.example.com/base/',
        codecs: 'avc1.64001e',
        height: 404,
        id: 'test',
        mediaPresentationDuration: 30,
        mimeType: 'video/mp6',
        periodIndex: 0,
        role: {
          value: 'main'
        },
        sourceDuration: 30,
        width: 720,
        NOW: NOW,
        clientOffset: 0
      },
      segmentInfo: {
        base: {
          indexRange: '1212',
          indexRangeExact: 'true',
          initialization: {
            range: '0-8888'
          }
        }
      }
    }, {
      attributes: {
        baseUrl: 'https://www.example.com/base/',
        mediaPresentationDuration: 30,
        mimeType: 'video/mp4',
        periodIndex: 0,
        height: 545,
        role: {
          value: 'main'
        },
        sourceDuration: 30,
        NOW: NOW,
        clientOffset: 0
      },
      segmentInfo: {
        base: {
          indexRange: '1212',
          indexRangeExact: 'true',
          initialization: {
            range: '0-8888'
          }
        }
      }
    }, {
      attributes: {
        bandwidth: 256,
        baseUrl: 'https://example.com/en.vtt',
        id: 'en',
        lang: 'en',
        mediaPresentationDuration: 30,
        mimeType: 'text/vtt',
        periodIndex: 0,
        role: {},
        sourceDuration: 30,
        NOW: NOW,
        clientOffset: 0
      },
      segmentInfo: {}
    }];
    assert.equal(actual.length, 3);
    assert.deepEqual(actual, expected);
  }); // Although according to the Spec, at most one set of Segment information should be
  // present at each level, this test would still handle the case and prevent errors if
  // multiple set of segment information are present at any particular level.

  QUnit.test('Test for checking use of only one set of Segment Information when multiple are present', function (assert) {
    var NOW = Date.now();
    var actual = toPlaylists(inheritAttributes(stringToMpdXml("\n    <MPD mediaPresentationDuration= \"PT30S\"  >\n      <BaseURL>https://www.example.com/base</BaseURL>\n      <Period duration= \"PT0H4M40.414S\" >\n        <AdaptationSet\n          mimeType= \"video/mp4\"\n          segmentAlignment= \"true\"\n          startWithSAP= \"1\"\n          lang= \"es\" >\n          <Role value= \"main\" ></Role>\n          <SegmentTemplate\n            duration= \"95232\"\n            initialization= \"$RepresentationID$/es/init.m4f\"\n            media= \"$RepresentationID$/es/$Number$.m4f\"\n            startNumber= \"0\"\n            timescale= \"48000\" >\n          </SegmentTemplate>\n          <SegmentList timescale= \"1000\"  duration= \"1000\" >\n            <RepresentationIndex sourceURL= \"representation-index-low\" />\n            <SegmentURL media= \"low/segment-1.ts\" />\n            <SegmentURL media= \"low/segment-2.ts\" />\n            <SegmentURL media= \"low/segment-3.ts\" />\n            <SegmentURL media= \"low/segment-4.ts\" />\n            <SegmentURL media= \"low/segment-5.ts\" />\n            <SegmentURL media= \"low/segment-6.ts\" />\n          </SegmentList>\n          <Representation\n            mimeType= \"video/mp6\"\n            bandwidth= \"5000000\"\n            codecs= \"avc1.64001e\"\n            height= \"404\"\n            id= \"125000\"\n            width= \"720\" >\n          </Representation>\n          <Representation\n            height= \"545\"\n            id=\"125000\" >\n          </Representation>\n        </AdaptationSet>\n      </Period>\n    </MPD>\n  "), {
      NOW: NOW
    }));
    var expected = [{
      attributes: {
        NOW: NOW,
        bandwidth: 5000000,
        baseUrl: 'https://www.example.com/base',
        duration: 1.984,
        codecs: 'avc1.64001e',
        height: 404,
        id: '125000',
        lang: 'es',
        mediaPresentationDuration: 30,
        mimeType: 'video/mp6',
        periodIndex: 0,
        startNumber: 0,
        timescale: 48000,
        role: {
          value: 'main'
        },
        clientOffset: 0,
        initialization: {
          sourceURL: '$RepresentationID$/es/init.m4f'
        },
        media: '$RepresentationID$/es/$Number$.m4f',
        segmentAlignment: 'true',
        sourceDuration: 30,
        width: 720,
        startWithSAP: '1'
      },
      segments: [{
        duration: 1.984,
        map: {
          resolvedUri: 'https://www.example.com/125000/es/init.m4f',
          uri: '125000/es/init.m4f'
        },
        resolvedUri: 'https://www.example.com/125000/es/0.m4f',
        timeline: 0,
        uri: '125000/es/0.m4f',
        number: 0
      }, {
        duration: 1.984,
        map: {
          resolvedUri: 'https://www.example.com/125000/es/init.m4f',
          uri: '125000/es/init.m4f'
        },
        resolvedUri: 'https://www.example.com/125000/es/1.m4f',
        timeline: 0,
        uri: '125000/es/1.m4f',
        number: 1
      }, {
        duration: 1.984,
        map: {
          resolvedUri: 'https://www.example.com/125000/es/init.m4f',
          uri: '125000/es/init.m4f'
        },
        resolvedUri: 'https://www.example.com/125000/es/2.m4f',
        timeline: 0,
        uri: '125000/es/2.m4f',
        number: 2
      }, {
        duration: 1.984,
        map: {
          resolvedUri: 'https://www.example.com/125000/es/init.m4f',
          uri: '125000/es/init.m4f'
        },
        resolvedUri: 'https://www.example.com/125000/es/3.m4f',
        timeline: 0,
        uri: '125000/es/3.m4f',
        number: 3
      }, {
        duration: 1.984,
        map: {
          resolvedUri: 'https://www.example.com/125000/es/init.m4f',
          uri: '125000/es/init.m4f'
        },
        resolvedUri: 'https://www.example.com/125000/es/4.m4f',
        timeline: 0,
        uri: '125000/es/4.m4f',
        number: 4
      }, {
        duration: 1.984,
        map: {
          resolvedUri: 'https://www.example.com/125000/es/init.m4f',
          uri: '125000/es/init.m4f'
        },
        resolvedUri: 'https://www.example.com/125000/es/5.m4f',
        timeline: 0,
        uri: '125000/es/5.m4f',
        number: 5
      }, {
        duration: 1.984,
        map: {
          resolvedUri: 'https://www.example.com/125000/es/init.m4f',
          uri: '125000/es/init.m4f'
        },
        resolvedUri: 'https://www.example.com/125000/es/6.m4f',
        timeline: 0,
        uri: '125000/es/6.m4f',
        number: 6
      }, {
        duration: 1.984,
        map: {
          resolvedUri: 'https://www.example.com/125000/es/init.m4f',
          uri: '125000/es/init.m4f'
        },
        resolvedUri: 'https://www.example.com/125000/es/7.m4f',
        timeline: 0,
        uri: '125000/es/7.m4f',
        number: 7
      }, {
        duration: 1.984,
        map: {
          resolvedUri: 'https://www.example.com/125000/es/init.m4f',
          uri: '125000/es/init.m4f'
        },
        resolvedUri: 'https://www.example.com/125000/es/8.m4f',
        timeline: 0,
        uri: '125000/es/8.m4f',
        number: 8
      }, {
        duration: 1.984,
        map: {
          resolvedUri: 'https://www.example.com/125000/es/init.m4f',
          uri: '125000/es/init.m4f'
        },
        resolvedUri: 'https://www.example.com/125000/es/9.m4f',
        timeline: 0,
        uri: '125000/es/9.m4f',
        number: 9
      }, {
        duration: 1.984,
        map: {
          resolvedUri: 'https://www.example.com/125000/es/init.m4f',
          uri: '125000/es/init.m4f'
        },
        resolvedUri: 'https://www.example.com/125000/es/10.m4f',
        timeline: 0,
        uri: '125000/es/10.m4f',
        number: 10
      }, {
        duration: 1.984,
        map: {
          resolvedUri: 'https://www.example.com/125000/es/init.m4f',
          uri: '125000/es/init.m4f'
        },
        resolvedUri: 'https://www.example.com/125000/es/11.m4f',
        timeline: 0,
        uri: '125000/es/11.m4f',
        number: 11
      }, {
        duration: 1.984,
        map: {
          resolvedUri: 'https://www.example.com/125000/es/init.m4f',
          uri: '125000/es/init.m4f'
        },
        resolvedUri: 'https://www.example.com/125000/es/12.m4f',
        timeline: 0,
        uri: '125000/es/12.m4f',
        number: 12
      }, {
        duration: 1.984,
        map: {
          resolvedUri: 'https://www.example.com/125000/es/init.m4f',
          uri: '125000/es/init.m4f'
        },
        resolvedUri: 'https://www.example.com/125000/es/13.m4f',
        timeline: 0,
        uri: '125000/es/13.m4f',
        number: 13
      }, {
        duration: 1.984,
        map: {
          resolvedUri: 'https://www.example.com/125000/es/init.m4f',
          uri: '125000/es/init.m4f'
        },
        resolvedUri: 'https://www.example.com/125000/es/14.m4f',
        timeline: 0,
        uri: '125000/es/14.m4f',
        number: 14
      }, {
        duration: 0.240000000000002,
        map: {
          resolvedUri: 'https://www.example.com/125000/es/init.m4f',
          uri: '125000/es/init.m4f'
        },
        resolvedUri: 'https://www.example.com/125000/es/15.m4f',
        timeline: 0,
        uri: '125000/es/15.m4f',
        number: 15
      }]
    }, {
      attributes: {
        NOW: NOW,
        baseUrl: 'https://www.example.com/base',
        duration: 1.984,
        lang: 'es',
        height: 545,
        id: '125000',
        mediaPresentationDuration: 30,
        mimeType: 'video/mp4',
        periodIndex: 0,
        role: {
          value: 'main'
        },
        segmentAlignment: 'true',
        sourceDuration: 30,
        startWithSAP: '1',
        clientOffset: 0,
        initialization: {
          sourceURL: '$RepresentationID$/es/init.m4f'
        },
        media: '$RepresentationID$/es/$Number$.m4f',
        startNumber: 0,
        timescale: 48000
      },
      segments: [{
        duration: 1.984,
        map: {
          resolvedUri: 'https://www.example.com/125000/es/init.m4f',
          uri: '125000/es/init.m4f'
        },
        resolvedUri: 'https://www.example.com/125000/es/0.m4f',
        timeline: 0,
        uri: '125000/es/0.m4f',
        number: 0
      }, {
        duration: 1.984,
        map: {
          resolvedUri: 'https://www.example.com/125000/es/init.m4f',
          uri: '125000/es/init.m4f'
        },
        resolvedUri: 'https://www.example.com/125000/es/1.m4f',
        timeline: 0,
        uri: '125000/es/1.m4f',
        number: 1
      }, {
        duration: 1.984,
        map: {
          resolvedUri: 'https://www.example.com/125000/es/init.m4f',
          uri: '125000/es/init.m4f'
        },
        resolvedUri: 'https://www.example.com/125000/es/2.m4f',
        timeline: 0,
        uri: '125000/es/2.m4f',
        number: 2
      }, {
        duration: 1.984,
        map: {
          resolvedUri: 'https://www.example.com/125000/es/init.m4f',
          uri: '125000/es/init.m4f'
        },
        resolvedUri: 'https://www.example.com/125000/es/3.m4f',
        timeline: 0,
        uri: '125000/es/3.m4f',
        number: 3
      }, {
        duration: 1.984,
        map: {
          resolvedUri: 'https://www.example.com/125000/es/init.m4f',
          uri: '125000/es/init.m4f'
        },
        resolvedUri: 'https://www.example.com/125000/es/4.m4f',
        timeline: 0,
        uri: '125000/es/4.m4f',
        number: 4
      }, {
        duration: 1.984,
        map: {
          resolvedUri: 'https://www.example.com/125000/es/init.m4f',
          uri: '125000/es/init.m4f'
        },
        resolvedUri: 'https://www.example.com/125000/es/5.m4f',
        timeline: 0,
        uri: '125000/es/5.m4f',
        number: 5
      }, {
        duration: 1.984,
        map: {
          resolvedUri: 'https://www.example.com/125000/es/init.m4f',
          uri: '125000/es/init.m4f'
        },
        resolvedUri: 'https://www.example.com/125000/es/6.m4f',
        timeline: 0,
        uri: '125000/es/6.m4f',
        number: 6
      }, {
        duration: 1.984,
        map: {
          resolvedUri: 'https://www.example.com/125000/es/init.m4f',
          uri: '125000/es/init.m4f'
        },
        resolvedUri: 'https://www.example.com/125000/es/7.m4f',
        timeline: 0,
        uri: '125000/es/7.m4f',
        number: 7
      }, {
        duration: 1.984,
        map: {
          resolvedUri: 'https://www.example.com/125000/es/init.m4f',
          uri: '125000/es/init.m4f'
        },
        resolvedUri: 'https://www.example.com/125000/es/8.m4f',
        timeline: 0,
        uri: '125000/es/8.m4f',
        number: 8
      }, {
        duration: 1.984,
        map: {
          resolvedUri: 'https://www.example.com/125000/es/init.m4f',
          uri: '125000/es/init.m4f'
        },
        resolvedUri: 'https://www.example.com/125000/es/9.m4f',
        timeline: 0,
        uri: '125000/es/9.m4f',
        number: 9
      }, {
        duration: 1.984,
        map: {
          resolvedUri: 'https://www.example.com/125000/es/init.m4f',
          uri: '125000/es/init.m4f'
        },
        resolvedUri: 'https://www.example.com/125000/es/10.m4f',
        timeline: 0,
        uri: '125000/es/10.m4f',
        number: 10
      }, {
        duration: 1.984,
        map: {
          resolvedUri: 'https://www.example.com/125000/es/init.m4f',
          uri: '125000/es/init.m4f'
        },
        resolvedUri: 'https://www.example.com/125000/es/11.m4f',
        timeline: 0,
        uri: '125000/es/11.m4f',
        number: 11
      }, {
        duration: 1.984,
        map: {
          resolvedUri: 'https://www.example.com/125000/es/init.m4f',
          uri: '125000/es/init.m4f'
        },
        resolvedUri: 'https://www.example.com/125000/es/12.m4f',
        timeline: 0,
        uri: '125000/es/12.m4f',
        number: 12
      }, {
        duration: 1.984,
        map: {
          resolvedUri: 'https://www.example.com/125000/es/init.m4f',
          uri: '125000/es/init.m4f'
        },
        resolvedUri: 'https://www.example.com/125000/es/13.m4f',
        timeline: 0,
        uri: '125000/es/13.m4f',
        number: 13
      }, {
        duration: 1.984,
        map: {
          resolvedUri: 'https://www.example.com/125000/es/init.m4f',
          uri: '125000/es/init.m4f'
        },
        resolvedUri: 'https://www.example.com/125000/es/14.m4f',
        timeline: 0,
        uri: '125000/es/14.m4f',
        number: 14
      }, {
        duration: 0.240000000000002,
        map: {
          resolvedUri: 'https://www.example.com/125000/es/init.m4f',
          uri: '125000/es/init.m4f'
        },
        resolvedUri: 'https://www.example.com/125000/es/15.m4f',
        timeline: 0,
        uri: '125000/es/15.m4f',
        number: 15
      }]
    }];
    assert.equal(actual.length, 2);
    assert.deepEqual(actual, expected);
  }); // Although the Spec states that if SegmentTemplate or SegmentList is present on one
  // level of the hierarchy the other one shall not be present on any lower level, this
  // test would still handle the case if both are present in the hierarchy and would
  // prevent throwing errors.

  QUnit.test('Test to check use of either Segment Template or Segment List when both are' + ' present in the hierarchy', function (assert) {
    var NOW = Date.now();
    var actual = toPlaylists(inheritAttributes(stringToMpdXml("\n    <MPD mediaPresentationDuration= \"PT30S\"  >\n      <BaseURL>https://www.example.com/base</BaseURL>\n      <Period duration= \"PT0H4M40.414S\" >\n        <AdaptationSet\n          mimeType= \"video/mp4\"\n          segmentAlignment= \"true\"\n          startWithSAP= \"1\"\n          lang= \"es\" >\n          <Role value= \"main\" ></Role>\n          <SegmentTemplate\n            duration= \"95232\"\n            initialization= \"$RepresentationID$/es/init.m4f\"\n            media= \"$RepresentationID$/es/$Number$.m4f\"\n            startNumber= \"0\"\n            timescale= \"48000\" >\n          </SegmentTemplate>\n          <Representation\n            mimeType= \"video/mp6\"\n            bandwidth= \"5000000\"\n            codecs= \"avc1.64001e\"\n            height= \"404\"\n            id= \"125000\"\n            width= \"720\" >\n            <SegmentList timescale= \"1000\"  duration= \"1000\" >\n              <RepresentationIndex sourceURL= \"representation-index-low\" />\n              <SegmentURL media= \"low/segment-1.ts\" />\n              <SegmentURL media= \"low/segment-2.ts\" />\n              <SegmentURL media= \"low/segment-3.ts\" />\n              <SegmentURL media= \"low/segment-4.ts\" />\n              <SegmentURL media= \"low/segment-5.ts\" />\n              <SegmentURL media= \"low/segment-6.ts\" />\n            </SegmentList>\n          </Representation>\n        </AdaptationSet>\n      </Period>\n    </MPD>\n  "), {
      NOW: NOW
    }));
    var expected = [{
      attributes: {
        NOW: NOW,
        clientOffset: 0,
        initialization: {
          sourceURL: '$RepresentationID$/es/init.m4f'
        },
        media: '$RepresentationID$/es/$Number$.m4f',
        bandwidth: 5000000,
        baseUrl: 'https://www.example.com/base',
        duration: 1.984,
        codecs: 'avc1.64001e',
        height: 404,
        id: '125000',
        lang: 'es',
        mediaPresentationDuration: 30,
        mimeType: 'video/mp6',
        periodIndex: 0,
        role: {
          value: 'main'
        },
        segmentAlignment: 'true',
        sourceDuration: 30,
        width: 720,
        startWithSAP: '1',
        startNumber: 0,
        timescale: 48000
      },
      segments: [{
        duration: 1.984,
        map: {
          resolvedUri: 'https://www.example.com/125000/es/init.m4f',
          uri: '125000/es/init.m4f'
        },
        resolvedUri: 'https://www.example.com/125000/es/0.m4f',
        timeline: 0,
        uri: '125000/es/0.m4f',
        number: 0
      }, {
        duration: 1.984,
        map: {
          resolvedUri: 'https://www.example.com/125000/es/init.m4f',
          uri: '125000/es/init.m4f'
        },
        resolvedUri: 'https://www.example.com/125000/es/1.m4f',
        timeline: 0,
        uri: '125000/es/1.m4f',
        number: 1
      }, {
        duration: 1.984,
        map: {
          resolvedUri: 'https://www.example.com/125000/es/init.m4f',
          uri: '125000/es/init.m4f'
        },
        resolvedUri: 'https://www.example.com/125000/es/2.m4f',
        timeline: 0,
        uri: '125000/es/2.m4f',
        number: 2
      }, {
        duration: 1.984,
        map: {
          resolvedUri: 'https://www.example.com/125000/es/init.m4f',
          uri: '125000/es/init.m4f'
        },
        resolvedUri: 'https://www.example.com/125000/es/3.m4f',
        timeline: 0,
        uri: '125000/es/3.m4f',
        number: 3
      }, {
        duration: 1.984,
        map: {
          resolvedUri: 'https://www.example.com/125000/es/init.m4f',
          uri: '125000/es/init.m4f'
        },
        resolvedUri: 'https://www.example.com/125000/es/4.m4f',
        timeline: 0,
        uri: '125000/es/4.m4f',
        number: 4
      }, {
        duration: 1.984,
        map: {
          resolvedUri: 'https://www.example.com/125000/es/init.m4f',
          uri: '125000/es/init.m4f'
        },
        resolvedUri: 'https://www.example.com/125000/es/5.m4f',
        timeline: 0,
        uri: '125000/es/5.m4f',
        number: 5
      }, {
        duration: 1.984,
        map: {
          resolvedUri: 'https://www.example.com/125000/es/init.m4f',
          uri: '125000/es/init.m4f'
        },
        resolvedUri: 'https://www.example.com/125000/es/6.m4f',
        timeline: 0,
        uri: '125000/es/6.m4f',
        number: 6
      }, {
        duration: 1.984,
        map: {
          resolvedUri: 'https://www.example.com/125000/es/init.m4f',
          uri: '125000/es/init.m4f'
        },
        resolvedUri: 'https://www.example.com/125000/es/7.m4f',
        timeline: 0,
        uri: '125000/es/7.m4f',
        number: 7
      }, {
        duration: 1.984,
        map: {
          resolvedUri: 'https://www.example.com/125000/es/init.m4f',
          uri: '125000/es/init.m4f'
        },
        resolvedUri: 'https://www.example.com/125000/es/8.m4f',
        timeline: 0,
        uri: '125000/es/8.m4f',
        number: 8
      }, {
        duration: 1.984,
        map: {
          resolvedUri: 'https://www.example.com/125000/es/init.m4f',
          uri: '125000/es/init.m4f'
        },
        resolvedUri: 'https://www.example.com/125000/es/9.m4f',
        timeline: 0,
        uri: '125000/es/9.m4f',
        number: 9
      }, {
        duration: 1.984,
        map: {
          resolvedUri: 'https://www.example.com/125000/es/init.m4f',
          uri: '125000/es/init.m4f'
        },
        resolvedUri: 'https://www.example.com/125000/es/10.m4f',
        timeline: 0,
        uri: '125000/es/10.m4f',
        number: 10
      }, {
        duration: 1.984,
        map: {
          resolvedUri: 'https://www.example.com/125000/es/init.m4f',
          uri: '125000/es/init.m4f'
        },
        resolvedUri: 'https://www.example.com/125000/es/11.m4f',
        timeline: 0,
        uri: '125000/es/11.m4f',
        number: 11
      }, {
        duration: 1.984,
        map: {
          resolvedUri: 'https://www.example.com/125000/es/init.m4f',
          uri: '125000/es/init.m4f'
        },
        resolvedUri: 'https://www.example.com/125000/es/12.m4f',
        timeline: 0,
        uri: '125000/es/12.m4f',
        number: 12
      }, {
        duration: 1.984,
        map: {
          resolvedUri: 'https://www.example.com/125000/es/init.m4f',
          uri: '125000/es/init.m4f'
        },
        resolvedUri: 'https://www.example.com/125000/es/13.m4f',
        timeline: 0,
        uri: '125000/es/13.m4f',
        number: 13
      }, {
        duration: 1.984,
        map: {
          resolvedUri: 'https://www.example.com/125000/es/init.m4f',
          uri: '125000/es/init.m4f'
        },
        resolvedUri: 'https://www.example.com/125000/es/14.m4f',
        timeline: 0,
        uri: '125000/es/14.m4f',
        number: 14
      }, {
        duration: 0.240000000000002,
        map: {
          resolvedUri: 'https://www.example.com/125000/es/init.m4f',
          uri: '125000/es/init.m4f'
        },
        resolvedUri: 'https://www.example.com/125000/es/15.m4f',
        timeline: 0,
        uri: '125000/es/15.m4f',
        number: 15
      }]
    }];
    assert.equal(actual.length, 1);
    assert.deepEqual(actual, expected);
  });

  var minDoc = {};

  var topLevel = typeof commonjsGlobal !== 'undefined' ? commonjsGlobal :
      typeof window !== 'undefined' ? window : {};


  var doccy;

  if (typeof document !== 'undefined') {
      doccy = document;
  } else {
      doccy = topLevel['__GLOBAL_DOCUMENT_CACHE@4'];

      if (!doccy) {
          doccy = topLevel['__GLOBAL_DOCUMENT_CACHE@4'] = minDoc;
      }
  }

  var document_1 = doccy;

  QUnit.module('parseAttributes');
  QUnit.test('simple', function (assert) {
    var el = document_1.createElement('el');
    el.setAttribute('foo', 1);
    assert.deepEqual(parseAttributes(el), {
      foo: '1'
    });
  });
  QUnit.test('empty', function (assert) {
    var el = document_1.createElement('el');
    assert.deepEqual(parseAttributes(el), {});
  });

  QUnit.module('segmentBase - segmentsFromBase');
  QUnit.test('sets segment to baseUrl', function (assert) {
    var inputAttributes = {
      baseUrl: 'http://www.example.com/i.fmp4',
      initialization: {
        sourceURL: 'http://www.example.com/init.fmp4'
      }
    };
    assert.deepEqual(segmentsFromBase(inputAttributes), [{
      map: {
        resolvedUri: 'http://www.example.com/init.fmp4',
        uri: 'http://www.example.com/init.fmp4'
      },
      resolvedUri: 'http://www.example.com/i.fmp4',
      uri: 'http://www.example.com/i.fmp4',
      number: 0
    }]);
  });
  QUnit.test('sets duration based on sourceDuration', function (assert) {
    var inputAttributes = {
      baseUrl: 'http://www.example.com/i.fmp4',
      initialization: {
        sourceURL: 'http://www.example.com/init.fmp4'
      },
      sourceDuration: 10
    };
    assert.deepEqual(segmentsFromBase(inputAttributes), [{
      duration: 10,
      timeline: 0,
      map: {
        resolvedUri: 'http://www.example.com/init.fmp4',
        uri: 'http://www.example.com/init.fmp4'
      },
      resolvedUri: 'http://www.example.com/i.fmp4',
      uri: 'http://www.example.com/i.fmp4',
      number: 0
    }]);
  });
  QUnit.test('sets duration based on sourceDuration and @timescale', function (assert) {
    var inputAttributes = {
      baseUrl: 'http://www.example.com/i.fmp4',
      initialization: {
        sourceURL: 'http://www.example.com/init.fmp4'
      },
      sourceDuration: 10,
      timescale: 2
    };
    assert.deepEqual(segmentsFromBase(inputAttributes), [{
      duration: 5,
      timeline: 0,
      map: {
        resolvedUri: 'http://www.example.com/init.fmp4',
        uri: 'http://www.example.com/init.fmp4'
      },
      resolvedUri: 'http://www.example.com/i.fmp4',
      uri: 'http://www.example.com/i.fmp4',
      number: 0
    }]);
  });
  QUnit.test('sets duration based on @duration', function (assert) {
    var inputAttributes = {
      duration: 10,
      sourceDuration: 20,
      baseUrl: 'http://www.example.com/i.fmp4',
      initialization: {
        sourceURL: 'http://www.example.com/init.fmp4'
      },
      periodIndex: 0
    };
    assert.deepEqual(segmentsFromBase(inputAttributes), [{
      duration: 10,
      timeline: 0,
      map: {
        resolvedUri: 'http://www.example.com/init.fmp4',
        uri: 'http://www.example.com/init.fmp4'
      },
      resolvedUri: 'http://www.example.com/i.fmp4',
      uri: 'http://www.example.com/i.fmp4',
      number: 0
    }]);
  });
  QUnit.test('sets duration based on @duration and @timescale', function (assert) {
    var inputAttributes = {
      duration: 10,
      sourceDuration: 20,
      timescale: 5,
      baseUrl: 'http://www.example.com/i.fmp4',
      initialization: {
        sourceURL: 'http://www.example.com/init.fmp4'
      },
      periodIndex: 0
    };
    assert.deepEqual(segmentsFromBase(inputAttributes), [{
      duration: 2,
      timeline: 0,
      map: {
        resolvedUri: 'http://www.example.com/init.fmp4',
        uri: 'http://www.example.com/init.fmp4'
      },
      resolvedUri: 'http://www.example.com/i.fmp4',
      uri: 'http://www.example.com/i.fmp4',
      number: 0
    }]);
  });
  QUnit.test('translates ranges in <Initialization> node', function (assert) {
    var inputAttributes = {
      duration: 10,
      sourceDuration: 20,
      timescale: 5,
      baseUrl: 'http://www.example.com/i.fmp4',
      initialization: {
        sourceURL: 'http://www.example.com/init.fmp4',
        range: '121-125'
      },
      periodIndex: 0
    };
    assert.deepEqual(segmentsFromBase(inputAttributes), [{
      duration: 2,
      timeline: 0,
      map: {
        resolvedUri: 'http://www.example.com/init.fmp4',
        uri: 'http://www.example.com/init.fmp4',
        byterange: {
          length: 5,
          offset: 121
        }
      },
      resolvedUri: 'http://www.example.com/i.fmp4',
      uri: 'http://www.example.com/i.fmp4',
      number: 0
    }]);
  });
  QUnit.test('errors if no baseUrl exists', function (assert) {
    assert.throws(function () {
      return segmentsFromBase({});
    }, new Error(errors.NO_BASE_URL));
  });
  QUnit.module('segmentBase - addSegmentsToPlaylist');
  QUnit.test('generates playlist from sidx references', function (assert) {
    var baseUrl = 'http://www.example.com/i.fmp4';
    var playlist = {
      sidx: {
        map: {
          byterange: {
            offset: 0,
            length: 10
          }
        },
        duration: 10,
        byterange: {
          offset: 9,
          length: 11
        }
      },
      segments: []
    };
    var sidx = {
      timescale: 1,
      firstOffset: 0,
      references: [{
        referenceType: 0,
        referencedSize: 5,
        subsegmentDuration: 2
      }]
    };
    assert.deepEqual(addSegmentsToPlaylist(playlist, sidx, baseUrl).segments, [{
      map: {
        byterange: {
          offset: 0,
          length: 10
        }
      },
      uri: 'http://www.example.com/i.fmp4',
      resolvedUri: 'http://www.example.com/i.fmp4',
      byterange: {
        offset: 20,
        length: 5
      },
      duration: 2,
      timeline: 0,
      number: 0
    }]);
  });

  QUnit.module('segmentList - segmentsFromList');
  QUnit.test('uses segmentTimeline to set segments', function (assert) {
    var inputAttributes = {
      segmentUrls: [{
        media: '1.fmp4'
      }, {
        media: '2.fmp4'
      }, {
        media: '3.fmp4'
      }, {
        media: '4.fmp4'
      }, {
        media: '5.fmp4'
      }],
      initialization: {
        sourceURL: 'init.fmp4'
      },
      periodIndex: 0,
      startNumber: 1,
      baseUrl: 'http://example.com/'
    };
    var inputTimeline = [{
      t: 1000,
      d: 1000,
      r: 4
    }];
    assert.deepEqual(segmentsFromList(inputAttributes, inputTimeline), [{
      duration: 1000,
      map: {
        resolvedUri: 'http://example.com/init.fmp4',
        uri: 'init.fmp4'
      },
      resolvedUri: 'http://example.com/1.fmp4',
      timeline: 0,
      uri: '1.fmp4',
      number: 1
    }, {
      duration: 1000,
      map: {
        resolvedUri: 'http://example.com/init.fmp4',
        uri: 'init.fmp4'
      },
      resolvedUri: 'http://example.com/2.fmp4',
      timeline: 0,
      uri: '2.fmp4',
      number: 2
    }, {
      duration: 1000,
      map: {
        resolvedUri: 'http://example.com/init.fmp4',
        uri: 'init.fmp4'
      },
      resolvedUri: 'http://example.com/3.fmp4',
      timeline: 0,
      uri: '3.fmp4',
      number: 3
    }, {
      duration: 1000,
      map: {
        resolvedUri: 'http://example.com/init.fmp4',
        uri: 'init.fmp4'
      },
      resolvedUri: 'http://example.com/4.fmp4',
      timeline: 0,
      uri: '4.fmp4',
      number: 4
    }, {
      duration: 1000,
      map: {
        resolvedUri: 'http://example.com/init.fmp4',
        uri: 'init.fmp4'
      },
      resolvedUri: 'http://example.com/5.fmp4',
      timeline: 0,
      uri: '5.fmp4',
      number: 5
    }]);
  });
  QUnit.test('truncates if segmentTimeline does not apply for all segments', function (assert) {
    var inputAttributes = {
      segmentUrls: [{
        media: '1.fmp4'
      }, {
        media: '2.fmp4'
      }, {
        media: '3.fmp4'
      }, {
        media: '4.fmp4'
      }, {
        media: '5.fmp4'
      }],
      initialization: {
        sourceURL: 'init.fmp4'
      },
      periodIndex: 0,
      startNumber: 1,
      baseUrl: 'http://example.com/'
    };
    var inputTimeline = [{
      t: 1000,
      d: 1000,
      r: 1
    }];
    assert.deepEqual(segmentsFromList(inputAttributes, inputTimeline), [{
      duration: 1000,
      map: {
        resolvedUri: 'http://example.com/init.fmp4',
        uri: 'init.fmp4'
      },
      resolvedUri: 'http://example.com/1.fmp4',
      timeline: 0,
      uri: '1.fmp4',
      number: 1
    }, {
      duration: 1000,
      map: {
        resolvedUri: 'http://example.com/init.fmp4',
        uri: 'init.fmp4'
      },
      resolvedUri: 'http://example.com/2.fmp4',
      timeline: 0,
      uri: '2.fmp4',
      number: 2
    }]);
  });
  QUnit.test('if segment timeline is too long does not add extra blank segments', function (assert) {
    var inputAttributes = {
      segmentUrls: [{
        media: '1.fmp4'
      }, {
        media: '2.fmp4'
      }, {
        media: '3.fmp4'
      }, {
        media: '4.fmp4'
      }, {
        media: '5.fmp4'
      }],
      initialization: {
        sourceURL: 'init.fmp4'
      },
      periodIndex: 0,
      startNumber: 1,
      baseUrl: 'http://example.com/'
    };
    var inputTimeline = [{
      t: 1000,
      d: 1000,
      r: 10
    }];
    assert.deepEqual(segmentsFromList(inputAttributes, inputTimeline), [{
      duration: 1000,
      map: {
        resolvedUri: 'http://example.com/init.fmp4',
        uri: 'init.fmp4'
      },
      resolvedUri: 'http://example.com/1.fmp4',
      timeline: 0,
      uri: '1.fmp4',
      number: 1
    }, {
      duration: 1000,
      map: {
        resolvedUri: 'http://example.com/init.fmp4',
        uri: 'init.fmp4'
      },
      resolvedUri: 'http://example.com/2.fmp4',
      timeline: 0,
      uri: '2.fmp4',
      number: 2
    }, {
      duration: 1000,
      map: {
        resolvedUri: 'http://example.com/init.fmp4',
        uri: 'init.fmp4'
      },
      resolvedUri: 'http://example.com/3.fmp4',
      timeline: 0,
      uri: '3.fmp4',
      number: 3
    }, {
      duration: 1000,
      map: {
        resolvedUri: 'http://example.com/init.fmp4',
        uri: 'init.fmp4'
      },
      resolvedUri: 'http://example.com/4.fmp4',
      timeline: 0,
      uri: '4.fmp4',
      number: 4
    }, {
      duration: 1000,
      map: {
        resolvedUri: 'http://example.com/init.fmp4',
        uri: 'init.fmp4'
      },
      resolvedUri: 'http://example.com/5.fmp4',
      timeline: 0,
      uri: '5.fmp4',
      number: 5
    }]);
  });
  QUnit.test('uses duration to set segments', function (assert) {
    var inputAttributes = {
      segmentUrls: [{
        media: '1.fmp4'
      }, {
        media: '2.fmp4'
      }, {
        media: '3.fmp4'
      }, {
        media: '4.fmp4'
      }, {
        media: '5.fmp4'
      }],
      initialization: {
        sourceURL: 'init.fmp4'
      },
      duration: 10,
      periodIndex: 0,
      startNumber: 1,
      sourceDuration: 50,
      baseUrl: 'http://example.com/'
    };
    assert.deepEqual(segmentsFromList(inputAttributes), [{
      duration: 10,
      map: {
        resolvedUri: 'http://example.com/init.fmp4',
        uri: 'init.fmp4'
      },
      resolvedUri: 'http://example.com/1.fmp4',
      timeline: 0,
      uri: '1.fmp4',
      number: 1
    }, {
      duration: 10,
      map: {
        resolvedUri: 'http://example.com/init.fmp4',
        uri: 'init.fmp4'
      },
      resolvedUri: 'http://example.com/2.fmp4',
      timeline: 0,
      uri: '2.fmp4',
      number: 2
    }, {
      duration: 10,
      map: {
        resolvedUri: 'http://example.com/init.fmp4',
        uri: 'init.fmp4'
      },
      resolvedUri: 'http://example.com/3.fmp4',
      timeline: 0,
      uri: '3.fmp4',
      number: 3
    }, {
      duration: 10,
      map: {
        resolvedUri: 'http://example.com/init.fmp4',
        uri: 'init.fmp4'
      },
      resolvedUri: 'http://example.com/4.fmp4',
      timeline: 0,
      uri: '4.fmp4',
      number: 4
    }, {
      duration: 10,
      map: {
        resolvedUri: 'http://example.com/init.fmp4',
        uri: 'init.fmp4'
      },
      resolvedUri: 'http://example.com/5.fmp4',
      timeline: 0,
      uri: '5.fmp4',
      number: 5
    }]);
  });
  QUnit.test('uses timescale to set segment duration', function (assert) {
    var inputAttributes = {
      segmentUrls: [{
        media: '1.fmp4'
      }, {
        media: '2.fmp4'
      }, {
        media: '3.fmp4'
      }, {
        media: '4.fmp4'
      }, {
        media: '5.fmp4'
      }],
      initialization: {
        sourceURL: 'init.fmp4'
      },
      duration: 10,
      timescale: 2,
      periodIndex: 0,
      startNumber: 1,
      sourceDuration: 25,
      baseUrl: 'http://example.com/'
    };
    assert.deepEqual(segmentsFromList(inputAttributes), [{
      duration: 5,
      map: {
        resolvedUri: 'http://example.com/init.fmp4',
        uri: 'init.fmp4'
      },
      resolvedUri: 'http://example.com/1.fmp4',
      timeline: 0,
      uri: '1.fmp4',
      number: 1
    }, {
      duration: 5,
      map: {
        resolvedUri: 'http://example.com/init.fmp4',
        uri: 'init.fmp4'
      },
      resolvedUri: 'http://example.com/2.fmp4',
      timeline: 0,
      uri: '2.fmp4',
      number: 2
    }, {
      duration: 5,
      map: {
        resolvedUri: 'http://example.com/init.fmp4',
        uri: 'init.fmp4'
      },
      resolvedUri: 'http://example.com/3.fmp4',
      timeline: 0,
      uri: '3.fmp4',
      number: 3
    }, {
      duration: 5,
      map: {
        resolvedUri: 'http://example.com/init.fmp4',
        uri: 'init.fmp4'
      },
      resolvedUri: 'http://example.com/4.fmp4',
      timeline: 0,
      uri: '4.fmp4',
      number: 4
    }, {
      duration: 5,
      map: {
        resolvedUri: 'http://example.com/init.fmp4',
        uri: 'init.fmp4'
      },
      resolvedUri: 'http://example.com/5.fmp4',
      timeline: 0,
      uri: '5.fmp4',
      number: 5
    }]);
  });
  QUnit.test('timescale sets duration of last segment correctly', function (assert) {
    var inputAttributes = {
      segmentUrls: [{
        media: '1.fmp4'
      }, {
        media: '2.fmp4'
      }],
      initialization: {
        sourceURL: 'init.fmp4'
      },
      duration: 10,
      timescale: 1,
      periodIndex: 0,
      startNumber: 1,
      sourceDuration: 15,
      baseUrl: 'http://example.com/'
    };
    assert.deepEqual(segmentsFromList(inputAttributes), [{
      duration: 10,
      map: {
        resolvedUri: 'http://example.com/init.fmp4',
        uri: 'init.fmp4'
      },
      resolvedUri: 'http://example.com/1.fmp4',
      timeline: 0,
      uri: '1.fmp4',
      number: 1
    }, {
      duration: 5,
      map: {
        resolvedUri: 'http://example.com/init.fmp4',
        uri: 'init.fmp4'
      },
      resolvedUri: 'http://example.com/2.fmp4',
      timeline: 0,
      uri: '2.fmp4',
      number: 2
    }]);
  });
  QUnit.test('segmentUrl translates ranges correctly', function (assert) {
    var inputAttributes = {
      segmentUrls: [{
        media: '1.fmp4',
        mediaRange: '0-200'
      }, {
        media: '1.fmp4',
        mediaRange: '201-400'
      }],
      initialization: {
        sourceURL: 'init.fmp4'
      },
      duration: 10,
      timescale: 1,
      periodIndex: 0,
      startNumber: 1,
      sourceDuration: 20,
      baseUrl: 'http://example.com/'
    };
    assert.deepEqual(segmentsFromList(inputAttributes), [{
      duration: 10,
      map: {
        resolvedUri: 'http://example.com/init.fmp4',
        uri: 'init.fmp4'
      },
      byterange: {
        length: 201,
        offset: 0
      },
      resolvedUri: 'http://example.com/1.fmp4',
      timeline: 0,
      uri: '1.fmp4',
      number: 1
    }, {
      duration: 10,
      byterange: {
        length: 200,
        offset: 201
      },
      map: {
        resolvedUri: 'http://example.com/init.fmp4',
        uri: 'init.fmp4'
      },
      resolvedUri: 'http://example.com/1.fmp4',
      timeline: 0,
      uri: '1.fmp4',
      number: 2
    }]);
  });
  QUnit.test('throws error if more than 1 segment and no duration or timeline', function (assert) {
    var inputAttributes = {
      segmentUrls: [{
        media: '1.fmp4'
      }, {
        media: '2.fmp4'
      }],
      duration: 10,
      initialization: {
        sourceURL: 'init.fmp4'
      },
      timescale: 1,
      periodIndex: 0,
      startNumber: 1,
      sourceDuration: 20,
      baseUrl: 'http://example.com/'
    };
    var inputTimeline = [{
      t: 1000,
      d: 1000,
      r: 4
    }];
    assert.throws(function () {
      return segmentsFromList(inputAttributes, inputTimeline);
    }, new Error(errors.SEGMENT_TIME_UNSPECIFIED));
  });
  QUnit.test('throws error if timeline and duration are both defined', function (assert) {
    var inputAttributes = {
      segmentUrls: [{
        media: '1.fmp4'
      }, {
        media: '2.fmp4'
      }],
      initialization: {
        sourceURL: 'init.fmp4'
      },
      timescale: 1,
      periodIndex: 0,
      startNumber: 1,
      sourceDuration: 20,
      baseUrl: 'http://example.com/'
    };
    assert.throws(function () {
      return segmentsFromList(inputAttributes);
    }, new Error(errors.SEGMENT_TIME_UNSPECIFIED));
  });
  QUnit.test('translates ranges in <Initialization> node', function (assert) {
    var inputAttributes = {
      segmentUrls: [{
        media: '1.fmp4'
      }, {
        media: '1.fmp4'
      }],
      initialization: {
        sourceURL: 'init.fmp4',
        range: '121-125'
      },
      duration: 10,
      timescale: 1,
      periodIndex: 0,
      startNumber: 1,
      sourceDuration: 20,
      baseUrl: 'http://example.com/'
    };
    assert.deepEqual(segmentsFromList(inputAttributes), [{
      duration: 10,
      map: {
        resolvedUri: 'http://example.com/init.fmp4',
        uri: 'init.fmp4',
        byterange: {
          length: 5,
          offset: 121
        }
      },
      resolvedUri: 'http://example.com/1.fmp4',
      timeline: 0,
      uri: '1.fmp4',
      number: 1
    }, {
      duration: 10,
      map: {
        resolvedUri: 'http://example.com/init.fmp4',
        uri: 'init.fmp4',
        byterange: {
          length: 5,
          offset: 121
        }
      },
      resolvedUri: 'http://example.com/1.fmp4',
      timeline: 0,
      uri: '1.fmp4',
      number: 2
    }]);
  });

  function _extends() {
    _extends = Object.assign || function (target) {
      for (var i = 1; i < arguments.length; i++) {
        var source = arguments[i];

        for (var key in source) {
          if (Object.prototype.hasOwnProperty.call(source, key)) {
            target[key] = source[key];
          }
        }
      }

      return target;
    };

    return _extends.apply(this, arguments);
  }

  QUnit.module('segmentTemplate - constructTemplateUrl');
  QUnit.test('does not change url with no identifiers', function (assert) {
    var url = 'path/to/segment.mp4';
    assert.equal(constructTemplateUrl(url, {}), url, 'no change');
  });
  QUnit.test('replaces each identifier individually', function (assert) {
    var values = {
      RepresentationID: 'Rep1',
      Bandwidth: 1000,
      Number: 2,
      Time: 2000
    };
    var cases = [{
      url: '/$RepresentationID$/segment.mp4',
      expected: '/Rep1/segment.mp4'
    }, {
      url: '/$Bandwidth$/segment.mp4',
      expected: '/1000/segment.mp4'
    }, {
      url: '/$Number$/segment.mp4',
      expected: '/2/segment.mp4'
    }, {
      url: '/$Time$/segment.mp4',
      expected: '/2000/segment.mp4'
    }, {
      url: '/$$/segment.mp4',
      expected: '/$/segment.mp4'
    }];
    cases.forEach(function (test) {
      assert.equal(constructTemplateUrl(test.url, values), test.expected, "constructs " + test.url);
    });
  });
  QUnit.test('replaces multiple identifiers in url', function (assert) {
    assert.equal(constructTemplateUrl('$$$Time$$$$$/$RepresentationID$/$Bandwidth$/$Number$-$Time$-segment-$Number$.mp4', {
      RepresentationID: 'Rep1',
      Bandwidth: 1000,
      Number: 2,
      Time: 2000
    }), '$2000$$/Rep1/1000/2-2000-segment-2.mp4', 'correctly replaces multiple identifiers in single url');
  });
  QUnit.test('does not replace unknown identifiers', function (assert) {
    assert.equal(constructTemplateUrl('/$UNKNOWN$/$RepresentationID$/$UNKOWN2$/$Number$.mp4', {
      RepresentationID: 'Rep1',
      Number: 1
    }), '/$UNKNOWN$/Rep1/$UNKOWN2$/1.mp4', 'ignores unknown identifiers');
  });
  QUnit.test('honors padding format tag', function (assert) {
    assert.equal(constructTemplateUrl('/$Number%03d$/segment.mp4', {
      Number: 7
    }), '/007/segment.mp4', 'correctly adds padding when format tag present');
  });
  QUnit.test('does not add padding when value is longer than width', function (assert) {
    assert.equal(constructTemplateUrl('/$Bandwidth%06d$/segment.mp4', {
      Bandwidth: 999999999
    }), '/999999999/segment.mp4', 'no padding when value longer than format width');
  });
  QUnit.test('does not use padding format tag for $RepresentationID$', function (assert) {
    assert.equal(constructTemplateUrl('/$RepresentationID%09d$/$Number%03d$/segment.mp4', {
      RepresentationID: 'Rep1',
      Number: 7
    }), '/Rep1/007/segment.mp4', 'ignores format tag for $RepresentationID$');
  });
  QUnit.module('segmentTemplate - parseTemplateInfo');
  QUnit.test('one media segment when no @duration attribute or SegmentTimeline element', function (assert) {
    var attributes = {
      startNumber: 3,
      timescale: 1000,
      sourceDuration: 42,
      periodIndex: 1
    };
    assert.deepEqual(parseTemplateInfo(attributes, void 0), [{
      number: 3,
      duration: 42,
      time: 0,
      timeline: 1
    }], 'creates segment list of one media segment when no @duration attribute or timeline');
  });
  QUnit.test('uses @duration attribute when present', function (assert) {
    var attributes = {
      startNumber: 0,
      timescale: 1000,
      sourceDuration: 16,
      duration: 6000,
      periodIndex: 1
    };
    assert.deepEqual(parseTemplateInfo(attributes, []), [{
      number: 0,
      duration: 6,
      timeline: 1,
      time: 0
    }, {
      number: 1,
      duration: 6,
      timeline: 1,
      time: 6000
    }, {
      number: 2,
      duration: 4,
      timeline: 1,
      time: 12000
    }], 'correctly parses segment durations and start times with @duration attribute');
  });
  QUnit.test('parseByDuration allows non zero startNumber', function (assert) {
    var attributes = {
      startNumber: 101,
      timescale: 1000,
      sourceDuration: 16,
      duration: 6000,
      periodIndex: 1
    };
    assert.deepEqual(parseTemplateInfo(attributes, []), [{
      number: 101,
      duration: 6,
      timeline: 1,
      time: 0
    }, {
      number: 102,
      duration: 6,
      timeline: 1,
      time: 6000
    }, {
      number: 103,
      duration: 4,
      timeline: 1,
      time: 12000
    }], 'allows non zero startNumber');
  });
  QUnit.test('parseByDuration defaults 1 for startNumber and timescale', function (assert) {
    var attributes = {
      sourceDuration: 11,
      duration: '4',
      periodIndex: 1
    };
    assert.deepEqual(parseTemplateInfo(attributes, []), [{
      number: 1,
      duration: 4,
      timeline: 1,
      time: 0
    }, {
      number: 2,
      duration: 4,
      timeline: 1,
      time: 4
    }, {
      number: 3,
      duration: 3,
      timeline: 1,
      time: 8
    }], 'uses default startNumber and timescale value of 1');
  });
  QUnit.test('uses SegmentTimeline info when no @duration attribute', function (assert) {
    var attributes = {
      startNumber: 0,
      sourceDuration: 16,
      timescale: 1000,
      periodIndex: 1
    };
    var segmentTimeline = [{
      t: 0,
      d: 6000
    }, {
      d: 2000
    }, {
      d: 3000
    }, {
      d: 5000
    }];
    assert.deepEqual(parseTemplateInfo(attributes, segmentTimeline), [{
      number: 0,
      duration: 6,
      time: 0,
      timeline: 1
    }, {
      number: 1,
      duration: 2,
      time: 6000,
      timeline: 1
    }, {
      number: 2,
      duration: 3,
      time: 8000,
      timeline: 1
    }, {
      number: 3,
      duration: 5,
      time: 11000,
      timeline: 1
    }], 'correctly calculates segment durations and start times with SegmentTimeline');
  });
  QUnit.test('parseByTimeline allows non zero startNumber', function (assert) {
    var attributes = {
      startNumber: 101,
      sourceDuration: 16,
      timescale: 1000,
      periodIndex: 1
    };
    var segmentTimeline = [{
      t: 0,
      d: 6000
    }, {
      d: 2000
    }, {
      d: 3000
    }, {
      d: 5000
    }];
    assert.deepEqual(parseTemplateInfo(attributes, segmentTimeline), [{
      number: 101,
      duration: 6,
      time: 0,
      timeline: 1
    }, {
      number: 102,
      duration: 2,
      time: 6000,
      timeline: 1
    }, {
      number: 103,
      duration: 3,
      time: 8000,
      timeline: 1
    }, {
      number: 104,
      duration: 5,
      time: 11000,
      timeline: 1
    }], 'allows non zero startNumber');
  });
  QUnit.test('parseByTimeline defaults 1 for startNumber and timescale', function (assert) {
    var attributes = {
      sourceDuration: 11,
      periodIndex: 1
    };
    var segmentTimeline = [{
      t: 0,
      d: 4
    }, {
      d: 2
    }, {
      d: 3
    }, {
      d: 2
    }];
    assert.deepEqual(parseTemplateInfo(attributes, segmentTimeline), [{
      number: 1,
      duration: 4,
      time: 0,
      timeline: 1
    }, {
      number: 2,
      duration: 2,
      time: 4,
      timeline: 1
    }, {
      number: 3,
      duration: 3,
      time: 6,
      timeline: 1
    }, {
      number: 4,
      duration: 2,
      time: 9,
      timeline: 1
    }], 'defaults to 1 for startNumber and timescale');
  });
  QUnit.test('defaults SegmentTimeline.S@t to 0 for first segment', function (assert) {
    var attributes = {
      startNumber: 0,
      sourceDuration: 16,
      timescale: 1000,
      periodIndex: 1
    };
    var segmentTimeline = [{
      d: 6000
    }, {
      d: 2000
    }, {
      d: 3000
    }, {
      d: 5000
    }];
    assert.deepEqual(parseTemplateInfo(attributes, segmentTimeline), [{
      number: 0,
      duration: 6,
      time: 0,
      timeline: 1
    }, {
      number: 1,
      duration: 2,
      time: 6000,
      timeline: 1
    }, {
      number: 2,
      duration: 3,
      time: 8000,
      timeline: 1
    }, {
      number: 3,
      duration: 5,
      time: 11000,
      timeline: 1
    }], 'uses default value of 0');
  });
  QUnit.test('allows non zero starting SegmentTimeline.S@t value', function (assert) {
    var attributes = {
      startNumber: 0,
      sourceDuration: 16,
      timescale: 1000,
      periodIndex: 1
    };
    var segmentTimeline = [{
      t: 42000,
      d: 6000
    }, {
      d: 2000
    }, {
      d: 3000
    }, {
      d: 5000
    }];
    assert.deepEqual(parseTemplateInfo(attributes, segmentTimeline), [{
      number: 0,
      duration: 6,
      time: 42000,
      timeline: 1
    }, {
      number: 1,
      duration: 2,
      time: 48000,
      timeline: 1
    }, {
      number: 2,
      duration: 3,
      time: 50000,
      timeline: 1
    }, {
      number: 3,
      duration: 5,
      time: 53000,
      timeline: 1
    }], 'allows non zero SegmentTimeline.S@t start value');
  });
  QUnit.test('honors @r repeat attribute for SegmentTimeline.S', function (assert) {
    var attributes = {
      startNumber: 0,
      sourceDuration: 16,
      timescale: 1000,
      periodIndex: 1
    };
    var segmentTimeline = [{
      t: 0,
      d: 6000
    }, {
      d: 1000,
      r: 3
    }, {
      d: 5000
    }, {
      d: 1000
    }];
    assert.deepEqual(parseTemplateInfo(attributes, segmentTimeline), [{
      number: 0,
      duration: 6,
      time: 0,
      timeline: 1
    }, {
      number: 1,
      duration: 1,
      time: 6000,
      timeline: 1
    }, {
      number: 2,
      duration: 1,
      time: 7000,
      timeline: 1
    }, {
      number: 3,
      duration: 1,
      time: 8000,
      timeline: 1
    }, {
      number: 4,
      duration: 1,
      time: 9000,
      timeline: 1
    }, {
      number: 5,
      duration: 5,
      time: 10000,
      timeline: 1
    }, {
      number: 6,
      duration: 1,
      time: 15000,
      timeline: 1
    }], 'correctly uses @r repeat attribute');
  });
  QUnit.test('correctly handles negative @r repeat value', function (assert) {
    var attributes = {
      startNumber: 0,
      sourceDuration: 16,
      timescale: 1000,
      periodIndex: 1
    };
    var segmentTimeline = [{
      t: 0,
      d: 6000
    }, {
      d: 1000,
      r: -1
    }, {
      t: 10000,
      d: 5000
    }, {
      d: 1000
    }];
    assert.deepEqual(parseTemplateInfo(attributes, segmentTimeline), [{
      number: 0,
      duration: 6,
      time: 0,
      timeline: 1
    }, {
      number: 1,
      duration: 1,
      time: 6000,
      timeline: 1
    }, {
      number: 2,
      duration: 1,
      time: 7000,
      timeline: 1
    }, {
      number: 3,
      duration: 1,
      time: 8000,
      timeline: 1
    }, {
      number: 4,
      duration: 1,
      time: 9000,
      timeline: 1
    }, {
      number: 5,
      duration: 5,
      time: 10000,
      timeline: 1
    }, {
      number: 6,
      duration: 1,
      time: 15000,
      timeline: 1
    }], 'correctly uses negative @r repeat attribute');
  });
  QUnit.test('correctly handles negative @r repeat value for last S', function (assert) {
    var attributes = {
      startNumber: 0,
      sourceDuration: 15,
      timescale: 1000,
      periodIndex: 1
    };
    var segmentTimeline = [{
      t: 0,
      d: 6000
    }, {
      d: 3000,
      r: -1
    }];
    assert.deepEqual(parseTemplateInfo(attributes, segmentTimeline), [{
      number: 0,
      duration: 6,
      time: 0,
      timeline: 1
    }, {
      number: 1,
      duration: 3,
      time: 6000,
      timeline: 1
    }, {
      number: 2,
      duration: 3,
      time: 9000,
      timeline: 1
    }, {
      number: 3,
      duration: 3,
      time: 12000,
      timeline: 1
    }], 'correctly uses negative @r repeat attribute for last S');
  });
  QUnit.skip('detects discontinuity when @t time is greater than expected start time', function (assert) {});
  QUnit.module('segmentTemplate - type ="dynamic"');
  QUnit.test('correctly handles duration', function (assert) {
    var basicAttributes = {
      baseUrl: 'http://www.example.com/',
      type: 'dynamic',
      media: 'n-$Number$.m4s',
      minimumUpdatePeriod: 0,
      timescale: 1,
      NOW: 10000,
      clientOffset: 0,
      availabilityStartTime: 0,
      startNumber: 1,
      duration: 2,
      periodIndex: 1
    };
    assert.deepEqual(segmentsFromTemplate(basicAttributes, []), [{
      duration: 2,
      map: {
        resolvedUri: 'http://www.example.com/',
        uri: ''
      },
      number: 1,
      resolvedUri: 'http://www.example.com/n-1.m4s',
      timeline: 1,
      uri: 'n-1.m4s'
    }, {
      duration: 2,
      map: {
        resolvedUri: 'http://www.example.com/',
        uri: ''
      },
      number: 2,
      resolvedUri: 'http://www.example.com/n-2.m4s',
      timeline: 1,
      uri: 'n-2.m4s'
    }, {
      duration: 2,
      map: {
        resolvedUri: 'http://www.example.com/',
        uri: ''
      },
      number: 3,
      resolvedUri: 'http://www.example.com/n-3.m4s',
      timeline: 1,
      uri: 'n-3.m4s'
    }, {
      duration: 2,
      map: {
        resolvedUri: 'http://www.example.com/',
        uri: ''
      },
      number: 4,
      resolvedUri: 'http://www.example.com/n-4.m4s',
      timeline: 1,
      uri: 'n-4.m4s'
    }, {
      duration: 2,
      map: {
        resolvedUri: 'http://www.example.com/',
        uri: ''
      },
      number: 5,
      resolvedUri: 'http://www.example.com/n-5.m4s',
      timeline: 1,
      uri: 'n-5.m4s'
    }], 'segments correctly with basic settings');
    assert.deepEqual(segmentsFromTemplate(_extends({}, basicAttributes, {
      startNumber: 10
    }), []), [{
      duration: 2,
      map: {
        resolvedUri: 'http://www.example.com/',
        uri: ''
      },
      number: 10,
      resolvedUri: 'http://www.example.com/n-10.m4s',
      timeline: 1,
      uri: 'n-10.m4s'
    }, {
      duration: 2,
      map: {
        resolvedUri: 'http://www.example.com/',
        uri: ''
      },
      number: 11,
      resolvedUri: 'http://www.example.com/n-11.m4s',
      timeline: 1,
      uri: 'n-11.m4s'
    }, {
      duration: 2,
      map: {
        resolvedUri: 'http://www.example.com/',
        uri: ''
      },
      number: 12,
      resolvedUri: 'http://www.example.com/n-12.m4s',
      timeline: 1,
      uri: 'n-12.m4s'
    }, {
      duration: 2,
      map: {
        resolvedUri: 'http://www.example.com/',
        uri: ''
      },
      number: 13,
      resolvedUri: 'http://www.example.com/n-13.m4s',
      timeline: 1,
      uri: 'n-13.m4s'
    }, {
      duration: 2,
      map: {
        resolvedUri: 'http://www.example.com/',
        uri: ''
      },
      number: 14,
      resolvedUri: 'http://www.example.com/n-14.m4s',
      timeline: 1,
      uri: 'n-14.m4s'
    }], 'segments adjusted correctly based on @startNumber');
    assert.deepEqual(segmentsFromTemplate(_extends({}, basicAttributes, {
      availabilityStartTime: 4
    }), []), [{
      duration: 2,
      map: {
        resolvedUri: 'http://www.example.com/',
        uri: ''
      },
      number: 1,
      resolvedUri: 'http://www.example.com/n-1.m4s',
      timeline: 1,
      uri: 'n-1.m4s'
    }, {
      duration: 2,
      map: {
        resolvedUri: 'http://www.example.com/',
        uri: ''
      },
      number: 2,
      resolvedUri: 'http://www.example.com/n-2.m4s',
      timeline: 1,
      uri: 'n-2.m4s'
    }, {
      duration: 2,
      map: {
        resolvedUri: 'http://www.example.com/',
        uri: ''
      },
      number: 3,
      resolvedUri: 'http://www.example.com/n-3.m4s',
      timeline: 1,
      uri: 'n-3.m4s'
    }], 'segments correct with @availabilityStartTime set');
    assert.deepEqual(segmentsFromTemplate(_extends({}, basicAttributes, {
      availabilityStartTime: 2,
      start: 4
    }), []), [{
      duration: 2,
      map: {
        resolvedUri: 'http://www.example.com/',
        uri: ''
      },
      number: 1,
      resolvedUri: 'http://www.example.com/n-1.m4s',
      timeline: 1,
      uri: 'n-1.m4s'
    }, {
      duration: 2,
      map: {
        resolvedUri: 'http://www.example.com/',
        uri: ''
      },
      number: 2,
      resolvedUri: 'http://www.example.com/n-2.m4s',
      timeline: 1,
      uri: 'n-2.m4s'
    }], 'segments correct with @availabilityStartTime and @start set');
    assert.deepEqual(segmentsFromTemplate(_extends({}, basicAttributes, {
      timeShiftBufferDepth: 4
    }, [])), [{
      duration: 2,
      map: {
        resolvedUri: 'http://www.example.com/',
        uri: ''
      },
      number: 4,
      resolvedUri: 'http://www.example.com/n-4.m4s',
      timeline: 1,
      uri: 'n-4.m4s'
    }, {
      duration: 2,
      map: {
        resolvedUri: 'http://www.example.com/',
        uri: ''
      },
      number: 5,
      resolvedUri: 'http://www.example.com/n-5.m4s',
      timeline: 1,
      uri: 'n-5.m4s'
    }], 'segments correct with @timeShiftBufferDepth set');
    assert.deepEqual(segmentsFromTemplate(_extends({}, basicAttributes, {
      clientOffset: -2000
    }, [])), [{
      duration: 2,
      map: {
        resolvedUri: 'http://www.example.com/',
        uri: ''
      },
      number: 1,
      resolvedUri: 'http://www.example.com/n-1.m4s',
      timeline: 1,
      uri: 'n-1.m4s'
    }, {
      duration: 2,
      map: {
        resolvedUri: 'http://www.example.com/',
        uri: ''
      },
      number: 2,
      resolvedUri: 'http://www.example.com/n-2.m4s',
      timeline: 1,
      uri: 'n-2.m4s'
    }, {
      duration: 2,
      map: {
        resolvedUri: 'http://www.example.com/',
        uri: ''
      },
      number: 3,
      resolvedUri: 'http://www.example.com/n-3.m4s',
      timeline: 1,
      uri: 'n-3.m4s'
    }, {
      duration: 2,
      map: {
        resolvedUri: 'http://www.example.com/',
        uri: ''
      },
      number: 4,
      resolvedUri: 'http://www.example.com/n-4.m4s',
      timeline: 1,
      uri: 'n-4.m4s'
    }], 'segments correct with given clientOffset');
  });
  QUnit.test('correctly handles duration with segmentTimeline', function (assert) {
    var basicAttributes = {
      baseUrl: 'http://www.example.com/',
      type: 'dynamic',
      media: 'n-$Number$.m4s',
      minimumUpdatePeriod: 2,
      timescale: 1,
      NOW: 8000,
      clientOffset: 0,
      availabilityStartTime: 0,
      startNumber: 1,
      periodIndex: 1
    };
    var segmentTimeline = [{
      t: 0,
      d: 2,
      r: 1
    }, {
      d: 2,
      r: -1
    }];
    assert.deepEqual(segmentsFromTemplate(basicAttributes, segmentTimeline), [{
      duration: 2,
      map: {
        resolvedUri: 'http://www.example.com/',
        uri: ''
      },
      number: 1,
      resolvedUri: 'http://www.example.com/n-1.m4s',
      timeline: 1,
      uri: 'n-1.m4s'
    }, {
      duration: 2,
      map: {
        resolvedUri: 'http://www.example.com/',
        uri: ''
      },
      number: 2,
      resolvedUri: 'http://www.example.com/n-2.m4s',
      timeline: 1,
      uri: 'n-2.m4s'
    }, {
      duration: 2,
      map: {
        resolvedUri: 'http://www.example.com/',
        uri: ''
      },
      number: 3,
      resolvedUri: 'http://www.example.com/n-3.m4s',
      timeline: 1,
      uri: 'n-3.m4s'
    }, {
      duration: 2,
      map: {
        resolvedUri: 'http://www.example.com/',
        uri: ''
      },
      number: 4,
      resolvedUri: 'http://www.example.com/n-4.m4s',
      timeline: 1,
      uri: 'n-4.m4s'
    }, {
      duration: 2,
      map: {
        resolvedUri: 'http://www.example.com/',
        uri: ''
      },
      number: 5,
      resolvedUri: 'http://www.example.com/n-5.m4s',
      timeline: 1,
      uri: 'n-5.m4s'
    }], 'segments should fill until current time when r = -1 and @minimumUpdatePeriod > 0');
    assert.deepEqual(segmentsFromTemplate(_extends({}, basicAttributes, {
      clientOffset: -2000
    }), segmentTimeline), [{
      duration: 2,
      map: {
        resolvedUri: 'http://www.example.com/',
        uri: ''
      },
      number: 1,
      resolvedUri: 'http://www.example.com/n-1.m4s',
      timeline: 1,
      uri: 'n-1.m4s'
    }, {
      duration: 2,
      map: {
        resolvedUri: 'http://www.example.com/',
        uri: ''
      },
      number: 2,
      resolvedUri: 'http://www.example.com/n-2.m4s',
      timeline: 1,
      uri: 'n-2.m4s'
    }, {
      duration: 2,
      map: {
        resolvedUri: 'http://www.example.com/',
        uri: ''
      },
      number: 3,
      resolvedUri: 'http://www.example.com/n-3.m4s',
      timeline: 1,
      uri: 'n-3.m4s'
    }, {
      duration: 2,
      map: {
        resolvedUri: 'http://www.example.com/',
        uri: ''
      },
      number: 4,
      resolvedUri: 'http://www.example.com/n-4.m4s',
      timeline: 1,
      uri: 'n-4.m4s'
    }], 'segments should fill correctly when taking client offset into account');
    var segmentTimelineShifted = [{
      t: 2,
      d: 2,
      r: 1
    }, {
      d: 2,
      r: -1
    }];
    assert.deepEqual(segmentsFromTemplate(basicAttributes, segmentTimelineShifted), [{
      duration: 2,
      map: {
        resolvedUri: 'http://www.example.com/',
        uri: ''
      },
      number: 1,
      resolvedUri: 'http://www.example.com/n-1.m4s',
      timeline: 1,
      uri: 'n-1.m4s'
    }, {
      duration: 2,
      map: {
        resolvedUri: 'http://www.example.com/',
        uri: ''
      },
      number: 2,
      resolvedUri: 'http://www.example.com/n-2.m4s',
      timeline: 1,
      uri: 'n-2.m4s'
    }, {
      duration: 2,
      map: {
        resolvedUri: 'http://www.example.com/',
        uri: ''
      },
      number: 3,
      resolvedUri: 'http://www.example.com/n-3.m4s',
      timeline: 1,
      uri: 'n-3.m4s'
    }, {
      duration: 2,
      map: {
        resolvedUri: 'http://www.example.com/',
        uri: ''
      },
      number: 4,
      resolvedUri: 'http://www.example.com/n-4.m4s',
      timeline: 1,
      uri: 'n-4.m4s'
    }], 'segments take into account different time value for first segment');
    assert.deepEqual(segmentsFromTemplate(_extends({}, basicAttributes, {
      timescale: 2
    }), segmentTimelineShifted), [{
      duration: 1,
      map: {
        resolvedUri: 'http://www.example.com/',
        uri: ''
      },
      number: 1,
      resolvedUri: 'http://www.example.com/n-1.m4s',
      timeline: 1,
      uri: 'n-1.m4s'
    }, {
      duration: 1,
      map: {
        resolvedUri: 'http://www.example.com/',
        uri: ''
      },
      number: 2,
      resolvedUri: 'http://www.example.com/n-2.m4s',
      timeline: 1,
      uri: 'n-2.m4s'
    }, {
      duration: 1,
      map: {
        resolvedUri: 'http://www.example.com/',
        uri: ''
      },
      number: 3,
      resolvedUri: 'http://www.example.com/n-3.m4s',
      timeline: 1,
      uri: 'n-3.m4s'
    }, {
      duration: 1,
      map: {
        resolvedUri: 'http://www.example.com/',
        uri: ''
      },
      number: 4,
      resolvedUri: 'http://www.example.com/n-4.m4s',
      timeline: 1,
      uri: 'n-4.m4s'
    }, {
      duration: 1,
      map: {
        resolvedUri: 'http://www.example.com/',
        uri: ''
      },
      number: 5,
      resolvedUri: 'http://www.example.com/n-5.m4s',
      timeline: 1,
      uri: 'n-5.m4s'
    }, {
      duration: 1,
      map: {
        resolvedUri: 'http://www.example.com/',
        uri: ''
      },
      number: 6,
      resolvedUri: 'http://www.example.com/n-6.m4s',
      timeline: 1,
      uri: 'n-6.m4s'
    }, {
      duration: 1,
      map: {
        resolvedUri: 'http://www.example.com/',
        uri: ''
      },
      number: 7,
      resolvedUri: 'http://www.example.com/n-7.m4s',
      timeline: 1,
      uri: 'n-7.m4s'
    }, {
      duration: 1,
      map: {
        resolvedUri: 'http://www.example.com/',
        uri: ''
      },
      number: 8,
      resolvedUri: 'http://www.example.com/n-8.m4s',
      timeline: 1,
      uri: 'n-8.m4s'
    }, {
      duration: 1,
      map: {
        resolvedUri: 'http://www.example.com/',
        uri: ''
      },
      number: 9,
      resolvedUri: 'http://www.example.com/n-9.m4s',
      timeline: 1,
      uri: 'n-9.m4s'
    }], 'segments take into account different time value for first segment with timescale');
  });
  QUnit.module('segmentTemplate - segmentsFromTemplate');
  QUnit.test('constructs simple segment list and resolves uris', function (assert) {
    var attributes = {
      startNumber: 0,
      duration: 6000,
      sourceDuration: 16,
      timescale: 1000,
      bandwidth: 100,
      id: 'Rep1',
      initialization: {
        sourceURL: '$RepresentationID$/$Bandwidth$/init.mp4'
      },
      media: '$RepresentationID$/$Bandwidth$/$Number%03d$-$Time%05d$.mp4',
      periodIndex: 1,
      baseUrl: 'https://example.com/'
    };
    var segments = [{
      duration: 6,
      map: {
        resolvedUri: 'https://example.com/Rep1/100/init.mp4',
        uri: 'Rep1/100/init.mp4'
      },
      resolvedUri: 'https://example.com/Rep1/100/000-00000.mp4',
      timeline: 1,
      uri: 'Rep1/100/000-00000.mp4',
      number: 0
    }, {
      duration: 6,
      map: {
        resolvedUri: 'https://example.com/Rep1/100/init.mp4',
        uri: 'Rep1/100/init.mp4'
      },
      resolvedUri: 'https://example.com/Rep1/100/001-06000.mp4',
      timeline: 1,
      uri: 'Rep1/100/001-06000.mp4',
      number: 1
    }, {
      duration: 4,
      map: {
        resolvedUri: 'https://example.com/Rep1/100/init.mp4',
        uri: 'Rep1/100/init.mp4'
      },
      resolvedUri: 'https://example.com/Rep1/100/002-12000.mp4',
      timeline: 1,
      uri: 'Rep1/100/002-12000.mp4',
      number: 2
    }];
    assert.deepEqual(segmentsFromTemplate(attributes, void 0), segments, 'creates segments from template');
  });
  QUnit.test('constructs simple segment list and with <Initialization> node', function (assert) {
    var attributes = {
      startNumber: 0,
      duration: 6000,
      sourceDuration: 16,
      timescale: 1000,
      bandwidth: 100,
      id: 'Rep1',
      initialization: {
        sourceURL: 'init.mp4',
        range: '121-125'
      },
      media: '$RepresentationID$/$Bandwidth$/$Number%03d$-$Time%05d$.mp4',
      periodIndex: 1,
      baseUrl: 'https://example.com/'
    };
    var segments = [{
      duration: 6,
      map: {
        resolvedUri: 'https://example.com/init.mp4',
        uri: 'init.mp4',
        byterange: {
          length: 5,
          offset: 121
        }
      },
      resolvedUri: 'https://example.com/Rep1/100/000-00000.mp4',
      timeline: 1,
      uri: 'Rep1/100/000-00000.mp4',
      number: 0
    }, {
      duration: 6,
      map: {
        resolvedUri: 'https://example.com/init.mp4',
        uri: 'init.mp4',
        byterange: {
          length: 5,
          offset: 121
        }
      },
      resolvedUri: 'https://example.com/Rep1/100/001-06000.mp4',
      timeline: 1,
      uri: 'Rep1/100/001-06000.mp4',
      number: 1
    }, {
      duration: 4,
      map: {
        resolvedUri: 'https://example.com/init.mp4',
        uri: 'init.mp4',
        byterange: {
          length: 5,
          offset: 121
        }
      },
      resolvedUri: 'https://example.com/Rep1/100/002-12000.mp4',
      timeline: 1,
      uri: 'Rep1/100/002-12000.mp4',
      number: 2
    }];
    assert.deepEqual(segmentsFromTemplate(attributes, void 0), segments, 'creates segments from template');
  });

  QUnit.module('urlType - urlTypeConverter');
  QUnit.test('returns correct object if given baseUrl only', function (assert) {
    assert.deepEqual(urlTypeToSegment({
      baseUrl: 'http://example.com'
    }), {
      resolvedUri: 'http://example.com',
      uri: ''
    });
  });
  QUnit.test('returns correct object if given baseUrl and source', function (assert) {
    assert.deepEqual(urlTypeToSegment({
      baseUrl: 'http://example.com',
      source: 'init.fmp4'
    }), {
      resolvedUri: 'http://example.com/init.fmp4',
      uri: 'init.fmp4'
    });
  });
  QUnit.test('returns correct object if given baseUrl, source and range', function (assert) {
    assert.deepEqual(urlTypeToSegment({
      baseUrl: 'http://example.com',
      source: 'init.fmp4',
      range: '101-105'
    }), {
      resolvedUri: 'http://example.com/init.fmp4',
      uri: 'init.fmp4',
      byterange: {
        offset: 101,
        length: 5
      }
    });
  });
  QUnit.test('returns correct object if given baseUrl, source and indexRange', function (assert) {
    assert.deepEqual(urlTypeToSegment({
      baseUrl: 'http://example.com',
      source: 'sidx.fmp4',
      indexRange: '101-105'
    }), {
      resolvedUri: 'http://example.com/sidx.fmp4',
      uri: 'sidx.fmp4',
      byterange: {
        offset: 101,
        length: 5
      }
    });
  });
  QUnit.test('returns correct object if given baseUrl and range', function (assert) {
    assert.deepEqual(urlTypeToSegment({
      baseUrl: 'http://example.com',
      range: '101-105'
    }), {
      resolvedUri: 'http://example.com',
      uri: '',
      byterange: {
        offset: 101,
        length: 5
      }
    });
  });
  QUnit.test('returns correct object if given baseUrl and indexRange', function (assert) {
    assert.deepEqual(urlTypeToSegment({
      baseUrl: 'http://example.com',
      indexRange: '101-105'
    }), {
      resolvedUri: 'http://example.com',
      uri: '',
      byterange: {
        offset: 101,
        length: 5
      }
    });
  });
  QUnit.module('urlType - byteRangeToString');
  QUnit.test('returns correct string representing byterange object', function (assert) {
    assert.strictEqual(byteRangeToString({
      offset: 0,
      length: 100
    }), '0-99');
  });

  QUnit.module('stringToMpdXml');
  QUnit.test('simple mpd', function (assert) {
    assert.deepEqual(stringToMpdXml('<MPD></MPD>').tagName, 'MPD');
  });
  QUnit.test('invalid xml', function (assert) {
    assert.throws(function () {
      return stringToMpdXml('<test');
    }, new RegExp(errors.DASH_INVALID_XML));
  });
  QUnit.test('invalid manifest', function (assert) {
    assert.throws(function () {
      return stringToMpdXml('<test>');
    }, new RegExp(errors.DASH_INVALID_XML));
  });
  QUnit.test('empty manifest', function (assert) {
    assert.throws(function () {
      return stringToMpdXml('');
    }, new RegExp(errors.DASH_EMPTY_MANIFEST));
  });

  QUnit.module('toM3u8');
  QUnit.test('playlists', function (assert) {
    var _attributes, _attributes2, _mediaGroups, _attributes3;

    var input = [{
      attributes: {
        id: '1',
        codecs: 'foo;bar',
        sourceDuration: 100,
        duration: 0,
        bandwidth: 20000,
        periodIndex: 1,
        mimeType: 'audio/mp4'
      },
      segments: []
    }, {
      attributes: {
        id: '2',
        codecs: 'foo;bar',
        sourceDuration: 100,
        duration: 0,
        bandwidth: 10000,
        periodIndex: 1,
        mimeType: 'audio/mp4'
      },
      segments: []
    }, {
      attributes: {
        sourceDuration: 100,
        id: '1',
        width: 800,
        height: 600,
        codecs: 'foo;bar',
        duration: 0,
        bandwidth: 10000,
        periodIndex: 1,
        mimeType: 'video/mp4'
      },
      segments: []
    }, {
      attributes: {
        sourceDuration: 100,
        id: '1',
        bandwidth: 20000,
        periodIndex: 1,
        mimeType: 'text/vtt',
        baseUrl: 'https://www.example.com/vtt'
      }
    }, {
      attributes: {
        sourceDuration: 100,
        id: '1',
        bandwidth: 10000,
        periodIndex: 1,
        mimeType: 'text/vtt',
        baseUrl: 'https://www.example.com/vtt'
      }
    }];
    var expected = {
      allowCache: true,
      discontinuityStarts: [],
      duration: 100,
      endList: true,
      minimumUpdatePeriod: 0,
      mediaGroups: (_mediaGroups = {
        AUDIO: {
          audio: {
            main: {
              autoselect: true,
              default: true,
              language: '',
              playlists: [{
                attributes: (_attributes = {
                  BANDWIDTH: 20000,
                  CODECS: 'foo;bar',
                  NAME: '1'
                }, _attributes['PROGRAM-ID'] = 1, _attributes),
                mediaSequence: 1,
                endList: true,
                resolvedUri: '',
                segments: [],
                timeline: 1,
                uri: '',
                targetDuration: 0
              }],
              uri: ''
            }
          }
        }
      }, _mediaGroups['CLOSED-CAPTIONS'] = {}, _mediaGroups.SUBTITLES = {
        subs: {
          text: {
            autoselect: false,
            default: false,
            language: 'text',
            playlists: [{
              attributes: (_attributes2 = {
                BANDWIDTH: 20000,
                NAME: '1'
              }, _attributes2['PROGRAM-ID'] = 1, _attributes2),
              mediaSequence: 0,
              targetDuration: 100,
              endList: true,
              resolvedUri: 'https://www.example.com/vtt',
              segments: [{
                duration: 100,
                resolvedUri: 'https://www.example.com/vtt',
                timeline: 1,
                uri: 'https://www.example.com/vtt',
                number: 0
              }],
              timeline: 1,
              uri: ''
            }],
            uri: ''
          }
        }
      }, _mediaGroups.VIDEO = {}, _mediaGroups),
      playlists: [{
        attributes: (_attributes3 = {
          AUDIO: 'audio',
          SUBTITLES: 'subs',
          BANDWIDTH: 10000,
          CODECS: 'foo;bar',
          NAME: '1'
        }, _attributes3['PROGRAM-ID'] = 1, _attributes3.RESOLUTION = {
          height: 600,
          width: 800
        }, _attributes3),
        endList: true,
        mediaSequence: 1,
        targetDuration: 0,
        resolvedUri: '',
        segments: [],
        timeline: 1,
        uri: ''
      }],
      segments: [],
      uri: ''
    };
    assert.deepEqual(toM3u8(input), expected);
  });
  QUnit.test('playlists with segments', function (assert) {
    var _attributes4, _attributes5, _mediaGroups2, _attributes6;

    var input = [{
      attributes: {
        id: '1',
        codecs: 'foo;bar',
        duration: 2,
        sourceDuration: 100,
        bandwidth: 20000,
        periodIndex: 1,
        mimeType: 'audio/mp4'
      },
      segments: [{
        uri: '',
        timeline: 1,
        duration: 2,
        resolvedUri: '',
        map: {
          uri: '',
          resolvedUri: ''
        },
        number: 1
      }, {
        uri: '',
        timeline: 1,
        duration: 2,
        resolvedUri: '',
        map: {
          uri: '',
          resolvedUri: ''
        },
        number: 2
      }]
    }, {
      attributes: {
        id: '2',
        codecs: 'foo;bar',
        sourceDuration: 100,
        duration: 2,
        bandwidth: 10000,
        periodIndex: 1,
        mimeType: 'audio/mp4'
      },
      segments: [{
        uri: '',
        timeline: 1,
        duration: 2,
        resolvedUri: '',
        map: {
          uri: '',
          resolvedUri: ''
        },
        number: 1
      }, {
        uri: '',
        timeline: 1,
        duration: 2,
        resolvedUri: '',
        map: {
          uri: '',
          resolvedUri: ''
        },
        number: 2
      }]
    }, {
      attributes: {
        sourceDuration: 100,
        id: '1',
        width: 800,
        duration: 2,
        height: 600,
        codecs: 'foo;bar',
        bandwidth: 10000,
        periodIndex: 1,
        mimeType: 'video/mp4'
      },
      segments: [{
        uri: '',
        timeline: 1,
        duration: 2,
        resolvedUri: '',
        map: {
          uri: '',
          resolvedUri: ''
        },
        number: 1
      }, {
        uri: '',
        timeline: 1,
        duration: 2,
        resolvedUri: '',
        map: {
          uri: '',
          resolvedUri: ''
        },
        number: 2
      }]
    }, {
      attributes: {
        sourceDuration: 100,
        id: '1',
        duration: 2,
        bandwidth: 20000,
        periodIndex: 1,
        mimeType: 'text/vtt',
        baseUrl: 'https://www.example.com/vtt'
      },
      segments: [{
        uri: '',
        timeline: 1,
        duration: 2,
        resolvedUri: '',
        map: {
          uri: '',
          resolvedUri: ''
        },
        number: 1
      }, {
        uri: '',
        timeline: 1,
        duration: 2,
        resolvedUri: '',
        map: {
          uri: '',
          resolvedUri: ''
        },
        number: 2
      }]
    }, {
      attributes: {
        sourceDuration: 100,
        duration: 2,
        id: '1',
        bandwidth: 10000,
        periodIndex: 1,
        mimeType: 'text/vtt',
        baseUrl: 'https://www.example.com/vtt'
      },
      segments: [{
        uri: '',
        timeline: 1,
        duration: 2,
        resolvedUri: '',
        map: {
          uri: '',
          resolvedUri: ''
        },
        number: 1
      }, {
        uri: '',
        timeline: 1,
        duration: 2,
        resolvedUri: '',
        map: {
          uri: '',
          resolvedUri: ''
        },
        number: 2
      }]
    }];
    var expected = {
      allowCache: true,
      discontinuityStarts: [],
      duration: 100,
      endList: true,
      minimumUpdatePeriod: 0,
      mediaGroups: (_mediaGroups2 = {
        AUDIO: {
          audio: {
            main: {
              autoselect: true,
              default: true,
              language: '',
              playlists: [{
                attributes: (_attributes4 = {
                  BANDWIDTH: 20000,
                  CODECS: 'foo;bar',
                  NAME: '1'
                }, _attributes4['PROGRAM-ID'] = 1, _attributes4),
                targetDuration: 2,
                mediaSequence: 1,
                endList: true,
                resolvedUri: '',
                segments: [{
                  uri: '',
                  timeline: 1,
                  duration: 2,
                  resolvedUri: '',
                  map: {
                    uri: '',
                    resolvedUri: ''
                  },
                  number: 1
                }, {
                  uri: '',
                  timeline: 1,
                  duration: 2,
                  resolvedUri: '',
                  map: {
                    uri: '',
                    resolvedUri: ''
                  },
                  number: 2
                }],
                timeline: 1,
                uri: ''
              }],
              uri: ''
            }
          }
        }
      }, _mediaGroups2['CLOSED-CAPTIONS'] = {}, _mediaGroups2.SUBTITLES = {
        subs: {
          text: {
            autoselect: false,
            default: false,
            language: 'text',
            playlists: [{
              attributes: (_attributes5 = {
                BANDWIDTH: 20000,
                NAME: '1'
              }, _attributes5['PROGRAM-ID'] = 1, _attributes5),
              endList: true,
              targetDuration: 2,
              mediaSequence: 1,
              resolvedUri: 'https://www.example.com/vtt',
              segments: [{
                uri: '',
                timeline: 1,
                duration: 2,
                resolvedUri: '',
                map: {
                  uri: '',
                  resolvedUri: ''
                },
                number: 1
              }, {
                uri: '',
                timeline: 1,
                duration: 2,
                resolvedUri: '',
                map: {
                  uri: '',
                  resolvedUri: ''
                },
                number: 2
              }],
              timeline: 1,
              uri: ''
            }],
            uri: ''
          }
        }
      }, _mediaGroups2.VIDEO = {}, _mediaGroups2),
      playlists: [{
        attributes: (_attributes6 = {
          AUDIO: 'audio',
          SUBTITLES: 'subs',
          BANDWIDTH: 10000,
          CODECS: 'foo;bar',
          NAME: '1'
        }, _attributes6['PROGRAM-ID'] = 1, _attributes6.RESOLUTION = {
          height: 600,
          width: 800
        }, _attributes6),
        endList: true,
        resolvedUri: '',
        mediaSequence: 1,
        targetDuration: 2,
        segments: [{
          uri: '',
          timeline: 1,
          duration: 2,
          resolvedUri: '',
          map: {
            uri: '',
            resolvedUri: ''
          },
          number: 1
        }, {
          uri: '',
          timeline: 1,
          duration: 2,
          resolvedUri: '',
          map: {
            uri: '',
            resolvedUri: ''
          },
          number: 2
        }],
        timeline: 1,
        uri: ''
      }],
      segments: [],
      uri: ''
    };
    assert.deepEqual(toM3u8(input), expected);
  });
  QUnit.test('playlists with sidx and sidxMapping', function (assert) {
    var _attributes7;

    var input = [{
      attributes: {
        sourceDuration: 100,
        id: '1',
        width: 800,
        height: 600,
        codecs: 'foo;bar',
        duration: 0,
        bandwidth: 10000,
        periodIndex: 1,
        mimeType: 'video/mp4'
      },
      segments: [],
      sidx: {
        byterange: {
          offset: 10,
          length: 10
        },
        uri: 'sidx.mp4',
        resolvedUri: 'http://example.com/sidx.mp4',
        duration: 10
      },
      uri: 'http://example.com/fmp4.mp4'
    }];
    var mapping = {
      'sidx.mp4-10-19': {
        sidx: {
          timescale: 1,
          firstOffset: 0,
          references: [{
            referenceType: 0,
            referencedSize: 5,
            subsegmentDuration: 2
          }]
        }
      }
    };
    var expected = [{
      attributes: (_attributes7 = {
        AUDIO: 'audio',
        SUBTITLES: 'subs',
        BANDWIDTH: 10000,
        CODECS: 'foo;bar',
        NAME: '1'
      }, _attributes7['PROGRAM-ID'] = 1, _attributes7.RESOLUTION = {
        height: 600,
        width: 800
      }, _attributes7),
      sidx: {
        byterange: {
          offset: 10,
          length: 10
        },
        uri: 'sidx.mp4',
        resolvedUri: 'http://example.com/sidx.mp4',
        duration: 10
      },
      targetDuration: 0,
      timeline: 1,
      uri: '',
      segments: [{
        map: {
          resolvedUri: 'http://example.com/sidx.mp4',
          uri: ''
        },
        byterange: {
          offset: 20,
          length: 5
        },
        uri: 'http://example.com/sidx.mp4',
        resolvedUri: 'http://example.com/sidx.mp4',
        duration: 2,
        number: 0,
        timeline: 1
      }],
      endList: true,
      mediaSequence: 1,
      resolvedUri: ''
    }];
    assert.deepEqual(toM3u8(input, mapping).playlists, expected);
  });
  QUnit.test('no playlists', function (assert) {
    assert.deepEqual(toM3u8([]), {});
  });

  QUnit.module('toPlaylists');
  QUnit.test('no representations', function (assert) {
    assert.deepEqual(toPlaylists([]), []);
  });
  QUnit.test('pretty simple', function (assert) {
    var representations = [{
      attributes: {
        baseUrl: 'http://example.com/',
        periodIndex: 0,
        sourceDuration: 2
      },
      segmentInfo: {
        template: {}
      }
    }];
    var playlists = [{
      attributes: {
        baseUrl: 'http://example.com/',
        periodIndex: 0,
        sourceDuration: 2,
        duration: 2
      },
      segments: [{
        uri: '',
        timeline: 0,
        duration: 2,
        resolvedUri: 'http://example.com/',
        map: {
          uri: '',
          resolvedUri: 'http://example.com/'
        },
        number: 1
      }]
    }];
    assert.deepEqual(toPlaylists(representations), playlists);
  });
  QUnit.test('segment base', function (assert) {
    var representations = [{
      attributes: {
        baseUrl: 'http://example.com/',
        periodIndex: 0,
        sourceDuration: 2
      },
      segmentInfo: {
        base: true
      }
    }];
    var playlists = [{
      attributes: {
        baseUrl: 'http://example.com/',
        periodIndex: 0,
        sourceDuration: 2,
        duration: 2
      },
      segments: [{
        map: {
          resolvedUri: 'http://example.com/',
          uri: ''
        },
        resolvedUri: 'http://example.com/',
        uri: 'http://example.com/',
        timeline: 0,
        duration: 2,
        number: 0
      }]
    }];
    assert.deepEqual(toPlaylists(representations), playlists);
  });
  QUnit.test('segment base with sidx', function (assert) {
    var representations = [{
      attributes: {
        baseUrl: 'http://example.com/',
        periodIndex: 0,
        sourceDuration: 2,
        indexRange: '10-19'
      },
      segmentInfo: {
        base: true
      }
    }];
    var playlists = [{
      attributes: {
        baseUrl: 'http://example.com/',
        periodIndex: 0,
        sourceDuration: 2,
        duration: 2,
        indexRange: '10-19'
      },
      segments: [],
      sidx: {
        map: {
          resolvedUri: 'http://example.com/',
          uri: ''
        },
        resolvedUri: 'http://example.com/',
        uri: 'http://example.com/',
        byterange: {
          offset: 10,
          length: 10
        },
        timeline: 0,
        duration: 2,
        number: 0
      }
    }];
    assert.deepEqual(toPlaylists(representations), playlists);
  });
  QUnit.test('segment list', function (assert) {
    var representations = [{
      attributes: {
        baseUrl: 'http://example.com/',
        duration: 10,
        sourceDuration: 11,
        periodIndex: 0
      },
      segmentInfo: {
        list: {
          segmentUrls: [{
            media: '1.fmp4'
          }, {
            media: '2.fmp4'
          }]
        }
      }
    }];
    var playlists = [{
      attributes: {
        baseUrl: 'http://example.com/',
        duration: 10,
        sourceDuration: 11,
        segmentUrls: [{
          media: '1.fmp4'
        }, {
          media: '2.fmp4'
        }],
        periodIndex: 0
      },
      segments: [{
        duration: 10,
        map: {
          resolvedUri: 'http://example.com/',
          uri: ''
        },
        resolvedUri: 'http://example.com/1.fmp4',
        timeline: 0,
        uri: '1.fmp4',
        number: 1
      }, {
        duration: 1,
        map: {
          resolvedUri: 'http://example.com/',
          uri: ''
        },
        resolvedUri: 'http://example.com/2.fmp4',
        timeline: 0,
        uri: '2.fmp4',
        number: 2
      }]
    }];
    assert.deepEqual(toPlaylists(representations), playlists);
  });

  QUnit.module('utils');
  QUnit.module('merge');
  QUnit.test('empty', function (assert) {
    assert.deepEqual(merge({}, {
      a: 1
    }), {
      a: 1
    });
    assert.deepEqual(merge({
      a: 1
    }, {
      a: 1
    }), {
      a: 1
    });
    assert.deepEqual(merge({
      a: 1
    }, {}), {
      a: 1
    });
  });
  QUnit.test('append', function (assert) {
    assert.deepEqual(merge({
      a: 1
    }, {
      b: 3
    }), {
      a: 1,
      b: 3
    });
  });
  QUnit.test('overwrite', function (assert) {
    assert.deepEqual(merge({
      a: 1
    }, {
      a: 2
    }), {
      a: 2
    });
  });
  QUnit.test('empty', function (assert) {
    assert.deepEqual(merge({}, {}), {});
    assert.deepEqual(merge({}, 1), {});
    assert.deepEqual(merge(1, {}), {});
  });
  QUnit.test('Test for checking the merge when multiple segment Information are present', function (assert) {
    var adaptationSetInfo = {
      base: {
        duration: '10'
      }
    };
    var representationInfo = {
      base: {
        duration: '25',
        indexRange: '230-252'
      }
    };
    var expected = {
      base: {
        duration: '25',
        indexRange: '230-252'
      }
    };
    assert.deepEqual(merge(adaptationSetInfo, representationInfo), expected, 'Merged SegmentBase info');
  });
  QUnit.test('Test for checking the merge when segment Information is present at a level and is undefined at another', function (assert) {
    var periodInfo = {
      base: {
        initialization: {
          range: '0-8888'
        }
      }
    };
    var adaptationSetInfo = {
      base: {
        duration: '10',
        indexRange: '230-252'
      }
    };
    var representationInfo = {};
    var expected = {
      base: {
        duration: '10',
        indexRange: '230-252',
        initialization: {
          range: '0-8888'
        }
      }
    };
    assert.deepEqual(merge(periodInfo, adaptationSetInfo, representationInfo), expected, 'Merged SegmentBase info');
  });
  QUnit.module('values');
  QUnit.test('empty', function (assert) {
    assert.deepEqual(values({}), []);
  });
  QUnit.test('mixed', function (assert) {
    assert.deepEqual(values({
      a: 1,
      b: true,
      c: 'foo'
    }), [1, true, 'foo']);
  });
  QUnit.module('flatten');
  QUnit.test('empty', function (assert) {
    assert.deepEqual(flatten([]), []);
  });
  QUnit.test('one item', function (assert) {
    assert.deepEqual(flatten([[1]]), [1]);
  });
  QUnit.test('multiple items', function (assert) {
    assert.deepEqual(flatten([[1], [2], [3]]), [1, 2, 3]);
  });
  QUnit.test('multiple multiple items', function (assert) {
    assert.deepEqual(flatten([[1], [2, 3], [4]]), [1, 2, 3, 4]);
  });
  QUnit.test('nested nests', function (assert) {
    assert.deepEqual(flatten([[1], [[2]]]), [1, [2]]);
  });
  QUnit.test('not a list of lists', function (assert) {
    assert.deepEqual(flatten([1, 2]), [1, 2]);
    assert.deepEqual(flatten([[1], 2]), [1, 2]);
  });
  QUnit.module('parseDuration');
  QUnit.test('full date', function (assert) {
    assert.deepEqual(parseDuration('P10Y10M10DT10H10M10.1S'), 342180610.1);
  });
  QUnit.test('time only', function (assert) {
    assert.deepEqual(parseDuration('PT10H10M10.1S'), 36610.1);
  });
  QUnit.test('empty', function (assert) {
    assert.deepEqual(parseDuration(''), 0);
  });
  QUnit.test('invalid', function (assert) {
    assert.deepEqual(parseDuration('foo'), 0);
  });
  QUnit.module('range');
  QUnit.test('simple', function (assert) {
    assert.deepEqual(range(1, 4), [1, 2, 3]);
  });
  QUnit.test('single number range', function (assert) {
    assert.deepEqual(range(1, 1), []);
  });
  QUnit.test('negative', function (assert) {
    assert.deepEqual(range(-1, 2), [-1, 0, 1]);
  });
  QUnit.module('from');
  QUnit.test('simple array', function (assert) {
    assert.deepEqual(from([1]), [1]);
  });
  QUnit.test('empty array', function (assert) {
    assert.deepEqual(from([]), []);
  });
  QUnit.test('non-array', function (assert) {
    assert.deepEqual(from(1), []);
  });
  QUnit.test('array-like', function (assert) {
    var fixture = document_1.createElement('div');
    fixture.innerHTML = '<div></div><div></div>';
    var result = from(fixture.getElementsByTagName('div'));
    assert.ok(result.map);
    assert.deepEqual(result.length, 2);
  });
  QUnit.module('findIndexes');
  QUnit.test('index not found', function (assert) {
    assert.deepEqual(findIndexes([], 'a'), []);
    assert.deepEqual(findIndexes([], ''), []);
    assert.deepEqual(findIndexes([{
      a: true
    }], 'b'), []);
  });
  QUnit.test('indexes found', function (assert) {
    assert.deepEqual(findIndexes([{
      a: true
    }], 'a'), [0]);
    assert.deepEqual(findIndexes([{
      a: true
    }, {
      b: true
    }, {
      b: true,
      c: true
    }], 'b'), [1, 2]);
  });
  QUnit.module('xml', {
    beforeEach: function beforeEach() {
      var parser = new window_1.DOMParser();
      var xmlString = "\n    <fix>\n      <test>foo </test>\n      <div>bar</div>\n      <div>baz</div>\n    </fix>";
      this.fixture = parser.parseFromString(xmlString, 'text/xml').documentElement;
    }
  });
  QUnit.test('findChildren', function (assert) {
    assert.deepEqual(findChildren(this.fixture, 'test').length, 1, 'single');
    assert.deepEqual(findChildren(this.fixture, 'div').length, 2, 'multiple');
    assert.deepEqual(findChildren(this.fixture, 'el').length, 0, 'none');
  });
  QUnit.test('getContent', function (assert) {
    var result = findChildren(this.fixture, 'test')[0];
    assert.deepEqual(getContent(result), 'foo', 'gets text and trims');
  });

}(QUnit));
